import{a as I,b as L,c as V,d as N,e as T,f as j,j as W,k as G,l as z}from"./chunk-WYSJMTWL.js";import{c as D}from"./chunk-TVZMEJD5.js";import{$a as v,Db as M,Ha as g,Ib as k,Ka as m,Oa as e,Pa as t,Qa as c,Ra as q,Sa as w,Ta as p,Va as d,Xa as x,Za as f,_ as y,_a as h,bb as P,d as A,ec as E,ga as C,ha as b,ia as u,ja as S,na as F,xa as r,ya as _}from"./chunk-J6TY4OG5.js";function U(i,a){if(i&1&&(e(0,"div",18),d(1),t()),i&2){let n=p(2);r(),x(" ",n.errorMessage," ")}}function X(i,a){i&1&&(e(0,"span"),d(1,"Wachtwoord Wijzigen"),t())}function Y(i,a){i&1&&(e(0,"span"),d(1,"Bezig..."),t())}function Z(i,a){if(i&1){let n=q();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),u(),e(4,"svg",5),c(5,"path",6),t()(),S(),e(6,"h3",7),d(7," Wachtwoord Wijzigen "),t(),e(8,"p",8),d(9," Je moet je wachtwoord wijzigen voordat je verder kunt gaan. "),t(),e(10,"form",9),w("ngSubmit",function(){C(n);let s=p();return b(s.onSubmit())}),e(11,"div")(12,"label",10),d(13," Nieuw Wachtwoord "),t(),e(14,"input",11),v("ngModelChange",function(s){C(n);let l=p();return h(l.newPassword,s)||(l.newPassword=s),b(s)}),t()(),e(15,"div")(16,"label",12),d(17," Bevestig Nieuw Wachtwoord "),t(),e(18,"input",13),v("ngModelChange",function(s){C(n);let l=p();return h(l.confirmPassword,s)||(l.confirmPassword=s),b(s)}),t()(),g(19,U,2,1,"div",14),e(20,"div",15)(21,"button",16),g(22,X,2,0,"span",17)(23,Y,2,0,"span",17),t()()()()()()}if(i&2){let n=p();r(14),f("ngModel",n.newPassword),r(4),f("ngModel",n.confirmPassword),r(),m("ngIf",n.errorMessage),r(2),m("disabled",n.loading),r(),m("ngIf",!n.loading),r(),m("ngIf",n.loading)}}var B=class i{constructor(a){this.authService=a}show=!1;passwordChanged=new F;closed=new F;newPassword="";confirmPassword="";loading=!1;errorMessage="";onSubmit(){if(this.errorMessage="",!this.newPassword||!this.confirmPassword){this.errorMessage="Vul alle velden in";return}if(this.newPassword.length<6){this.errorMessage="Nieuw wachtwoord moet minimaal 6 karakters bevatten";return}if(this.newPassword!==this.confirmPassword){this.errorMessage="Nieuwe wachtwoorden komen niet overeen";return}this.loading=!0,this.authService.changePasswordFirstTime(this.newPassword).then(()=>{this.loading=!1,this.passwordChanged.emit(),this.resetForm()}).catch(a=>{this.loading=!1,this.errorMessage=a.message||"Er is een fout opgetreden bij het wijzigen van het wachtwoord"})}resetForm(){this.newPassword="",this.confirmPassword="",this.errorMessage=""}static \u0275fac=function(n){return new(n||i)(_(E))};static \u0275cmp=y({type:i,selectors:[["app-change-password"]],inputs:{show:"show"},outputs:{passwordChanged:"passwordChanged",closed:"closed"},standalone:!0,features:[P],decls:1,vars:1,consts:[["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-yellow-100","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"text-sm","text-gray-500","mb-6"],[1,"space-y-4",3,"ngSubmit"],["for","newPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","newPassword","name","newPassword","required","","minlength","6","placeholder","Voer je nieuwe wachtwoord in",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","confirmPassword","name","confirmPassword","required","","placeholder","Bevestig je nieuwe wachtwoord",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm",4,"ngIf"],[1,"flex","space-x-3","mt-6"],["type","submit",1,"flex-1","bg-indigo-600","hover:bg-indigo-700","disabled:bg-indigo-400","text-white","font-medium","py-2","px-4","rounded-md","transition-colors","duration-200",3,"disabled"],[4,"ngIf"],[1,"text-red-600","text-sm"]],template:function(n,o){n&1&&g(0,Z,24,6,"div",0),n&2&&m("ngIf",o.show)},dependencies:[k,M,z,j,I,L,V,W,G,T,N],encapsulation:2})};function $(i,a){i&1&&(u(),e(0,"svg",18),c(1,"path",19)(2,"path",20),t())}function ee(i,a){i&1&&(u(),e(0,"svg",18),c(1,"path",21),t())}function te(i,a){if(i&1&&(e(0,"div",22),d(1),t()),i&2){let n=p();r(),x(" ",n.error," ")}}var H=class i{constructor(a,n){this.authService=a;this.router=n}username="";password="";loading=!1;error="";showChangePassword=!1;showPassword=!1;onLogin(){return A(this,null,function*(){if(!this.username||!this.password){this.error="Vul alle velden in";return}this.loading=!0,this.error="";try{(yield this.authService.login(this.username,this.password)).needsPasswordChange?this.showChangePassword=!0:this.router.navigate(["/quotes"])}catch(a){this.error=a.message||"Inloggen mislukt"}finally{this.loading=!1}})}onPasswordChanged(){this.showChangePassword=!1,this.router.navigate(["/quotes"])}onPasswordModalClosed(){this.showChangePassword=!1}static \u0275fac=function(n){return new(n||i)(_(E),_(D))};static \u0275cmp=y({type:i,selectors:[["app-login"]],standalone:!0,features:[P],decls:26,vars:9,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-8","space-y-6",3,"ngSubmit"],[1,"rounded-md","shadow-sm","-space-y-px"],["for","username",1,"sr-only"],["id","username","name","username","type","text","required","","placeholder","Gebruikersnaam",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-t-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],[1,"relative"],["for","password",1,"sr-only"],["id","password","name","password","required","","placeholder","Wachtwoord",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","pr-10","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-b-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],["class","h-5 w-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50",3,"disabled"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],["class","text-red-600 text-center",4,"ngIf"],[3,"passwordChanged","closed","show"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"],[1,"text-red-600","text-center"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),d(4," Log in op je account "),t()(),e(5,"form",3),w("ngSubmit",function(){return o.onLogin()}),e(6,"div",4)(7,"div")(8,"label",5),d(9,"Gebruikersnaam"),t(),e(10,"input",6),v("ngModelChange",function(l){return h(o.username,l)||(o.username=l),l}),t()(),e(11,"div",7)(12,"label",8),d(13,"Wachtwoord"),t(),e(14,"input",9),v("ngModelChange",function(l){return h(o.password,l)||(o.password=l),l}),t(),e(15,"button",10),w("click",function(){return o.showPassword=!o.showPassword}),g(16,$,3,0,"svg",11)(17,ee,2,0,"svg",11),t()()(),e(18,"div")(19,"button",12)(20,"span",13),u(),e(21,"svg",14),c(22,"path",15),t()(),d(23),t()(),g(24,te,2,1,"div",16),t()()(),S(),e(25,"app-change-password",17),w("passwordChanged",function(){return o.onPasswordChanged()})("closed",function(){return o.onPasswordModalClosed()}),t()),n&2&&(r(10),f("ngModel",o.username),r(4),m("type",o.showPassword?"text":"password"),f("ngModel",o.password),r(2),m("ngIf",!o.showPassword),r(),m("ngIf",o.showPassword),r(2),m("disabled",o.loading),r(4),x(" ",o.loading?"Bezig met inloggen...":"Inloggen"," "),r(),m("ngIf",o.error),r(),m("show",o.showChangePassword))},dependencies:[k,M,z,j,I,L,V,W,T,N,B],encapsulation:2})};export{H as LoginComponent};
