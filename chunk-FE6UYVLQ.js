import{a as O,b as H,c as $,d as W,e as R,f as J,j as K,l as X}from"./chunk-4TBWLLMC.js";import{a as Y,b as Z}from"./chunk-OXGJZN5C.js";import{c as U}from"./chunk-V5UMPPQC.js";import{$a as P,Cb as B,D as I,Db as Q,Eb as A,Ha as h,Ib as S,Ka as u,Oa as t,Pa as o,Qa as g,Ra as w,Sa as f,Ta as s,Ua as z,Va as d,Xa as x,Za as V,_ as b,_a as T,a as j,b as N,bb as C,cb as D,d as q,db as F,ec as G,fa as L,ga as c,ha as p,ia as v,ja as _,na as y,xa as a,ya as M}from"./chunk-WXRRZLAK.js";function re(r,n){if(r&1&&(t(0,"p",18),d(1),o()),r&2){let e=s(2);a(),x(" Categorie: ",e.quote==null?null:e.quote.category," ")}}function le(r,n){if(r&1){let e=w();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),d(5,"Stem op deze quote"),o(),t(6,"button",6),f("click",function(){c(e);let l=s();return p(l.close())}),v(),t(7,"svg",7),g(8,"path",8),o()()(),_(),t(9,"div",9)(10,"blockquote",10),d(11),o(),t(12,"p",11),d(13),o(),h(14,re,2,1,"p",12),o(),t(15,"div",13)(16,"button",14),f("click",function(){c(e);let l=s();return p(l.vote("yes"))}),d(17," \u{1F44D} Ja "),o(),t(18,"button",15),f("click",function(){c(e);let l=s();return p(l.vote("no"))}),d(19," \u{1F44E} Nee "),o()(),t(20,"div",16)(21,"p",17),d(22),o()()()()()}if(r&2){let e=s();a(11),x(' "',e.quote==null?null:e.quote.text,'" '),a(2),x("- ",e.quote==null?null:e.quote.author,""),a(),u("ngIf",e.quote==null?null:e.quote.category),a(8),x(" ",(e.quote==null||e.quote.votes==null?null:e.quote.votes.length)||0," stemmen gegeven ")}}var E=class r{show=!1;quote=null;voteSubmitted=new y;closed=new y;vote(n){this.voteSubmitted.emit(n)}close(){this.closed.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-pending-quote-modal"]],inputs:{show:"show",quote:"quote"},outputs:{voteSubmitted:"voteSubmitted",closed:"closed"},standalone:!0,features:[C],decls:1,vars:1,consts:[["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"bg-gray-50","p-4","rounded-lg","mb-4"],[1,"text-gray-700","italic","mb-2"],[1,"text-sm","text-gray-600"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"flex","justify-center","space-x-4"],[1,"bg-green-500","hover:bg-green-600","text-white","px-6","py-2","rounded-md","font-medium",3,"click"],[1,"bg-red-500","hover:bg-red-600","text-white","px-6","py-2","rounded-md","font-medium",3,"click"],[1,"mt-4","text-center"],[1,"text-sm","text-gray-500"],[1,"text-xs","text-gray-500","mt-1"]],template:function(e,i){e&1&&h(0,le,23,4,"div",0),e&2&&u("ngIf",i.show)},dependencies:[S,Q],encapsulation:2})};function de(r,n){if(r&1&&(t(0,"div",22)(1,"div",23)(2,"div",24),v(),t(3,"svg",25),g(4,"path",26),o()(),_(),t(5,"div",27)(6,"h3",28),d(7," Er is een fout opgetreden "),o(),t(8,"div",29),d(9),o()()()()),r&2){let e=s(2);a(9),x(" ",e.error," ")}}function ae(r,n){r&1&&(t(0,"div",30)(1,"div",23)(2,"div",24),v(),t(3,"svg",31),g(4,"path",32),o()(),_(),t(5,"div",27)(6,"h3",33),d(7," Quote succesvol bijgewerkt! "),o(),t(8,"div",34),d(9," De quote is bijgewerkt en wacht nu opnieuw op goedkeuring van de community. "),o()()()())}function se(r,n){r&1&&(v(),t(0,"svg",35),g(1,"circle",36)(2,"path",37),o())}function ue(r,n){if(r&1){let e=w();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h3",6),d(5,"Quote Bewerken"),o(),t(6,"button",7),f("click",function(){c(e);let l=s();return p(l.onClose())}),v(),t(7,"svg",8),g(8,"path",9),o()()(),_(),t(9,"form",10,0),f("ngSubmit",function(){c(e);let l=s();return p(l.onSubmit())}),t(11,"div",11)(12,"div")(13,"label",12),d(14," Quote * "),o(),t(15,"textarea",13),P("ngModelChange",function(l){c(e);let m=s();return T(m.editedQuote.text,l)||(m.editedQuote.text=l),p(l)}),o()(),t(16,"div")(17,"label",14),d(18," Auteur * "),o(),t(19,"input",15),P("ngModelChange",function(l){c(e);let m=s();return T(m.editedQuote.author,l)||(m.editedQuote.author=l),p(l)}),o()(),h(20,de,10,1,"div",16)(21,ae,10,0,"div",17),t(22,"div",18)(23,"button",19),f("click",function(){c(e);let l=s();return p(l.onClose())}),d(24," Annuleren "),o(),t(25,"button",20),h(26,se,3,0,"svg",21),d(27),o()()()()()()()}if(r&2){let e=z(10),i=s();a(15),V("ngModel",i.editedQuote.text),a(4),V("ngModel",i.editedQuote.author),a(),u("ngIf",i.error),a(),u("ngIf",i.success),a(4),u("disabled",i.loading||!e.form.valid),a(),u("ngIf",i.loading),a(),x(" ",i.loading?"Bezig met bijwerken...":"Quote Bijwerken"," ")}}var k=class r{show=!1;quote=null;quoteUpdated=new y;closed=new y;editedQuote={};loading=!1;error="";success=!1;ngOnChanges(){this.quote&&(this.editedQuote={text:this.quote.text,author:this.quote.author})}onSubmit(){if(!this.quote||!this.editedQuote.text||!this.editedQuote.author){this.error="Vul alle verplichte velden in";return}this.loading=!0,this.error="",this.success=!1;let n=N(j({},this.quote),{text:this.editedQuote.text,author:this.editedQuote.author,votes:[]});this.quoteUpdated.emit(n),this.success=!0,setTimeout(()=>{this.onClose()},2e3)}onClose(){this.closed.emit(),this.resetForm()}resetForm(){this.editedQuote={},this.loading=!1,this.error="",this.success=!1}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-edit-quote-modal"]],inputs:{show:"show",quote:"quote"},outputs:{quoteUpdated:"quoteUpdated",closed:"closed"},standalone:!0,features:[L,C],decls:1,vars:1,consts:[["editForm","ngForm"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"ngSubmit"],[1,"space-y-4"],["for","text",1,"block","text-sm","font-medium","text-gray-700"],["id","text","name","text","rows","4","required","","placeholder","Voer hier je quote in...",1,"mt-1","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","sm:text-sm","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["for","author",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","author","name","author","required","","placeholder","Naam van de persoon die dit gezegd heeft",1,"mt-1","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","sm:text-sm","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["class","rounded-md bg-red-50 p-4",4,"ngIf"],["class","rounded-md bg-green-50 p-4",4,"ngIf"],[1,"flex","justify-end","space-x-3"],["type","button",1,"bg-white","py-2","px-4","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-2 h-4 w-4 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"rounded-md","bg-red-50","p-4"],[1,"flex"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-2","text-sm","text-red-700"],[1,"rounded-md","bg-green-50","p-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-green-800"],[1,"mt-2","text-sm","text-green-700"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,i){e&1&&h(0,ue,28,7,"div",1),e&2&&u("ngIf",i.show)},dependencies:[S,Q,X,J,O,H,$,K,R,W],encapsulation:2})};function me(r,n){r&1&&(t(0,"div",16)(1,"div",17)(2,"div",18),v(),t(3,"svg",19),g(4,"circle",20)(5,"path",21),o(),d(6," Quotes laden... "),o(),_(),t(7,"p",22),d(8,"Even geduld, we halen de beste quotes op"),o()()())}function ce(r,n){if(r&1&&(t(0,"div",34),d(1),o()),r&2){let e=s().$implicit;a(),x(" ",e.category," ")}}function pe(r,n){if(r&1){let e=w();t(0,"div",25),f("click",function(){let l=c(e).$implicit,m=s(2);return p(m.openEditModal(l))}),t(1,"div",26)(2,"div",27)(3,"blockquote",28),d(4),o(),t(5,"div",29)(6,"span",30),d(7),o()(),t(8,"div",31)(9,"div",32),h(10,ce,2,1,"div",33),o()()()()()}if(r&2){let e=n.$implicit;a(4),x(' "',e.text,'" '),a(3),x("\u2014 ",e.author,""),a(3),u("ngIf",e.category)}}function ge(r,n){if(r&1&&(t(0,"div",23),h(1,pe,11,3,"div",24),o()),r&2){let e=s();a(),u("ngForOf",e.quotes)}}function fe(r,n){if(r&1){let e=w();t(0,"button",41),f("click",function(){c(e);let l=s(2);return p(l.router.navigate(["/add-quote"]))}),v(),t(1,"svg",42),g(2,"path",43),o(),d(3," Eerste quote toevoegen "),o()}}function xe(r,n){if(r&1&&(t(0,"div",16)(1,"div",35),v(),t(2,"svg",36),g(3,"path",37),o(),_(),t(4,"h3",38),d(5,"Geen quotes gevonden"),o(),t(6,"p",39),d(7,"Er zijn nog geen goedgekeurde quotes beschikbaar."),o(),t(8,"div"),h(9,fe,4,0,"button",40),D(10,"async"),o()()()),r&2){let e=s();a(9),u("ngIf",F(10,1,e.isLoggedIn$))}}var ie=class r{constructor(n,e,i){this.quoteService=n;this.authService=e;this.router=i;this.isLoggedIn$=this.authService.user$,this.isAdmin$=this.authService.isAdmin(),this.currentUser$=this.authService.getCurrentUserData()}quotes=[];loading=!0;isLoggedIn$;isAdmin$;currentUser$;showPendingModal=!1;currentPendingQuote=null;showEditModal=!1;currentEditQuote=null;mobileMenuOpen=!1;ngOnInit(){this.loadQuotes(),this.checkPendingQuotes()}loadQuotes(){this.quoteService.getApprovedQuotes().subscribe({next:n=>{this.quotes=n,this.loading=!1},error:n=>{console.error("Error loading quotes:",n),this.loading=!1}})}logout(){return q(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/login"])}catch(n){console.error("Logout error:",n)}})}checkPendingQuotes(){this.authService.user$.pipe(I(1)).subscribe(n=>{if(!n){this.showPendingModal=!1,this.currentPendingQuote=null;return}this.quoteService.getPendingQuotes().pipe(I(1)).subscribe({next:e=>{if(console.log("Checking pending quotes for user:",n.uid),console.log("Total pending quotes:",e.length),e.length>0){let i=e.find(l=>{let m=l.votes?.some(ne=>ne.userId===n.uid);return console.log(`Quote "${l.text}" - User voted:`,m),!m});i?(console.log("Showing pending quote modal for:",i.text),this.currentPendingQuote=i,this.showPendingModal=!0):(console.log("No unvoted quotes found for user:",n.uid),this.showPendingModal=!1,this.currentPendingQuote=null)}else console.log("No pending quotes available"),this.showPendingModal=!1,this.currentPendingQuote=null},error:e=>{console.error("Error checking pending quotes:",e)}})})}onVoteSubmitted(n){return q(this,null,function*(){if(!this.currentPendingQuote){console.error("No current pending quote to vote on");return}try{let e=this.currentPendingQuote.id;console.log("Voting on quote:",e,"with vote:",n);let i=e;this.closePendingModal(),yield this.quoteService.voteOnQuote(i,n),setTimeout(()=>{console.log("Checking for more pending quotes after vote..."),this.checkPendingQuotes()},2e3)}catch(e){console.error("Error voting on quote:",e)}})}closePendingModal(){console.log("Closing pending quote modal"),this.showPendingModal=!1,this.currentPendingQuote=null}openEditModal(n){this.currentEditQuote=n,this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.currentEditQuote=null}onQuoteUpdated(n){return q(this,null,function*(){try{yield this.quoteService.updateQuote(n),console.log("Quote updated and moved back to pending"),this.loadQuotes()}catch(e){console.error("Error updating quote:",e)}})}static \u0275fac=function(e){return new(e||r)(M(Z),M(G),M(U))};static \u0275cmp=b({type:r,selectors:[["app-quotes"]],standalone:!0,features:[C],decls:22,vars:8,consts:[[1,"min-h-screen","bg-gray-50"],[1,"max-w-7xl","mx-auto","py-6","sm:px-6","lg:px-8"],[1,"px-4","py-6","sm:px-0"],[1,"text-center","mb-8"],[1,"flex","items-center","justify-center","mb-4"],[1,"text-3xl","font-extrabold","text-gray-900","sm:text-4xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-indigo-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"mt-3","max-w-2xl","mx-auto","text-xl","text-gray-500","sm:mt-4"],[1,"mt-6","flex","justify-center"],[1,"bg-gradient-to-r","from-indigo-100","to-purple-100","px-4","py-2","rounded-full"],[1,"text-sm","font-medium","text-indigo-800"],["class","text-center py-16",4,"ngIf"],["class","grid gap-6 md:grid-cols-2 lg:grid-cols-3",4,"ngIf"],[3,"voteSubmitted","closed","show","quote"],[3,"quoteUpdated","closed","show","quote"],[1,"text-center","py-16"],[1,"bg-gradient-to-br","from-indigo-50","to-purple-50","border","border-indigo-200","rounded-xl","p-8","max-w-md","mx-auto"],[1,"inline-flex","items-center","px-6","py-3","font-semibold","leading-6","text-sm","shadow","rounded-md","text-white","bg-gradient-to-r","from-indigo-600","to-purple-600","transition","ease-in-out","duration-150","cursor-not-allowed"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-4","text-sm","text-gray-500"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-3"],["class","bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 border border-blue-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"bg-gradient-to-br","from-blue-50","via-indigo-50","to-purple-100","border","border-blue-200","rounded-xl","p-6","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:-translate-y-1","cursor-pointer",3,"click"],[1,"flex","justify-between","items-start","mb-4"],[1,"flex-1"],[1,"text-base","text-gray-800","italic","leading-relaxed","mb-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-medium","text-blue-700"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-3"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-200 text-blue-800 border border-blue-300",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-200","text-blue-800","border","border-blue-300"],[1,"bg-gradient-to-br","from-gray-50","to-gray-100","border","border-gray-200","rounded-xl","p-8","max-w-md","mx-auto"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"mx-auto","h-16","w-16","text-gray-300","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500","mb-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 transform hover:scale-105",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gradient-to-r","from-indigo-600","to-purple-600","hover:from-indigo-700","hover:to-purple-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition-all","duration-200","transform","hover:scale-105",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"-ml-1","mr-2","h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"]],template:function(e,i){e&1&&(t(0,"div",0),g(1,"app-navbar"),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),d(7," Goedgekeurde Quotes "),o()(),t(8,"div",4),v(),t(9,"svg",6),g(10,"path",7),o()(),_(),t(11,"p",8),d(12," Bekijk alle quotes die zijn goedgekeurd "),o(),t(13,"div",9)(14,"div",10)(15,"span",11),d(16),o()()()(),h(17,me,9,0,"div",12)(18,ge,2,1,"div",13)(19,xe,11,3,"div",12),o()(),t(20,"app-pending-quote-modal",14),f("voteSubmitted",function(m){return i.onVoteSubmitted(m)})("closed",function(){return i.closePendingModal()}),o(),t(21,"app-edit-quote-modal",15),f("quoteUpdated",function(m){return i.onQuoteUpdated(m)})("closed",function(){return i.closeEditModal()}),o()()),e&2&&(a(16),x("",i.quotes.length," quotes"),a(),u("ngIf",i.loading),a(),u("ngIf",!i.loading),a(),u("ngIf",!i.loading&&i.quotes.length===0),a(),u("show",i.showPendingModal)("quote",i.currentPendingQuote),a(),u("show",i.showEditModal)("quote",i.currentEditQuote))},dependencies:[S,B,Q,A,E,k,Y],encapsulation:2})};export{ie as QuotesComponent};
