import{a as N,b as V,c as W,d as L,e as T,f as j,j as k,k as G,l as z}from"./chunk-LCFIOMZR.js";import{c as D}from"./chunk-YONHMQPS.js";import{Aa as f,Gb as M,Ka as p,Lb as E,Na as m,Ra as t,Sa as n,Ta as S,Ua as A,Va as h,Wa as g,Ya as d,_ as x,_a as v,ab as u,bb as c,cb as w,d as q,eb as P,ga as y,ha as C,hc as I,ia as _,ja as b,oa as B,za as r}from"./chunk-SVTE6IGV.js";function U(o,a){if(o&1&&(t(0,"div",18),d(1),n()),o&2){let e=g(2);r(),v(" ",e.errorMessage," ")}}function X(o,a){o&1&&(t(0,"span"),d(1,"Wachtwoord Wijzigen"),n())}function Y(o,a){o&1&&(t(0,"span"),d(1,"Bezig..."),n())}function Z(o,a){if(o&1){let e=A();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),_(),t(4,"svg",5),S(5,"path",6),n()(),b(),t(6,"h3",7),d(7," Wachtwoord Wijzigen "),n(),t(8,"p",8),d(9," Je moet je wachtwoord wijzigen voordat je verder kunt gaan. "),n(),t(10,"form",9),h("ngSubmit",function(){y(e);let s=g();return C(s.onSubmit())}),t(11,"div")(12,"label",10),d(13," Nieuw Wachtwoord "),n(),t(14,"input",11),w("ngModelChange",function(s){y(e);let l=g();return c(l.newPassword,s)||(l.newPassword=s),C(s)}),n()(),t(15,"div")(16,"label",12),d(17," Bevestig Nieuw Wachtwoord "),n(),t(18,"input",13),w("ngModelChange",function(s){y(e);let l=g();return c(l.confirmPassword,s)||(l.confirmPassword=s),C(s)}),n()(),p(19,U,2,1,"div",14),t(20,"div",15)(21,"button",16),p(22,X,2,0,"span",17)(23,Y,2,0,"span",17),n()()()()()()}if(o&2){let e=g();r(14),u("ngModel",e.newPassword),r(4),u("ngModel",e.confirmPassword),r(),m("ngIf",e.errorMessage),r(2),m("disabled",e.loading),r(),m("ngIf",!e.loading),r(),m("ngIf",e.loading)}}var F=class o{constructor(a){this.authService=a}show=!1;passwordChanged=new B;closed=new B;newPassword="";confirmPassword="";loading=!1;errorMessage="";onSubmit(){if(this.errorMessage="",!this.newPassword||!this.confirmPassword){this.errorMessage="Vul alle velden in";return}if(this.newPassword.length<6){this.errorMessage="Nieuw wachtwoord moet minimaal 6 karakters bevatten";return}if(this.newPassword!==this.confirmPassword){this.errorMessage="Nieuwe wachtwoorden komen niet overeen";return}this.loading=!0,this.authService.changePasswordFirstTime(this.newPassword).then(()=>{this.loading=!1,this.passwordChanged.emit(),this.resetForm()}).catch(a=>{this.loading=!1,this.errorMessage=a.message||"Er is een fout opgetreden bij het wijzigen van het wachtwoord"})}resetForm(){this.newPassword="",this.confirmPassword="",this.errorMessage=""}static \u0275fac=function(e){return new(e||o)(f(I))};static \u0275cmp=x({type:o,selectors:[["app-change-password"]],inputs:{show:"show"},outputs:{passwordChanged:"passwordChanged",closed:"closed"},standalone:!0,features:[P],decls:1,vars:1,consts:[["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-yellow-100","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"text-sm","text-gray-500","mb-6"],[1,"space-y-4",3,"ngSubmit"],["for","newPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","newPassword","name","newPassword","required","","minlength","6","placeholder","Voer je nieuwe wachtwoord in",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","confirmPassword","name","confirmPassword","required","","placeholder","Bevestig je nieuwe wachtwoord",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm",4,"ngIf"],[1,"flex","space-x-3","mt-6"],["type","submit",1,"flex-1","bg-indigo-600","hover:bg-indigo-700","disabled:bg-indigo-400","text-white","font-medium","py-2","px-4","rounded-md","transition-colors","duration-200",3,"disabled"],[4,"ngIf"],[1,"text-red-600","text-sm"]],template:function(e,i){e&1&&p(0,Z,24,6,"div",0),e&2&&m("ngIf",i.show)},dependencies:[E,M,z,j,N,V,W,k,G,T,L],encapsulation:2})};function $(o,a){if(o&1&&(t(0,"div",15),d(1),n()),o&2){let e=g();r(),v(" ",e.error," ")}}var H=class o{constructor(a,e){this.authService=a;this.router=e}username="";password="";loading=!1;error="";showChangePassword=!1;onLogin(){return q(this,null,function*(){if(!this.username||!this.password){this.error="Vul alle velden in";return}this.loading=!0,this.error="";try{(yield this.authService.login(this.username,this.password)).needsPasswordChange?this.showChangePassword=!0:this.router.navigate(["/quotes"])}catch(a){this.error=a.message||"Inloggen mislukt"}finally{this.loading=!1}})}onPasswordChanged(){this.showChangePassword=!1,this.router.navigate(["/quotes"])}onPasswordModalClosed(){this.showChangePassword=!1}static \u0275fac=function(e){return new(e||o)(f(I),f(D))};static \u0275cmp=x({type:o,selectors:[["app-login"]],standalone:!0,features:[P],decls:23,vars:6,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-8","space-y-6",3,"ngSubmit"],[1,"rounded-md","shadow-sm","-space-y-px"],["for","username",1,"sr-only"],["id","username","name","username","type","text","required","","placeholder","Gebruikersnaam",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-t-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["for","password",1,"sr-only"],["id","password","name","password","type","password","required","","placeholder","Wachtwoord",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-b-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50",3,"disabled"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],["class","text-red-600 text-center",4,"ngIf"],[3,"passwordChanged","closed","show"],[1,"text-red-600","text-center"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),d(4," Log in op je account "),n()(),t(5,"form",3),h("ngSubmit",function(){return i.onLogin()}),t(6,"div",4)(7,"div")(8,"label",5),d(9,"Gebruikersnaam"),n(),t(10,"input",6),w("ngModelChange",function(l){return c(i.username,l)||(i.username=l),l}),n()(),t(11,"div")(12,"label",7),d(13,"Wachtwoord"),n(),t(14,"input",8),w("ngModelChange",function(l){return c(i.password,l)||(i.password=l),l}),n()()(),t(15,"div")(16,"button",9)(17,"span",10),_(),t(18,"svg",11),S(19,"path",12),n()(),d(20),n()(),p(21,$,2,1,"div",13),n()()(),b(),t(22,"app-change-password",14),h("passwordChanged",function(){return i.onPasswordChanged()})("closed",function(){return i.onPasswordModalClosed()}),n()),e&2&&(r(10),u("ngModel",i.username),r(4),u("ngModel",i.password),r(2),m("disabled",i.loading),r(4),v(" ",i.loading?"Bezig met inloggen...":"Inloggen"," "),r(),m("ngIf",i.error),r(),m("show",i.showChangePassword))},dependencies:[E,M,z,j,N,V,W,k,T,L,F],encapsulation:2})};export{H as LoginComponent};
