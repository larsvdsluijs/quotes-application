var AC=Object.defineProperty,SC=Object.defineProperties;var NC=Object.getOwnPropertyDescriptors;var oa=Object.getOwnPropertySymbols,RC=Object.getPrototypeOf,Yy=Object.prototype.hasOwnProperty,Jy=Object.prototype.propertyIsEnumerable,xC=Reflect.get;var Qy=(t,e,n)=>e in t?AC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ue=(t,e)=>{for(var n in e||={})Yy.call(e,n)&&Qy(t,n,e[n]);if(oa)for(var n of oa(e))Jy.call(e,n)&&Qy(t,n,e[n]);return t},We=(t,e)=>SC(t,NC(e));var XL=(t,e)=>{var n={};for(var r in t)Yy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&oa)for(var r of oa(t))e.indexOf(r)<0&&Jy.call(t,r)&&(n[r]=t[r]);return n};var Pn=(t,e,n)=>xC(RC(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(l){i(l)}},o=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});function z(t){return typeof t=="function"}function Mn(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var aa=Mn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function fr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(s){e=s instanceof aa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Zy(s)}catch(o){e=e??[],o instanceof aa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new aa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Zy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fr(n,e)}remove(e){let{_finalizers:n}=this;n&&fr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Kl=Re.EMPTY;function ca(t){return t instanceof Re||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function Zy(t){z(t)?t():t.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ni={setTimeout(t,e,...n){let{delegate:r}=ni;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ni;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ua(t){ni.setTimeout(()=>{let{onUnhandledError:e}=Rt;if(e)e(t);else throw t})}function bs(){}var Xy=Ql("C",void 0,void 0);function ev(t){return Ql("E",void 0,t)}function tv(t){return Ql("N",t,void 0)}function Ql(t,e,n){return{kind:t,value:e,error:n}}var pr=null;function ri(t){if(Rt.useDeprecatedSynchronousErrorHandling){let e=!pr;if(e&&(pr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=pr;if(pr=null,n)throw r}}else t()}function nv(t){Rt.useDeprecatedSynchronousErrorHandling&&pr&&(pr.errorThrown=!0,pr.error=t)}var gr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ca(e)&&e.add(this)):this.destination=kC}static create(e,n,r){return new ii(e,n,r)}next(e){this.isStopped?Jl(tv(e),this):this._next(e)}error(e){this.isStopped?Jl(ev(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jl(Xy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PC=Function.prototype.bind;function Yl(t,e){return PC.call(t,e)}var Zl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){la(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){la(r)}else la(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){la(n)}}},ii=class extends gr{constructor(e,n,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Rt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Yl(e.next,s),error:e.error&&Yl(e.error,s),complete:e.complete&&Yl(e.complete,s)}):i=e}this.destination=new Zl(i)}};function la(t){Rt.useDeprecatedSynchronousErrorHandling?nv(t):ua(t)}function MC(t){throw t}function Jl(t,e){let{onStoppedNotification:n}=Rt;n&&ni.setTimeout(()=>n(t,e))}var kC={closed:!0,next:bs,error:MC,complete:bs};var si=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(t){return t}function OC(...t){return Xl(t)}function Xl(t){return t.length===0?ht:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var G=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=LC(n)?n:new ii(n,r,i);return ri(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=rv(r),new r((i,s)=>{let o=new ii({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[si](){return this}pipe(...n){return Xl(n)(this)}toPromise(n){return n=rv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function rv(t){var e;return(e=t??Rt.Promise)!==null&&e!==void 0?e:Promise}function FC(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}function LC(t){return t&&t instanceof gr||FC(t)&&ca(t)}var Cs=new G(t=>t.complete());function ed(t){return z(t?.lift)}function Z(t){return e=>{if(ed(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new td(t,e,n,r,i)}var td=class extends gr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function da(t){return t<=0?()=>Cs:Z((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function nd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function iv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mr(t){return this instanceof mr?(this.v=t,this):new mr(t)}function ov(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(C){return Promise.resolve(C).then(y,p)}}function c(y,C){r[y]&&(i[y]=function(x){return new Promise(function(R,O){s.push([y,x,R,O])>1||u(y,x)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(x){m(s[0][3],x)}}function l(y){y.value instanceof mr?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function av(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iv=="function"?iv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},o)}}var ha=t=>t&&typeof t.length=="number"&&typeof t!="function";function fa(t){return z(t?.then)}function pa(t){return z(t[si])}function ga(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function ma(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ya=VC();function va(t){return z(t?.[ya])}function _a(t){return ov(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mr(n.read());if(i)return yield mr(void 0);yield yield mr(r)}}finally{n.releaseLock()}})}function Ia(t){return z(t?.getReader)}function Te(t){if(t instanceof G)return t;if(t!=null){if(pa(t))return UC(t);if(ha(t))return jC(t);if(fa(t))return BC(t);if(ga(t))return cv(t);if(va(t))return $C(t);if(Ia(t))return HC(t)}throw ma(t)}function UC(t){return new G(e=>{let n=t[si]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jC(t){return new G(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function BC(t){return new G(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ua)})}function $C(t){return new G(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cv(t){return new G(e=>{qC(t,e).catch(n=>e.error(n))})}function HC(t){return cv(_a(t))}function qC(t,e){var n,r,i,s;return sv(this,void 0,void 0,function*(){try{for(n=av(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}var wa=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var As={setInterval(t,e,...n){let{delegate:r}=As;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=As;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var oi=class extends wa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return As.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&As.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var rd={now(){return(rd.delegate||Date).now()},delegate:void 0};var ai=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ai.now=rd.now;var ci=class extends ai{constructor(e,n=ai.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ss=new ci(oi);function uv(t){return t&&z(t.schedule)}function lv(t){return t instanceof Date&&!isNaN(t)}function dv(t){return t[t.length-1]}function Ea(t){return z(dv(t))?t.pop():void 0}function kn(t){return uv(dv(t))?t.pop():void 0}function Ke(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function hv(t){return Z((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Y(n,void 0,void 0,o=>{s=Te(t(o,hv(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}var{isArray:zC}=Array,{getPrototypeOf:GC,prototype:WC,keys:KC}=Object;function Da(t){if(t.length===1){let e=t[0];if(zC(e))return{args:e,keys:null};if(QC(e)){let n=KC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function QC(t){return t&&typeof t=="object"&&GC(t)===WC}function On(t,e=0){return Z((n,r)=>{n.subscribe(Y(r,i=>Ke(r,t,()=>r.next(i),e),()=>Ke(r,t,()=>r.complete(),e),i=>Ke(r,t,()=>r.error(i),e)))})}function Fn(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function fv(t,e){return Te(t).pipe(Fn(e),On(e))}function pv(t,e){return Te(t).pipe(Fn(e),On(e))}function gv(t,e){return new G(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function mv(t,e){return new G(n=>{let r;return Ke(n,e,()=>{r=t[ya](),Ke(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function Ta(t,e){if(!t)throw new Error("Iterable cannot be null");return new G(n=>{Ke(n,e,()=>{let r=t[Symbol.asyncIterator]();Ke(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function yv(t,e){return Ta(_a(t),e)}function vv(t,e){if(t!=null){if(pa(t))return fv(t,e);if(ha(t))return gv(t,e);if(fa(t))return pv(t,e);if(ga(t))return Ta(t,e);if(va(t))return mv(t,e);if(Ia(t))return yv(t,e)}throw ma(t)}function un(t,e){return e?vv(t,e):Te(t)}function ft(t,e){return Z((n,r)=>{let i=0;n.subscribe(Y(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:YC}=Array;function JC(t,e){return YC(e)?t(...e):t(e)}function ba(t){return ft(e=>JC(t,e))}function Ca(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ZC(...t){let e=kn(t),n=Ea(t),{args:r,keys:i}=Da(t);if(r.length===0)return un([],e);let s=new G(XC(r,e,i?o=>Ca(i,o):ht));return n?s.pipe(ba(n)):s}function XC(t,e,n=ht){return r=>{_v(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)_v(e,()=>{let l=un(t[u],e),h=!1;l.subscribe(Y(r,p=>{s[u]=p,h||(h=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function _v(t,e,n){t?Ke(n,t,e):e()}function Iv(t,e,n,r,i,s,o,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?C(x):u.push(x),C=x=>{s&&e.next(x),l++;let R=!1;Te(n(x,h++)).subscribe(Y(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();o?Ke(e,o,()=>C(O)):C(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(Y(e,y,()=>{p=!0,m()})),()=>{c?.()}}function yr(t,e,n=1/0){return z(e)?yr((r,i)=>ft((s,o)=>e(r,s,i,o))(Te(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>Iv(r,i,t,n)))}function wv(t,e,n,r,i){return(s,o)=>{let c=n,u=e,l=0;s.subscribe(Y(o,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function id(t=1/0){return yr(ht,t)}function Ev(){return id(1)}function eA(t,e){return z(e)?yr(t,e,1):yr(t,1)}var Dv=Mn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ln=(()=>{class t extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Aa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Dv}next(n){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Kl:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,fr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new G;return n.source=this,n}}return t.create=(e,n)=>new Aa(e,n),t})(),Aa=class extends Ln{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Kl}};function Ns(t){return Z((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Sa(...t){return Ev()(un(t,kn(t)))}function tA(t){return ft(()=>t)}function Tv(...t){let e=kn(t);return un(t,e)}function nA(t,e){let n=z(t)?t:()=>t,r=i=>i.error(n());return new G(e?i=>e.schedule(r,0,i):r)}function Rs(t,e){return Z((n,r)=>{let i=0;n.subscribe(Y(r,s=>t.call(e,s,i++)&&r.next(s)))})}var vr=Mn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Na(t=rA){return Z((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function rA(){return new vr}function iA(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function bv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rs((i,s)=>t(i,s,r)):ht,da(1),n?Ns(e):Na(()=>new vr))}function sd(t){return t<=0?()=>Cs:Z((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function sA(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rs((i,s)=>t(i,s,r)):ht,sd(1),n?Ns(e):Na(()=>new vr))}function od(){return Z((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ad=class extends G{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ed(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return od()(this)}};var xs=class extends Ln{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function oA(t,e){return Z(wv(t,e,arguments.length>=2,!0))}function aA(...t){let e=kn(t);return Z((n,r)=>{(e?Sa(t,n,e):Sa(t,n)).subscribe(r)})}function Ra(t,e){return Z((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(Y(r,u=>{i?.unsubscribe();let l=0,h=s++;Te(t(u,h)).subscribe(i=Y(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function cA(t){return Z((e,n)=>{Te(t).subscribe(Y(n,()=>n.complete(),bs)),!n.closed&&e.subscribe(n)})}function cd(t,e,n){let r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(Y(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ht}var uA=Mn(t=>function(n=null){t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n});function lA(t,e){let{first:n,each:r,with:i=dA,scheduler:s=e??Ss,meta:o=null}=lv(t)?{first:t}:typeof t=="number"?{each:t}:t;if(n==null&&r==null)throw new TypeError("No timeout provided.");return Z((c,u)=>{let l,h,p=null,m=0,y=C=>{h=Ke(u,s,()=>{try{l.unsubscribe(),Te(i({meta:o,lastValue:p,seen:m})).subscribe(u)}catch(x){u.error(x)}},C)};l=c.subscribe(Y(u,C=>{h?.unsubscribe(),m++,u.next(p=C),r>0&&y(r)},void 0,void 0,()=>{h?.closed||h?.unsubscribe(),p=null})),!m&&y(n!=null?typeof n=="number"?n:+n-s.now():r)})}function dA(t){throw new uA(t)}function Cv(t,e){return Object.is(t,e)}var Le=null,xa=!1,Pa=1,ln=Symbol("SIGNAL");function oe(t){let e=Le;return Le=t,e}function Av(){return Le}var Ms={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dd(t){if(xa)throw new Error("");if(Le===null)return;Le.consumerOnSignalRead(t);let e=Le.nextProducerIndex++;if(Fa(Le),e<Le.producerNode.length&&Le.producerNode[e]!==t&&Ps(Le)){let n=Le.producerNode[e];Oa(n,Le.producerIndexOfThis[e])}Le.producerNode[e]!==t&&(Le.producerNode[e]=t,Le.producerIndexOfThis[e]=Ps(Le)?xv(t,Le,e):0),Le.producerLastReadVersion[e]=t.version}function hA(){Pa++}function Sv(t){if(!(Ps(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Pa)){if(!t.producerMustRecompute(t)&&!fd(t)){t.dirty=!1,t.lastCleanEpoch=Pa;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Pa}}function Nv(t){if(t.liveConsumerNode===void 0)return;let e=xa;xa=!0;try{for(let n of t.liveConsumerNode)n.dirty||fA(n)}finally{xa=e}}function Rv(){return Le?.consumerAllowSignalWrites!==!1}function fA(t){t.dirty=!0,Nv(t),t.consumerMarkedDirty?.(t)}function ka(t){return t&&(t.nextProducerIndex=0),oe(t)}function hd(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ps(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Oa(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function fd(t){Fa(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Sv(n),r!==n.version))return!0}return!1}function pd(t){if(Fa(t),Ps(t))for(let e=0;e<t.producerNode.length;e++)Oa(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xv(t,e,n){if(Pv(t),t.liveConsumerNode.length===0&&Mv(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=xv(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Oa(t,e){if(Pv(t),t.liveConsumerNode.length===1&&Mv(t))for(let r=0;r<t.producerNode.length;r++)Oa(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Fa(i),i.producerIndexOfThis[r]=e}}function Ps(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fa(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Pv(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Mv(t){return t.producerNode!==void 0}function kv(t){let e=Object.create(pA);e.computation=t;let n=()=>{if(Sv(e),dd(e),e.value===Ma)throw e.error;return e.value};return n[ln]=e,n}var ud=Symbol("UNSET"),ld=Symbol("COMPUTING"),Ma=Symbol("ERRORED"),pA=We(Ue({},Ms),{value:ud,dirty:!0,error:null,equal:Cv,producerMustRecompute(t){return t.value===ud||t.value===ld},producerRecomputeValue(t){if(t.value===ld)throw new Error("Detected cycle in computations.");let e=t.value;t.value=ld;let n=ka(t),r;try{r=t.computation()}catch(i){r=Ma,t.error=i}finally{hd(t,n)}if(e!==ud&&e!==Ma&&r!==Ma&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function gA(){throw new Error}var Ov=gA;function Fv(){Ov()}function Lv(t){Ov=t}var mA=null;function Vv(t){let e=Object.create(jv);e.value=t;let n=()=>(dd(e),e.value);return n[ln]=e,n}function gd(t,e){Rv()||Fv(),t.equal(t.value,e)||(t.value=e,yA(t))}function Uv(t,e){Rv()||Fv(),gd(t,e(t.value))}var jv=We(Ue({},Ms),{equal:Cv,value:void 0});function yA(t){t.version++,hA(),Nv(t),mA?.()}var La=class extends oi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Va=class extends ci{};var md=new Va(La);function vA(t){return!!t&&(t instanceof G||z(t.lift)&&z(t.subscribe))}function _A(t){return new G(e=>{Te(t()).subscribe(e)})}function IA(...t){let e=Ea(t),{args:n,keys:r}=Da(t),i=new G(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Te(n[h]).subscribe(Y(s,m=>{p||(p=!0,l--),c[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Ca(r,c):c),s.complete())}))}});return e?i.pipe(ba(e)):i}var T_="https://g.co/ng/security#xss",ie=class extends Error{constructor(e,n){super(b_(e,n)),this.code=e}};function b_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $s(t){return{toString:t}.toString()}var Ua="__parameters__";function wA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function C_(t,e,n){return $s(()=>{let r=wA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,l,h){let p=u.hasOwnProperty(Ua)?u[Ua]:Object.defineProperty(u,Ua,{value:[]})[Ua];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ui=globalThis;function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function EA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(nt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function xd(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var DA=ge({__forward_ref__:ge});function A_(t){return t.__forward_ref__=A_,t.toString=function(){return nt(this())},t}function tt(t){return S_(t)?t():t}function S_(t){return typeof t=="function"&&t.hasOwnProperty(DA)&&t.__forward_ref__===A_}function fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function N_(t){return{providers:t.providers||[],imports:t.imports||[]}}function Dc(t){return Bv(t,R_)||Bv(t,x_)}function RH(t){return Dc(t)!==null}function Bv(t,e){return t.hasOwnProperty(e)?t[e]:null}function TA(t){let e=t&&(t[R_]||t[x_]);return e||null}function $v(t){return t&&(t.hasOwnProperty(Hv)||t.hasOwnProperty(bA))?t[Hv]:null}var R_=ge({\u0275prov:ge}),Hv=ge({\u0275inj:ge}),x_=ge({ngInjectableDef:ge}),bA=ge({ngInjectorDef:ge}),te=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=fe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function P_(t){return t&&!!t.\u0275providers}var CA=ge({\u0275cmp:ge}),AA=ge({\u0275dir:ge}),SA=ge({\u0275pipe:ge}),NA=ge({\u0275mod:ge}),Qa=ge({\u0275fac:ge}),Os=ge({__NG_ELEMENT_ID__:ge}),qv=ge({__NG_ENV_ID__:ge});function mi(t){return typeof t=="string"?t:t==null?"":String(t)}function RA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():mi(t)}function xA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ie(-200,t)}function Th(t,e){throw new ie(-201,!1)}var X=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(X||{}),Pd;function M_(){return Pd}function ct(t){let e=Pd;return Pd=t,e}function k_(t,e,n){let r=Dc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&X.Optional)return null;if(e!==void 0)return e;Th(t,"Injector")}var PA={},Fs=PA,Md="__NG_DI_FLAG__",Ya="ngTempTokenPath",MA="ngTokenPath",kA=/\n/gm,OA="\u0275",zv="__source",pi;function FA(){return pi}function Vn(t){let e=pi;return pi=t,e}function LA(t,e=X.Default){if(pi===void 0)throw new ie(-203,!1);return pi===null?k_(t,void 0,e):pi.get(t,e&X.Optional?null:void 0,e)}function Ne(t,e=X.Default){return(M_()||LA)(tt(t),e)}function ee(t,e=X.Default){return Ne(t,Tc(e))}function Tc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kd(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,s=X.Default;for(let o=0;o<r.length;o++){let c=r[o],u=VA(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function O_(t,e){return t[Md]=e,t.prototype[Md]=e,t}function VA(t){return t[Md]}function UA(t,e,n,r){let i=t[Ya];throw e[zv]&&i.unshift(e[zv]),t.message=jA(`
`+t.message,i,n,r),t[MA]=i,t[Ya]=null,t}function jA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==OA?t.slice(2):t;let i=nt(e);if(Array.isArray(e))i=e.map(nt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):nt(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(kA,`
  `)}`}var gt=O_(C_("Optional"),8);var BA=O_(C_("SkipSelf"),4);function wr(t,e){let n=t.hasOwnProperty(Qa);return n?t[Qa]:null}function bh(t,e){t.forEach(n=>Array.isArray(n)?bh(n,e):e(n))}function F_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ja(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function $A(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Ch(t,e,n){let r=Hs(t,e);return r>=0?t[r|1]=n:(r=~r,$A(t,r,e,n)),r}function yd(t,e){let n=Hs(t,e);if(n>=0)return t[n|1]}function Hs(t,e){return HA(t,e,1)}function HA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var yi={},ut=[],Za=new te(""),L_=new te("",-1),V_=new te(""),Xa=class{get(e,n=Fs){if(n===Fs){let r=new Error(`NullInjectorError: No provider for ${nt(e)}!`);throw r.name="NullInjectorError",r}return n}},U_=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(U_||{}),Ls=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ls||{}),Bn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Bn||{});function qA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Od(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];zA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function j_(t){return t===3||t===4||t===6}function zA(t){return t.charCodeAt(0)===64}function Vs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Gv(t,n,i,null,e[++r]):Gv(t,n,i,null,null))}}return t}function Gv(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var B_="ng-template";function GA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&qA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ah(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Ah(t){return t.type===4&&t.value!==B_}function WA(t,e,n){let r=t.type===4&&!n?B_:t.value;return e===r}function KA(t,e,n){let r=4,i=t.attrs,s=i!==null?JA(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!xt(r)&&!xt(u))return!1;if(o&&xt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!WA(t,u,n)||u===""&&e.length===1){if(xt(r))return!1;o=!0}}else if(r&8){if(i===null||!GA(t,i,u,n)){if(xt(r))return!1;o=!0}}else{let l=e[++c],h=QA(u,i,Ah(t),n);if(h===-1){if(xt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(xt(r))return!1;o=!0}}}}return xt(r)||o}function xt(t){return(t&1)===0}function QA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return ZA(e,t)}function YA(t,e,n=!1){for(let r=0;r<e.length;r++)if(KA(t,e[r],n))return!0;return!1}function JA(t){for(let e=0;e<t.length;e++){let n=t[e];if(j_(n))return e}return t.length}function ZA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Wv(t,e){return t?":not("+e.trim()+")":e}function XA(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!xt(o)&&(e+=Wv(s,i),i=""),r=o,s=s||!xt(r);n++}return i!==""&&(e+=Wv(s,i)),e}function e0(t){return t.map(XA).join(",")}function t0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!xt(i))break;i=s}r++}return{attrs:e,classes:n}}function xH(t){return $s(()=>{let e=G_(t),n=We(Ue({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===U_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ls.Emulated,styles:t.styles||ut,_:null,schemas:t.schemas||null,tView:null,id:""});W_(n);let r=t.dependencies;return n.directiveDefs=Qv(r,!1),n.pipeDefs=Qv(r,!0),n.id=s0(n),n})}function n0(t){return $n(t)||H_(t)}function r0(t){return t!==null}function $_(t){return $s(()=>({type:t.type,bootstrap:t.bootstrap||ut,declarations:t.declarations||ut,imports:t.imports||ut,exports:t.exports||ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Kv(t,e){if(t==null)return yi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=Bn.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==Bn.None?[r,c]:r,e[s]=o):n[s]=r}return n}function Sh(t){return $s(()=>{let e=G_(t);return W_(e),e})}function qs(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function $n(t){return t[CA]||null}function H_(t){return t[AA]||null}function q_(t){return t[SA]||null}function i0(t){let e=$n(t)||H_(t)||q_(t);return e!==null?e.standalone:!1}function z_(t,e){let n=t[NA]||null;if(!n&&e===!0)throw new Error(`Type ${nt(t)} does not have '\u0275mod' property.`);return n}function G_(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||yi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kv(t.inputs,e),outputs:Kv(t.outputs),debugInfo:null}}function W_(t){t.features?.forEach(e=>e(t))}function Qv(t,e){if(!t)return null;let n=e?q_:n0;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(r0)}function s0(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Nr(t){return{\u0275providers:t}}function o0(...t){return{\u0275providers:K_(!0,t),\u0275fromNgModule:!0}}function K_(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return bh(e,o=>{let c=o;Fd(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Q_(i,s),n}function Q_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Nh(i,s=>{e(s,r)})}}function Fd(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,s=$v(t),o=!s&&$n(t);if(!s&&!o){let u=t.ngModule;if(s=$v(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Fd(l,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{bh(s.imports,h=>{Fd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Q_(l,e)}if(!c){let l=wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:ut},i),e({provide:V_,useValue:i,multi:!0},i),e({provide:Za,useValue:()=>Ne(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=t;Nh(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Nh(t,e){for(let n of t)P_(n)&&(n=n.\u0275providers),Array.isArray(n)?Nh(n,e):e(n)}var a0=ge({provide:String,useValue:ge});function Y_(t){return t!==null&&typeof t=="object"&&a0 in t}function c0(t){return!!(t&&t.useExisting)}function u0(t){return!!(t&&t.useFactory)}function vi(t){return typeof t=="function"}function l0(t){return!!t.useClass}var J_=new te(""),qa={},d0={},vd;function Rh(){return vd===void 0&&(vd=new Xa),vd}var Hn=class{},Us=class extends Hn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vd(e,o=>this.processProvider(o)),this.records.set(L_,li(void 0,this)),i.has("environment")&&this.records.set(Hn,li(void 0,this));let s=this.records.get(J_);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(V_,ut,X.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Vn(this),r=ct(void 0),i;try{return e()}finally{Vn(n),ct(r)}}get(e,n=Fs,r=X.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qv))return e[qv](this);r=Tc(r);let i,s=Vn(this),o=ct(void 0);try{if(!(r&X.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=m0(e)&&Dc(e);l&&this.injectableDefInScope(l)?u=li(Ld(e),qa):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&X.Self?Rh():this.parent;return n=r&X.Optional&&n===Fs?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Ya]=c[Ya]||[]).unshift(nt(e)),s)throw c;return UA(c,e,"R3InjectorError",this.source)}else throw c}finally{ct(o),Vn(s)}}resolveInjectorInitializers(){let e=oe(null),n=Vn(this),r=ct(void 0),i;try{let s=this.get(Za,ut,X.Self);for(let o of s)o()}finally{Vn(n),ct(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(e){e=tt(e);let n=vi(e)?e:tt(e&&e.provide),r=f0(e);if(!vi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=li(void 0,qa,!0),i.factory=()=>kd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===qa&&(n.value=d0,n.value=n.factory()),typeof n.value=="object"&&n.value&&g0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ld(t){let e=Dc(t),n=e!==null?e.factory:wr(t);if(n!==null)return n;if(t instanceof te)throw new ie(204,!1);if(t instanceof Function)return h0(t);throw new ie(204,!1)}function h0(t){if(t.length>0)throw new ie(204,!1);let n=TA(t);return n!==null?()=>n.factory(t):()=>new t}function f0(t){if(Y_(t))return li(void 0,t.useValue);{let e=Z_(t);return li(e,qa)}}function Z_(t,e,n){let r;if(vi(t)){let i=tt(t);return wr(i)||Ld(i)}else if(Y_(t))r=()=>tt(t.useValue);else if(u0(t))r=()=>t.useFactory(...kd(t.deps||[]));else if(c0(t))r=()=>Ne(tt(t.useExisting));else{let i=tt(t&&(t.useClass||t.provide));if(p0(t))r=()=>new i(...kd(t.deps));else return wr(i)||Ld(i)}return r}function li(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function p0(t){return!!t.deps}function g0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function m0(t){return typeof t=="function"||typeof t=="object"&&t instanceof te}function Vd(t,e){for(let n of t)Array.isArray(n)?Vd(n,e):n&&P_(n)?Vd(n.\u0275providers,e):e(n)}function PH(t,e){t instanceof Us&&t.assertNotDestroyed();let n,r=Vn(t),i=ct(void 0);try{return e()}finally{Vn(r),ct(i)}}function X_(){return M_()!==void 0||FA()!=null}function y0(t){if(!X_())throw new ie(-203,!1)}function v0(t){return typeof t=="function"}var hn=0,J=1,$=2,rt=3,Mt=4,Ot=5,ec=6,tc=7,kt=8,_i=9,Gt=10,xe=11,js=12,Yv=13,Ni=14,Wt=15,Ii=16,di=17,wi=18,bc=19,eI=20,Un=21,_d=22,Et=23,Tt=25,tI=1;var Er=7,nc=8,rc=9,Dt=10,ic=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ic||{});function jn(t){return Array.isArray(t)&&typeof t[tI]=="object"}function fn(t){return Array.isArray(t)&&t[tI]===!0}function nI(t){return(t.flags&4)!==0}function Cc(t){return t.componentOffset>-1}function xh(t){return(t.flags&1)===1}function qn(t){return!!t.template}function Ud(t){return(t[$]&512)!==0}var jd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function rI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function iI(){return sI}function sI(t){return t.type.prototype.ngOnChanges&&(t.setInput=I0),_0}iI.ngInherit=!0;function _0(){let t=aI(this),e=t?.current;if(e){let n=t.previous;if(n===yi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function I0(t,e,n,r,i){let s=this.declaredInputs[r],o=aI(t)||w0(t,{previous:yi,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new jd(l&&l.currentValue,n,u===yi),rI(t,e,i,n)}var oI="__ngSimpleChanges__";function aI(t){return t[oI]||null}function w0(t,e){return t[oI]=e}var Jv=null;var Ht=function(t,e,n){Jv?.(t,e,n)},cI="svg",E0="math";function Kt(t){for(;Array.isArray(t);)t=t[hn];return t}function uI(t,e){return Kt(e[t])}function bt(t,e){return Kt(e[t.index])}function lI(t,e){return t.data[e]}function Ph(t,e){return t[e]}function Gn(t,e){let n=e[t];return jn(n)?n:n[hn]}function Mh(t){return(t[$]&128)===128}function D0(t){return fn(t[rt])}function sc(t,e){return e==null?null:t[e]}function dI(t){t[di]=0}function hI(t){t[$]&1024||(t[$]|=1024,Mh(t)&&Sc(t))}function T0(t,e){for(;t>0;)e=e[Ni],t--;return e}function Ac(t){return!!(t[$]&9216||t[Et]?.dirty)}function Bd(t){t[Gt].changeDetectionScheduler?.notify(8),t[$]&64&&(t[$]|=1024),Ac(t)&&Sc(t)}function Sc(t){t[Gt].changeDetectionScheduler?.notify(0);let e=Dr(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Mh(e)));)e=Dr(e)}function fI(t,e){if((t[$]&256)===256)throw new ie(911,!1);t[Un]===null&&(t[Un]=[]),t[Un].push(e)}function b0(t,e){if(t[Un]===null)return;let n=t[Un].indexOf(e);n!==-1&&t[Un].splice(n,1)}function Dr(t){let e=t[rt];return fn(e)?e[rt]:e}var Q={lFrame:DI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pI=!1;function C0(){return Q.lFrame.elementDepthCount}function A0(){Q.lFrame.elementDepthCount++}function S0(){Q.lFrame.elementDepthCount--}function gI(){return Q.bindingsEnabled}function N0(){return Q.skipHydrationRootTNode!==null}function R0(t){return Q.skipHydrationRootTNode===t}function x0(){Q.skipHydrationRootTNode=null}function de(){return Q.lFrame.lView}function it(){return Q.lFrame.tView}function MH(t){return Q.lFrame.contextLView=t,t[kt]}function kH(t){return Q.lFrame.contextLView=null,t}function st(){let t=mI();for(;t!==null&&t.type===64;)t=t.parent;return t}function mI(){return Q.lFrame.currentTNode}function P0(){let t=Q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function zs(t,e){let n=Q.lFrame;n.currentTNode=t,n.isParent=e}function yI(){return Q.lFrame.isParent}function M0(){Q.lFrame.isParent=!1}function k0(){return Q.lFrame.contextLView}function vI(){return pI}function Zv(t){pI=t}function _I(){let t=Q.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function O0(){return Q.lFrame.bindingIndex}function F0(t){return Q.lFrame.bindingIndex=t}function Nc(){return Q.lFrame.bindingIndex++}function kh(t){let e=Q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function L0(){return Q.lFrame.inI18n}function V0(t,e){let n=Q.lFrame;n.bindingIndex=n.bindingRootIndex=t,$d(e)}function U0(){return Q.lFrame.currentDirectiveIndex}function $d(t){Q.lFrame.currentDirectiveIndex=t}function j0(t){let e=Q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function II(t){Q.lFrame.currentQueryIndex=t}function B0(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Ot]:null}function wI(t,e,n){if(n&X.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&X.Host);)if(i=B0(s),i===null||(s=s[Ni],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=Q.lFrame=EI();return r.currentTNode=e,r.lView=t,!0}function Oh(t){let e=EI(),n=t[J];Q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function EI(){let t=Q.lFrame,e=t===null?null:t.child;return e===null?DI(t):e}function DI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function TI(){let t=Q.lFrame;return Q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var bI=TI;function Fh(){let t=TI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $0(t){return(Q.lFrame.contextLView=T0(t,Q.lFrame.contextLView))[kt]}function Wn(){return Q.lFrame.selectedIndex}function Tr(t){Q.lFrame.selectedIndex=t}function Lh(){let t=Q.lFrame;return lI(t.tView,t.selectedIndex)}function OH(){Q.lFrame.currentNamespace=cI}function FH(){H0()}function H0(){Q.lFrame.currentNamespace=null}function q0(){return Q.lFrame.currentNamespace}var CI=!0;function Vh(){return CI}function Uh(t){CI=t}function z0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=sI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function jh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function za(t,e,n){AI(t,e,3,n)}function Ga(t,e,n,r){(t[$]&3)===n&&AI(t,e,n,r)}function Id(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function AI(t,e,n,r){let i=r!==void 0?t[di]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[di]+=65536),(c<s||s==-1)&&(G0(t,n,e,u),t[di]=(t[di]&4294901760)+u+2),u++}function Xv(t,e){Ht(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),Ht(5,t,e)}}function G0(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[$]>>14<t[di]>>16&&(t[$]&3)===e&&(t[$]+=16384,Xv(c,s)):Xv(c,s)}var gi=-1,br=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function W0(t){return t instanceof br}function K0(t){return(t.flags&8)!==0}function Q0(t){return(t.flags&16)!==0}var wd={},Hd=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Tc(r);let i=this.injector.get(e,wd,r);return i!==wd||n===wd?i:this.parentInjector.get(e,n,r)}};function SI(t){return t!==gi}function oc(t){return t&32767}function Y0(t){return t>>16}function ac(t,e){let n=Y0(t),r=e;for(;n>0;)r=r[Ni],n--;return r}var qd=!0;function cc(t){let e=qd;return qd=t,e}var J0=256,NI=J0-1,RI=5,Z0=0,qt={};function X0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Os)&&(r=n[Os]),r==null&&(r=n[Os]=Z0++);let i=r&NI,s=1<<i;e.data[t+(i>>RI)]|=s}function uc(t,e){let n=xI(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,Ed(r.data,t),Ed(e,null),Ed(r.blueprint,null));let i=Bh(t,e),s=t.injectorIndex;if(SI(i)){let o=oc(i),c=ac(i,e),u=c[J].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function Ed(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Bh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=FI(i),r===null)return gi;if(n++,i=i[Ni],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return gi}function zd(t,e,n){X0(t,e,n)}function eS(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(j_(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function PI(t,e,n){if(n&X.Optional||t!==void 0)return t;Th(e,"NodeInjector")}function MI(t,e,n,r){if(n&X.Optional&&r===void 0&&(r=null),!(n&(X.Self|X.Host))){let i=t[_i],s=ct(void 0);try{return i?i.get(e,r,n&X.Optional):k_(e,r,n&X.Optional)}finally{ct(s)}}return PI(r,e,n)}function kI(t,e,n,r=X.Default,i){if(t!==null){if(e[$]&2048&&!(r&X.Self)){let o=sS(t,e,n,r,qt);if(o!==qt)return o}let s=OI(t,e,n,r,qt);if(s!==qt)return s}return MI(e,n,r,i)}function OI(t,e,n,r,i){let s=rS(n);if(typeof s=="function"){if(!wI(e,t,r))return r&X.Host?PI(i,n,r):MI(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&X.Optional))Th(n);else return o}finally{bI()}}else if(typeof s=="number"){let o=null,c=xI(t,e),u=gi,l=r&X.Host?e[Wt][Ot]:null;for((c===-1||r&X.SkipSelf)&&(u=c===-1?Bh(t,e):e[c+8],u===gi||!t_(r,!1)?c=-1:(o=e[J],c=oc(u),e=ac(u,e)));c!==-1;){let h=e[J];if(e_(s,c,h.data)){let p=tS(c,e,n,o,r,l);if(p!==qt)return p}u=e[c+8],u!==gi&&t_(r,e[J].data[c+8]===l)&&e_(s,c,e)?(o=h,c=oc(u),e=ac(u,e)):c=-1}}return i}function tS(t,e,n,r,i,s){let o=e[J],c=o.data[t+8],u=r==null?Cc(c)&&qd:r!=o&&(c.type&3)!==0,l=i&X.Host&&s===c,h=nS(c,o,n,u,l);return h!==null?Ei(e,o,h,c):qt}function nS(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=o[u];if(y&&qn(y)&&y.type===n)return u}return null}function Ei(t,e,n,r){let i=t[n],s=e.data;if(W0(i)){let o=i;o.resolving&&xA(RA(s[n]));let c=cc(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?ct(o.injectImpl):null,h=wI(t,r,X.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&z0(n,s[n],e)}finally{l!==null&&ct(l),cc(c),o.resolving=!1,bI()}}return i}function rS(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Os)?t[Os]:void 0;return typeof e=="number"?e>=0?e&NI:iS:e}function e_(t,e,n){let r=1<<t;return!!(n[e+(t>>RI)]&r)}function t_(t,e){return!(t&X.Self)&&!(t&X.Host&&e)}var Ir=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return kI(this._tNode,this._lView,e,Tc(r),n)}};function iS(){return new Ir(st(),de())}function LH(t){return $s(()=>{let e=t.prototype.constructor,n=e[Qa]||Gd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Qa]||Gd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gd(t){return S_(t)?()=>{let e=Gd(tt(t));return e&&e()}:wr(t)}function sS(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let c=OI(s,o,n,r|X.Self,qt);if(c!==qt)return c;let u=s.parent;if(!u){let l=o[eI];if(l){let h=l.get(n,qt,r);if(h!==qt)return h}u=FI(o),o=o[Ni]}s=u}return i}function FI(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Ot]:null}function oS(t){return eS(st(),t)}function n_(t,e=null,n=null,r){let i=LI(t,e,n,r);return i.resolveInjectorInitializers(),i}function LI(t,e=null,n=null,r,i=new Set){let s=[n||ut,o0(t)];return r=r||(typeof t=="object"?void 0:nt(t)),new Us(s,e||Rh(),r||null,i)}var pt=class t{static{this.THROW_IF_NOT_FOUND=Fs}static{this.NULL=new Xa}static create(e,n){if(Array.isArray(e))return n_({name:""},n,e,"");{let r=e.name??"";return n_({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=fe({token:t,providedIn:"any",factory:()=>Ne(L_)})}static{this.__NG_ELEMENT_ID__=-1}};var aS=new te("");aS.__NG_ELEMENT_ID__=t=>{let e=st();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(t&X.Optional)return null;throw new ie(204,!1)};var cS="ngOriginalError";function Dd(t){return t[cS]}var VI=!0,$h=(()=>{class t{static{this.__NG_ELEMENT_ID__=uS}static{this.__NG_ENV_ID__=n=>n}}return t})(),Wd=class extends $h{constructor(e){super(),this._lView=e}onDestroy(e){return fI(this._lView,e),()=>b0(this._lView,e)}};function uS(){return new Wd(de())}var Rc=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xs(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Kd=class extends Ln{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,X_()&&(this.destroyRef=ee($h,{optional:!0})??void 0,this.pendingTasks=ee(Rc,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},zt=Kd;function lc(...t){}function UI(t){let e,n;function r(){t=lc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function r_(t){return queueMicrotask(()=>t()),()=>{t=lc}}var Hh="isAngularZone",dc=Hh+"_ID",lS=0,be=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zt(!1),this.onMicrotaskEmpty=new zt(!1),this.onStable=new zt(!1),this.onError=new zt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=VI}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,fS(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Hh)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ie(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dS,lc,lc);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dS={};function qh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hS(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){UI(()=>{t.callbackScheduled=!1,Qd(t),t.isCheckStableRunning=!0,qh(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Qd(t)}function fS(t){let e=()=>{hS(t)},n=lS++;t._inner=t._inner.fork({name:"angular",properties:{[Hh]:!0,[dc]:n,[dc+n]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(pS(u))return r.invokeTask(s,o,c,u);try{return i_(t),r.invokeTask(s,o,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),s_(t)}},onInvoke:(r,i,s,o,c,u,l)=>{try{return i_(t),r.invoke(s,o,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gS(u)&&e(),s_(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Qd(t),qh(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Qd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function i_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function s_(t){t._nesting--,qh(t)}var Yd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zt,this.onMicrotaskEmpty=new zt,this.onStable=new zt,this.onError=new zt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pS(t){return jI(t,"__ignore_ng_zone__")}function gS(t){return jI(t,"__scheduler_tick__")}function jI(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Di=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Dd(e);for(;n&&Dd(n);)n=Dd(n);return n||null}},mS=new te("",{providedIn:"root",factory:()=>{let t=ee(be),e=ee(Di);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function yS(){return xc(st(),de())}function xc(t,e){return new zh(bt(t,e))}var zh=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=yS}}return t})();function BI(t){return(t.flags&128)===128}var $I=new Map,vS=0;function _S(){return vS++}function IS(t){$I.set(t[bc],t)}function Jd(t){$I.delete(t[bc])}var o_="__ngContext__";function Cr(t,e){jn(e)?(t[o_]=e[bc],IS(e)):t[o_]=e}function HI(t){return zI(t[js])}function qI(t){return zI(t[Mt])}function zI(t){for(;t!==null&&!fn(t);)t=t[Mt];return t}var Zd;function VH(t){Zd=t}function wS(){if(Zd!==void 0)return Zd;if(typeof document<"u")return document;throw new ie(210,!1)}var UH=new te("",{providedIn:"root",factory:()=>ES}),ES="ng",DS=new te(""),Gs=new te("",{providedIn:"platform",factory:()=>"unknown"});var jH=new te("",{providedIn:"root",factory:()=>wS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TS="h",bS="b";var CS=()=>null;function Gh(t,e,n=!1){return CS(t,e,n)}var GI=!1,AS=new te("",{providedIn:"root",factory:()=>GI});var ja;function SS(){if(ja===void 0&&(ja=null,ui.trustedTypes))try{ja=ui.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ja}function a_(t){return SS()?.createScriptURL(t)||t}var hc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${T_})`}};function Ws(t){return t instanceof hc?t.changingThisBreaksApplicationSecurity:t}function WI(t,e){let n=NS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${T_})`)}return n===e}function NS(t){return t instanceof hc&&t.getTypeName()||null}var RS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xS(t){return t=String(t),t.match(RS)?t:"unsafe:"+t}var Wh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Wh||{});function PS(t){let e=KI();return e?e.sanitize(Wh.URL,t)||"":WI(t,"URL")?Ws(t):xS(mi(t))}function MS(t){let e=KI();if(e)return a_(e.sanitize(Wh.RESOURCE_URL,t)||"");if(WI(t,"ResourceURL"))return a_(Ws(t));throw new ie(904,!1)}function kS(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?MS:PS}function BH(t,e,n){return kS(e,n)(t)}function KI(){let t=de();return t&&t[Gt].sanitizer}function QI(t){return t instanceof Function?t():t}function OS(t){return(t??ee(pt)).get(Gs)==="browser"}var fc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fc||{}),FS;function Kh(t,e){return FS(t,e)}function hi(t,e,n,r,i){if(r!=null){let s,o=!1;fn(r)?s=r:jn(r)&&(o=!0,r=r[hn]);let c=Kt(r);t===0&&n!==null?i==null?ew(e,n,c):pc(e,n,c,i||null,!0):t===1&&n!==null?pc(e,n,c,i||null,!0):t===2?JS(e,c,o):t===3&&e.destroyNode(c),s!=null&&XS(e,t,s,n,i)}}function LS(t,e){return t.createText(e)}function VS(t,e,n){t.setValue(e,n)}function YI(t,e,n){return t.createElement(e,n)}function US(t,e){JI(t,e),e[hn]=null,e[Ot]=null}function jS(t,e,n,r,i,s){r[hn]=i,r[Ot]=e,Pc(t,r,n,1,i,s)}function JI(t,e){e[Gt].changeDetectionScheduler?.notify(9),Pc(t,e,e[xe],2,null,null)}function BS(t){let e=t[js];if(!e)return Td(t[J],t);for(;e;){let n=null;if(jn(e))n=e[js];else{let r=e[Dt];r&&(n=r)}if(!n){for(;e&&!e[Mt]&&e!==t;)jn(e)&&Td(e[J],e),e=e[rt];e===null&&(e=t),jn(e)&&Td(e[J],e),n=e&&e[Mt]}e=n}}function $S(t,e,n,r){let i=Dt+r,s=n.length;r>0&&(n[i-1][Mt]=e),r<s-Dt?(e[Mt]=n[i],F_(n,Dt+r,e)):(n.push(e),e[Mt]=null),e[rt]=n;let o=e[Ii];o!==null&&n!==o&&ZI(o,e);let c=e[wi];c!==null&&c.insertView(t),Bd(e),e[$]|=128}function ZI(t,e){let n=t[rc],r=e[rt];if(jn(r))t[$]|=ic.HasTransplantedViews;else{let i=r[rt][Wt];e[Wt]!==i&&(t[$]|=ic.HasTransplantedViews)}n===null?t[rc]=[e]:n.push(e)}function Qh(t,e){let n=t[rc],r=n.indexOf(e);n.splice(r,1)}function Xd(t,e){if(t.length<=Dt)return;let n=Dt+e,r=t[n];if(r){let i=r[Ii];i!==null&&i!==t&&Qh(i,r),e>0&&(t[n-1][Mt]=r[Mt]);let s=Ja(t,Dt+e);US(r[J],r);let o=s[wi];o!==null&&o.detachView(s[J]),r[rt]=null,r[Mt]=null,r[$]&=-129}return r}function XI(t,e){if(!(e[$]&256)){let n=e[xe];n.destroyNode&&Pc(t,e,n,3,null,null),BS(e)}}function Td(t,e){if(e[$]&256)return;let n=oe(null);try{e[$]&=-129,e[$]|=256,e[Et]&&pd(e[Et]),qS(t,e),HS(t,e),e[J].type===1&&e[xe].destroy();let r=e[Ii];if(r!==null&&fn(e[rt])){r!==e[rt]&&Qh(r,e);let i=e[wi];i!==null&&i.detachView(t)}Jd(e)}finally{oe(n)}}function HS(t,e){let n=t.cleanup,r=e[tc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[tc]=null);let i=e[Un];if(i!==null){e[Un]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function qS(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof br)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];Ht(4,c,u);try{u.call(c)}finally{Ht(5,c,u)}}else{Ht(4,i,s);try{s.call(i)}finally{Ht(5,i,s)}}}}}function zS(t,e,n){return GS(t,e.parent,n)}function GS(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[hn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ls.None||s===Ls.Emulated)return null}return bt(r,n)}}function pc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ew(t,e,n){t.appendChild(e,n)}function c_(t,e,n,r,i){r!==null?pc(t,e,n,r,i):ew(t,e,n)}function tw(t,e){return t.parentNode(e)}function WS(t,e){return t.nextSibling(e)}function KS(t,e,n){return YS(t,e,n)}function QS(t,e,n){return t.type&40?bt(t,n):null}var YS=QS,u_;function Yh(t,e,n,r){let i=zS(t,r,e),s=e[xe],o=r.parent||e[Ot],c=KS(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)c_(s,i,n[u],c,!1);else c_(s,i,n,c,!1);u_!==void 0&&u_(s,r,e,n,i)}function ks(t,e){if(e!==null){let n=e.type;if(n&3)return bt(e,t);if(n&4)return eh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ks(t,r);{let i=t[e.index];return fn(i)?eh(-1,i):Kt(i)}}else{if(n&128)return ks(t,e.next);if(n&32)return Kh(e,t)()||Kt(t[e.index]);{let r=nw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Dr(t[Wt]);return ks(i,r)}else return ks(t,e.next)}}}return null}function nw(t,e){if(e!==null){let r=t[Wt][Ot],i=e.projection;return r.projection[i]}return null}function eh(t,e){let n=Dt+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return ks(r,i)}return e[Er]}function JS(t,e,n){t.removeChild(null,e,n)}function Jh(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(o&&e===0&&(c&&Cr(Kt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Jh(t,e,n.child,r,i,s,!1),hi(e,t,i,c,s);else if(u&32){let l=Kh(n,r),h;for(;h=l();)hi(e,t,i,h,s);hi(e,t,i,c,s)}else u&16?ZS(t,e,r,n,i,s):hi(e,t,i,c,s);n=o?n.projectionNext:n.next}}function Pc(t,e,n,r,i,s){Jh(n,r,t.firstChild,e,i,s,!1)}function ZS(t,e,n,r,i,s){let o=n[Wt],u=o[Ot].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];hi(e,t,i,h,s)}else{let l=u,h=o[rt];BI(r)&&(l.flags|=128),Jh(t,e,l,h,i,s,!0)}}function XS(t,e,n,r,i){let s=n[Er],o=Kt(n);s!==o&&hi(e,t,r,s,i);for(let c=Dt;c<n.length;c++){let u=n[c];Pc(u[J],u,t,e,r,s)}}function eN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:fc.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=fc.Important),t.setStyle(n,r,i,s))}}function tN(t,e,n){t.setAttribute(e,"style",n)}function rw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function iw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Od(t,e,r),i!==null&&rw(t,e,i),s!==null&&tN(t,e,s)}var Ft={};function $H(t=1){sw(it(),de(),Wn()+t,!1)}function sw(t,e,n,r){if(!r)if((e[$]&3)===3){let s=t.preOrderCheckHooks;s!==null&&za(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ga(e,s,0,n)}Tr(n)}function ot(t,e=X.Default){let n=de();if(n===null)return Ne(t,e);let r=st();return kI(r,n,tt(t),e)}function HH(){let t="invalid";throw new Error(t)}function ow(t,e,n,r,i,s){let o=oe(null);try{let c=null;i&Bn.SignalBased&&(c=e[r][ln]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&Bn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):rI(e,c,r,s)}finally{oe(o)}}function nN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Tr(~i);else{let s=i,o=n[++r],c=n[++r];V0(o,s);let u=e[s];c(2,u)}}}finally{Tr(-1)}}function Mc(t,e,n,r,i,s,o,c,u,l,h){let p=e.blueprint.slice();return p[hn]=i,p[$]=r|4|128|8|64,(l!==null||t&&t[$]&2048)&&(p[$]|=2048),dI(p),p[rt]=p[Ni]=t,p[kt]=n,p[Gt]=o||t&&t[Gt],p[xe]=c||t&&t[xe],p[_i]=u||t&&t[_i]||null,p[Ot]=s,p[bc]=_S(),p[ec]=h,p[eI]=l,p[Wt]=e.type==2?t[Wt]:p,p}function kc(t,e,n,r,i){let s=t.data[e];if(s===null)s=rN(t,e,n,r,i),L0()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=P0();s.injectorIndex=o===null?-1:o.injectorIndex}return zs(s,!0),s}function rN(t,e,n,r,i){let s=mI(),o=yI(),c=o?s:s&&s.parent,u=t.data[e]=cN(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function aw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cw(t,e,n,r,i){let s=Wn(),o=r&2;try{Tr(-1),o&&e.length>Tt&&sw(t,e,Tt,!1),Ht(o?2:0,i),n(r,i)}finally{Tr(s),Ht(o?3:1,i)}}function uw(t,e,n){if(nI(e)){let r=oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{oe(r)}}}function lw(t,e,n){gI()&&(pN(t,e,n,bt(n,e)),(n.flags&64)===64&&mw(t,e,n))}function dw(t,e,n=bt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function hw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Zh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Zh(t,e,n,r,i,s,o,c,u,l,h){let p=Tt+r,m=p+i,y=iN(p,m),C=typeof l=="function"?l():l;return y[J]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function iN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ft);return n}function sN(t,e,n,r){let s=r.get(AS,GI)||n===Ls.ShadowDom,o=t.selectRootElement(e,s);return oN(o),o}function oN(t){aN(t)}var aN=()=>null;function cN(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return N0()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function l_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=Bn.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?d_(r,n,l,c,u):d_(r,n,l,c)}return r}function d_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function uN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,C=m?m.outputs:null;u=l_(0,p.inputs,h,u,y),l=l_(1,p.outputs,h,l,C);let x=u!==null&&o!==null&&!Ah(e)?bN(u,h,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function lN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function fw(t,e,n,r,i,s,o,c){let u=bt(e,n),l=e.inputs,h;!c&&l!=null&&(h=l[r])?(Xh(t,n,h,r,i),Cc(e)&&dN(n,e.index)):e.type&3?(r=lN(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function dN(t,e){let n=Gn(e,t);n[$]&16||(n[$]|=64)}function pw(t,e,n,r){if(gI()){let i=r===null?null:{"":-1},s=mN(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&gw(t,e,n,o,i,c),i&&yN(n,r,i)}n.mergedAttrs=Vs(n.mergedAttrs,n.attrs)}function gw(t,e,n,r,i,s){for(let l=0;l<r.length;l++)zd(uc(n,e),t,r[l].type);_N(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,c=!1,u=aw(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Vs(n.mergedAttrs,h.hostAttrs),IN(t,n,e,u,h),vN(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}uN(t,n,s)}function hN(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;fN(o)!=c&&o.push(c),o.push(n,r,s)}}function fN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pN(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Cc(n)&&wN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||uc(n,e),Cr(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],l=Ei(e,t,c,n);if(Cr(l,e),o!==null&&TN(e,c-i,l,u,n,o),qn(u)){let h=Gn(n.index,e);h[kt]=Ei(e,t,c,n)}}}function mw(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=U0();try{Tr(s);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];$d(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&gN(u,l)}}finally{Tr(-1),$d(o)}}function gN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(YA(e,o.selectors,!1))if(r||(r=[]),qn(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;th(t,e,u)}else r.unshift(o),th(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function th(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function yN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new ie(-301,!1);r.push(e[i],s)}}}function vN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qn(e)&&(n[""]=t)}}function _N(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function IN(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=wr(i.type,!0)),o=new br(s,qn(i),ot);t.blueprint[r]=o,n[r]=o,hN(t,e,r,aw(t,n,i.hostVars,Ft),i)}function wN(t,e,n){let r=bt(e,t),i=hw(n),s=t[Gt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Oc(t,Mc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function EN(t,e,n,r,i,s){let o=bt(t,e);DN(e[xe],o,s,t.value,n,r,i)}function DN(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?mi(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function TN(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],l=o[c++],h=o[c++],p=o[c++];ow(r,n,u,l,h,p)}}function bN(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function yw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function vw(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];II(s),c.contentQueries(2,e[o],o)}}}finally{oe(r)}}}function Oc(t,e){return t[js]?t[Yv][Mt]=e:t[js]=e,t[Yv]=e,e}function nh(t,e,n){II(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function CN(t){return t[tc]??=[]}function AN(t){return t.cleanup??=[]}function _w(t,e){let n=t[_i],r=n?n.get(Di,null):null;r&&r.handleError(e)}function Xh(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],l=e[o],h=t.data[o];ow(h,l,r,c,u,i)}}function Iw(t,e,n){let r=uI(e,t);VS(t[xe],r,n)}function SN(t,e){let n=Gn(e,t),r=n[J];NN(r,n);let i=n[hn];i!==null&&n[ec]===null&&(n[ec]=Gh(i,n[_i])),ef(r,n,n[kt])}function NN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ef(t,e,n){Oh(e);try{let r=t.viewQuery;r!==null&&nh(1,r,n);let i=t.template;i!==null&&cw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[wi]?.finishViewCreation(t),t.staticContentQueries&&vw(t,e),t.staticViewQueries&&nh(2,t.viewQuery,n);let s=t.components;s!==null&&RN(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Fh()}}function RN(t,e){for(let n=0;n<e.length;n++)SN(t,e[n])}function xN(t,e,n,r){let i=oe(null);try{let s=e.tView,c=t[$]&4096?4096:16,u=Mc(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ii]=l;let h=t[wi];return h!==null&&(u[wi]=h.createEmbeddedView(s)),ef(s,u,n),u}finally{oe(i)}}function h_(t,e){return!e||e.firstChild===null||BI(t)}function PN(t,e,n,r=!0){let i=e[J];if($S(i,e,t,n),r){let o=eh(n,t),c=e[xe],u=tw(c,t[Er]);u!==null&&jS(i,t[Ot],c,e,u,o)}let s=e[ec];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function gc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Kt(s)),fn(s)&&MN(s,r);let o=n.type;if(o&8)gc(t,e,n.child,r);else if(o&32){let c=Kh(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=nw(e,n);if(Array.isArray(c))r.push(...c);else{let u=Dr(e[Wt]);gc(u[J],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function MN(t,e){for(let n=Dt;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&gc(r[J],r,i,e)}t[Er]!==t[hn]&&e.push(t[Er])}var ww=[];function kN(t){return t[Et]??ON(t)}function ON(t){let e=ww.pop()??Object.create(LN);return e.lView=t,e}function FN(t){t.lView[Et]!==t&&(t.lView=null,ww.push(t))}var LN=We(Ue({},Ms),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Sc(t.lView)},consumerOnSignalRead(){this.lView[Et]=this}});function VN(t){let e=t[Et]??Object.create(UN);return e.lView=t,e}var UN=We(Ue({},Ms),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Dr(t.lView);for(;e&&!Ew(e[J]);)e=Dr(e);e&&hI(e)},consumerOnSignalRead(){this.lView[Et]=this}});function Ew(t){return t.type!==2}var jN=100;function Dw(t,e=!0,n=0){let r=t[Gt],i=r.rendererFactory,s=!1;s||i.begin?.();try{BN(t,n)}catch(o){throw e&&_w(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function BN(t,e){let n=vI();try{Zv(!0),rh(t,e);let r=0;for(;Ac(t);){if(r===jN)throw new ie(103,!1);r++,rh(t,1)}}finally{Zv(n)}}function $N(t,e,n,r){let i=e[$];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Gt].inlineEffectRunner?.flush(),Oh(e);let c=!0,u=null,l=null;s||(Ew(t)?(l=kN(e),u=ka(l)):Av()===null?(c=!1,l=VN(e),u=ka(l)):e[Et]&&(pd(e[Et]),e[Et]=null));try{dI(e),F0(t.bindingStartIndex),n!==null&&cw(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&za(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ga(e,y,0,null),Id(e,0)}if(o||HN(e),Tw(e,0),t.contentQueries!==null&&vw(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&za(e,y)}else{let y=t.contentHooks;y!==null&&Ga(e,y,1),Id(e,1)}nN(t,e);let p=t.components;p!==null&&Cw(e,p,0);let m=t.viewQuery;if(m!==null&&nh(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&za(e,y)}else{let y=t.viewHooks;y!==null&&Ga(e,y,2),Id(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[_d]){for(let y of e[_d])y();e[_d]=null}s||(e[$]&=-73)}catch(h){throw s||Sc(e),h}finally{l!==null&&(hd(l,u),c&&FN(l)),Fh()}}function Tw(t,e){for(let n=HI(t);n!==null;n=qI(n))for(let r=Dt;r<n.length;r++){let i=n[r];bw(i,e)}}function HN(t){for(let e=HI(t);e!==null;e=qI(e)){if(!(e[$]&ic.HasTransplantedViews))continue;let n=e[rc];for(let r=0;r<n.length;r++){let i=n[r];hI(i)}}}function qN(t,e,n){let r=Gn(e,t);bw(r,n)}function bw(t,e){Mh(t)&&rh(t,e)}function rh(t,e){let r=t[J],i=t[$],s=t[Et],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&fd(s)),o||=!1,s&&(s.dirty=!1),t[$]&=-9217,o)$N(r,t,r.template,t[kt]);else if(i&8192){Tw(t,1);let c=r.components;c!==null&&Cw(t,c,1)}}function Cw(t,e,n){for(let r=0;r<e.length;r++)qN(t,e[r],n)}function tf(t,e){let n=vI()?64:1088;for(t[Gt].changeDetectionScheduler?.notify(e);t;){t[$]|=n;let r=Dr(t);if(Ud(t)&&!r)return t;t=r}return null}var Ar=class{get rootNodes(){let e=this._lView,n=e[J];return gc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kt]}set context(e){this._lView[kt]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rt];if(fn(e)){let n=e[nc],r=n?n.indexOf(this):-1;r>-1&&(Xd(e,r),Ja(n,r))}this._attachedToViewContainer=!1}XI(this._lView[J],this._lView)}onDestroy(e){fI(this._lView,e)}markForCheck(){tf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Bd(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,Dw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ud(this._lView),n=this._lView[Ii];n!==null&&!e&&Qh(n,this._lView),JI(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let n=Ud(this._lView),r=this._lView[Ii];r!==null&&!n&&ZI(r,this._lView),Bd(this._lView)}},Fc=(()=>{class t{static{this.__NG_ELEMENT_ID__=WN}}return t})(),zN=Fc,GN=class extends zN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=xN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ar(i)}};function WN(){return KN(st(),de())}function KN(t,e){return t.type&4?new GN(e,t,xc(t,e)):null}var zH=new RegExp(`^(\\d+)*(${bS}|${TS})*(.*)`);var QN=()=>null;function f_(t,e){return QN(t,e)}var Ti=class{},nf=new te("",{providedIn:"root",factory:()=>!1});var Aw=new te(""),Sw=new te(""),ih=class{},mc=class{};function YN(t){let e=Error(`No component factory found for ${nt(t)}.`);return e[JN]=t,e}var JN="ngComponent";var sh=class{resolveComponentFactory(e){throw YN(e)}},bi=class{static{this.NULL=new sh}},yc=class{},Nw=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>ZN()}}return t})();function ZN(){let t=de(),e=st(),n=Gn(e.index,t);return(jn(n)?n:t)[xe]}var XN=(()=>{class t{static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>null})}}return t})();function oh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=xd(i,c);else if(s==2){let u=c,l=e[++o];r=xd(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vc=class extends bi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=$n(e);return new Ci(n,this.ngModule)}};function p_(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:Bn.None;e?n.push({propName:o,templateName:r,isSignal:(c&Bn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function eR(t){let e=t.toLowerCase();return e==="svg"?cI:e==="math"?E0:null}var Ci=class extends mc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=p_(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return p_(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=e0(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=oe(null);try{i=i||this.ngModule;let o=i instanceof Hn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new Hd(e,o):e,u=c.get(yc,null);if(u===null)throw new ie(407,!1);let l=c.get(XN,null),h=c.get(Ti,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?sN(m,r,this.componentDef.encapsulation,c):YI(m,y,eR(y)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let R=null;C!==null&&(R=Gh(C,c,!0));let O=Zh(0,null,null,1,0,null,null,null,null,null,null),L=Mc(null,O,null,x,null,null,p,m,c,null,R);Oh(L);let U,K,ve=null;try{let q=this.componentDef,D,v=null;q.findHostDirectiveDefs?(D=[],v=new Map,q.findHostDirectiveDefs(q,D,v),D.push(q)):D=[q];let I=tR(L,C);ve=nR(I,C,q,D,L,p,m),K=lI(O,Tt),C&&sR(m,q,C,r),n!==void 0&&oR(K,this.ngContentSelectors,n),U=iR(ve,q,D,v,L,[aR]),ef(O,L,null)}catch(q){throw ve!==null&&Jd(ve),Jd(L),q}finally{Fh()}return new ah(this.componentType,U,xc(K,L),L,K)}finally{oe(s)}}},ah=class extends ih{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ar(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Xh(s[J],s,i,e,n),this.previousInputValues.set(e,n);let o=Gn(this._tNode.index,s);tf(o,1)}}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tR(t,e){let n=t[J],r=Tt;return t[r]=e,kc(n,r,2,"#host",null)}function nR(t,e,n,r,i,s,o){let c=i[J];rR(r,t,e,o);let u=null;e!==null&&(u=Gh(e,i[_i]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Mc(i,hw(n),null,h,i[t.index],t,s,l,null,null,u);return c.firstCreatePass&&th(c,t,r.length-1),Oc(i,p),i[t.index]=p}function rR(t,e,n,r){for(let i of t)e.mergedAttrs=Vs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(oh(e,e.mergedAttrs,!0),n!==null&&iw(r,n,e))}function iR(t,e,n,r,i,s){let o=st(),c=i[J],u=bt(o,i);gw(c,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Ei(i,c,p,o);Cr(m,i)}mw(c,i,o),u&&Cr(u,i);let l=Ei(i,c,o.directiveStart+o.componentOffset,o);if(t[kt]=i[kt]=l,s!==null)for(let h of s)h(l,e);return uw(c,o,i),l}function sR(t,e,n,r){if(r)Od(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=t0(e.selectors[0]);i&&Od(t,n,i),s&&s.length>0&&rw(t,n,s.join(" "))}}function oR(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function aR(){let t=st();jh(de()[J],t)}var Lc=(()=>{class t{static{this.__NG_ELEMENT_ID__=cR}}return t})();function cR(){let t=st();return lR(t,de())}var uR=Lc,Rw=class extends uR{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){let e=Bh(this._hostTNode,this._hostLView);if(SI(e)){let n=ac(e,this._hostLView),r=oc(e),i=n[J].data[r+8];return new Ir(i,n)}else return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=g_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=f_(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,h_(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!v0(e),c;if(o)c=n;else{let C=n||{};c=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new Ci($n(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?l:this.parentInjector).get(Hn,null);x&&(s=x)}let h=$n(u.componentType??{}),p=f_(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,c,h_(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(D0(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[rt],l=new Rw(u,u[Ot],u[rt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return PN(o,i,s,r),e.attachToViewContainerRef(),F_(bd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=g_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Xd(this._lContainer,n);r&&(Ja(bd(this._lContainer),n),XI(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=Xd(this._lContainer,n);return r&&Ja(bd(this._lContainer),n)!=null?new Ar(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function g_(t){return t[nc]}function bd(t){return t[nc]||(t[nc]=[])}function lR(t,e){let n,r=e[t.index];return fn(r)?n=r:(n=yw(r,e,null,t),e[t.index]=n,Oc(e,n)),hR(n,e,t,r),new Rw(n,t,e)}function dR(t,e){let n=t[xe],r=n.createComment(""),i=bt(e,t),s=tw(n,i);return pc(n,s,r,WS(n,i),!1),r}var hR=gR,fR=()=>!1;function pR(t,e,n){return fR(t,e,n)}function gR(t,e,n,r){if(t[Er])return;let i;n.type&8?i=Kt(r):i=dR(e,n),t[Er]=i}var m_=new Set;function Ri(t){m_.has(t)||(m_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function mR(t){return typeof t=="function"&&t[ln]!==void 0}function WH(t,e){Ri("NgSignals");let n=Vv(t),r=n[ln];return e?.equal&&(r.equal=e.equal),n.set=i=>gd(r,i),n.update=i=>Uv(r,i),n.asReadonly=yR.bind(n),n}function yR(){let t=this[ln];if(t.readonlyFn===void 0){let e=()=>this();e[ln]=t,t.readonlyFn=e}return t.readonlyFn}function xw(t){return mR(t)&&typeof t.set=="function"}function vR(t){return Object.getPrototypeOf(t.prototype).constructor}function _R(t){let e=vR(t.type),n=!0,r=[t];for(;e;){let i;if(qn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ba(t.inputs),o.inputTransforms=Ba(t.inputTransforms),o.declaredInputs=Ba(t.declaredInputs),o.outputs=Ba(t.outputs);let c=i.hostBindings;c&&TR(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&ER(t,u),l&&DR(t,l),IR(t,i),EA(t.outputs,i.outputs),qn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===_R&&(n=!1)}}e=Object.getPrototypeOf(e)}wR(r)}function IR(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function wR(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Vs(i.hostAttrs,n=Vs(n,i.hostAttrs))}}function Ba(t){return t===yi?{}:t===ut?[]:t}function ER(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function DR(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function TR(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function bR(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var zn=class{},ch=class{};var uh=class extends zn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vc(this);let s=z_(e);this._bootstrapComponents=QI(s.bootstrap),this._r3Injector=LI(e,n,[{provide:zn,useValue:this},{provide:bi,useValue:this.componentFactoryResolver},...r],nt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lh=class extends ch{constructor(e){super(),this.moduleType=e}create(e){return new uh(this.moduleType,e,[])}};var _c=class extends zn{constructor(e){super(),this.componentFactoryResolver=new vc(this),this.instance=null;let n=new Us([...e.providers,{provide:zn,useValue:this},{provide:bi,useValue:this.componentFactoryResolver}],e.parent||Rh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function CR(t,e,n=null){return new _c({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Pw(t){return SR(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function AR(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function SR(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Mw(t,e,n){return t[e]=n}function dn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function kw(t,e,n,r){let i=dn(t,e,n);return dn(t,e+1,r)||i}function NR(t){return(t.flags&32)===32}function RR(t,e,n,r,i,s,o,c,u){let l=e.consts,h=kc(e,t,4,o||null,c||null);pw(e,n,h,sc(l,u)),jh(e,h);let p=h.tView=Zh(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function xR(t,e,n,r,i,s,o,c,u,l){let h=n+Tt,p=e.firstCreatePass?RR(h,e,t,r,i,s,o,c,u):e.data[h];zs(p,!1);let m=MR(e,t,p,n);Vh()&&Yh(e,t,m,p),Cr(m,t);let y=yw(m,t,m,p);return t[h]=y,Oc(t,y),pR(y,p,t),xh(p)&&lw(e,t,p),u!=null&&dw(t,p,l),p}function PR(t,e,n,r,i,s,o,c){let u=de(),l=it(),h=sc(l.consts,s);return xR(u,l,t,e,n,r,i,h,o,c),PR}var MR=kR;function kR(t,e,n,r){return Uh(!0),e[xe].createComment("")}var fi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(fi||{}),Ow=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}}return t})(),dh=class t{constructor(){this.ngZone=ee(be),this.scheduler=ee(Ti),this.errorHandler=ee(Di,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[fi.EarlyRead,fi.Write,fi.MixedReadWrite,fi.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}},hh=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function OR(t,e){!e?.injector&&y0(OR);let n=e?.injector??ee(pt);return OS(n)?(Ri("NgAfterNextRender"),LR(t,n,e,!0)):VR}function FR(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function LR(t,e,n,r){let i=e.get(Ow);i.impl??=e.get(dh);let s=n?.phase??fi.MixedReadWrite,o=n?.manualCleanup!==!0?e.get($h):null,c=new hh(i.impl,FR(t,s),r,o);return i.impl.register(c),c}var VR={destroy(){}};function UR(t,e,n,r){let i=de(),s=Nc();if(dn(i,s,e)){let o=it(),c=Lh();EN(c,i,t,e,n,r)}return UR}function jR(t,e,n,r){return dn(t,Nc(),n)?e+mi(n)+r:Ft}function BR(t,e,n,r,i,s){let o=O0(),c=kw(t,o,n,i);return kh(2),c?e+mi(n)+r+mi(i)+s:Ft}function $a(t,e){return t<<17|e<<2}function Sr(t){return t>>17&32767}function $R(t){return(t&2)==2}function HR(t,e){return t&131071|e<<17}function fh(t){return t|2}function Ai(t){return(t&131068)>>2}function Cd(t,e){return t&-131069|e<<2}function qR(t){return(t&1)===1}function ph(t){return t|1}function zR(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Sr(o),u=Ai(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Hs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Sr(t[c+1]);t[r+1]=$a(m,c),m!==0&&(t[m+1]=Cd(t[m+1],r)),t[c+1]=HR(t[c+1],r)}else t[r+1]=$a(c,0),c!==0&&(t[c+1]=Cd(t[c+1],r)),c=r;else t[r+1]=$a(u,0),c===0?c=r:t[u+1]=Cd(t[u+1],r),u=r;l&&(t[r+1]=fh(t[r+1])),y_(t,h,r,!0),y_(t,h,r,!1),GR(e,h,t,r,s),o=$a(c,u),s?e.classBindings=o:e.styleBindings=o}function GR(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Hs(s,e)>=0&&(n[r+1]=ph(n[r+1]))}function y_(t,e,n,r){let i=t[n+1],s=e===null,o=r?Sr(i):Ai(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],l=t[o+1];WR(u,e)&&(c=!0,t[o+1]=r?ph(l):fh(l)),o=r?Sr(l):Ai(l)}c&&(t[n+1]=r?fh(i):ph(i))}function WR(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Hs(t,e)>=0:!1}var Pt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KR(t){return t.substring(Pt.key,Pt.keyEnd)}function QR(t){return YR(t),Fw(t,Lw(t,0,Pt.textEnd))}function Fw(t,e){let n=Pt.textEnd;return n===e?-1:(e=Pt.keyEnd=JR(t,Pt.key=e,n),Lw(t,e,n))}function YR(t){Pt.key=0,Pt.keyEnd=0,Pt.value=0,Pt.valueEnd=0,Pt.textEnd=t.length}function Lw(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function JR(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function ZR(t,e,n){let r=de(),i=Nc();if(dn(r,i,e)){let s=it(),o=Lh();fw(s,o,r,t,e,r[xe],n,!1)}return ZR}function gh(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Xh(t,n,s[o],o,r)}function Vw(t,e,n){return Uw(t,e,n,!1),Vw}function XR(t,e){return Uw(t,e,null,!0),XR}function KH(t){tx(ax,ex,t,!0)}function ex(t,e){for(let n=QR(e);n>=0;n=Fw(e,n))Ch(t,KR(e),!0)}function Uw(t,e,n,r){let i=de(),s=it(),o=kh(2);if(s.firstUpdatePass&&Bw(s,t,o,r),e!==Ft&&dn(i,o,e)){let c=s.data[Wn()];$w(s,c,i,i[xe],t,i[o+1]=ux(e,n),r,o)}}function tx(t,e,n,r){let i=it(),s=kh(2);i.firstUpdatePass&&Bw(i,null,s,r);let o=de();if(n!==Ft&&dn(o,s,n)){let c=i.data[Wn()];if(Hw(c,r)&&!jw(i,s)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=xd(u,n||"")),gh(i,c,o,n,r)}else cx(i,c,o,o[xe],o[s+1],o[s+1]=ox(t,e,n),r,s)}}function jw(t,e){return e>=t.expandoStartIndex}function Bw(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Wn()],o=jw(t,n);Hw(s,r)&&e===null&&!o&&(e=!1),e=nx(i,s,e,r),zR(i,s,e,n,o,r)}}function nx(t,e,n,r){let i=j0(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Ad(null,t,e,n,r),n=Bs(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Ad(i,t,e,n,r),s===null){let u=rx(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Ad(null,t,e,u[1],r),u=Bs(u,e.attrs,r),ix(t,e,r,u))}else s=sx(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function rx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ai(r)!==0)return t[Sr(r)]}function ix(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Sr(i)]=r}function sx(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Bs(r,o,n)}return Bs(r,e.attrs,n)}function Ad(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=Bs(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Bs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Ch(t,o,n?!0:e[++s]))}return t===void 0?null:t}function ox(t,e,n){if(n==null||n==="")return ut;let r=[],i=Ws(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function ax(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Ch(t,r,n)}function cx(t,e,n,r,i,s,o,c){i===Ft&&(i=ut);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<s.length?s[l+1]:void 0,C=null,x;h===p?(u+=2,l+=2,m!==y&&(C=p,x=y)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,x=y),C!==null&&$w(t,e,n,r,C,x,o,c),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function $w(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=qR(l)?v_(u,e,n,i,Ai(l),o):void 0;if(!Ic(h)){Ic(s)||$R(l)&&(s=v_(u,null,n,i,c,o));let p=uI(Wn(),n);eN(r,o,p,i,s)}}function v_(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Ft&&(m=p?ut:void 0);let y=p?yd(m,r):h===r?m:void 0;if(l&&!Ic(y)&&(y=yd(u,r)),Ic(y)&&(c=y,o))return c;let C=t[i+1];i=o?Sr(C):Ai(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=yd(u,r))}return c}function Ic(t){return t!==void 0}function ux(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=nt(Ws(t)))),t}function Hw(t,e){return(t.flags&(e?8:16))!==0}function lx(t,e,n,r,i,s){let o=e.consts,c=sc(o,i),u=kc(e,t,2,r,c);return pw(e,n,u,sc(o,s)),u.attrs!==null&&oh(u,u.attrs,!1),u.mergedAttrs!==null&&oh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function qw(t,e,n,r){let i=de(),s=it(),o=Tt+t,c=i[xe],u=s.firstCreatePass?lx(o,s,i,e,n,r):s.data[o],l=hx(s,i,u,c,e,t);i[o]=l;let h=xh(u);return zs(u,!0),iw(c,l,u),!NR(u)&&Vh()&&Yh(s,i,l,u),C0()===0&&Cr(l,i),A0(),h&&(lw(s,i,u),uw(s,u,i)),r!==null&&dw(i,u),qw}function zw(){let t=st();yI()?M0():(t=t.parent,zs(t,!1));let e=t;R0(e)&&x0(),S0();let n=it();return n.firstCreatePass&&(jh(n,t),nI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&K0(e)&&gh(n,e,de(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Q0(e)&&gh(n,e,de(),e.stylesWithoutHost,!1),zw}function dx(t,e,n,r){return qw(t,e,n,r),zw(),dx}var hx=(t,e,n,r,i,s)=>(Uh(!0),YI(r,i,q0()));function QH(){return de()}var _r=void 0;function fx(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var px=["en",[["a","p"],["AM","PM"],_r],[["AM","PM"],_r,_r],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_r,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_r,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_r,"{1} 'at' {0}",_r],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",fx],Sd={};function mt(t){let e=gx(t),n=__(e);if(n)return n;let r=e.split("-")[0];if(n=__(r),n)return n;if(r==="en")return px;throw new ie(701,!1)}function __(t){return t in Sd||(Sd[t]=ui.ng&&ui.ng.common&&ui.ng.common.locales&&ui.ng.common.locales[t]),Sd[t]}var Ce=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ce||{});function gx(t){return t.toLowerCase().replace(/_/g,"-")}var wc="en-US";var mx=wc;function yx(t){typeof t=="string"&&(mx=t.toLowerCase().replace(/_/g,"-"))}var vx=(t,e,n)=>{};function _x(t,e,n,r){let i=de(),s=it(),o=st();return Gw(s,i,i[xe],o,t,e,r),_x}function Ix(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[tc],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function Gw(t,e,n,r,i,s,o){let c=xh(r),l=t.firstCreatePass&&AN(t),h=e[kt],p=CN(e),m=!0;if(r.type&3||o){let x=bt(r,e),R=o?o(x):x,O=p.length,L=o?K=>o(Kt(K[r.index])):r.index,U=null;if(!o&&c&&(U=Ix(t,e,i,r.index)),U!==null){let K=U.__ngLastListenerFn__||U;K.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,m=!1}else{s=w_(r,e,h,s),vx(x,i,s);let K=n.listen(R,i,s);p.push(s,K),l&&l.push(i,L,O,O+1)}}else s=w_(r,e,h,s);let y=r.outputs,C;if(m&&y!==null&&(C=y[i])){let x=C.length;if(x)for(let R=0;R<x;R+=2){let O=C[R],L=C[R+1],ve=e[O][L].subscribe(s),q=p.length;p.push(s,ve),l&&l.push(i,r.index,q,-(q+1))}}}function I_(t,e,n,r){let i=oe(null);try{return Ht(6,e,n),n(r)!==!1}catch(s){return _w(t,s),!1}finally{Ht(7,e,n),oe(i)}}function w_(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Gn(t.index,e):e;tf(o,5);let c=I_(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=I_(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return c}}function YH(t=1){return $0(t)}function wx(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function JH(t){let e=k0();return Ph(e,Tt+t)}function ZH(t,e=""){let n=de(),r=it(),i=t+Tt,s=r.firstCreatePass?kc(r,i,1,e,null):r.data[i],o=Ex(r,n,s,e,t);n[i]=o,Vh()&&Yh(r,n,o,s),zs(s,!1)}var Ex=(t,e,n,r,i)=>(Uh(!0),LS(e[xe],r));function Dx(t){return Ww("",t,""),Dx}function Ww(t,e,n){let r=de(),i=jR(r,t,e,n);return i!==Ft&&Iw(r,Wn(),i),Ww}function Tx(t,e,n,r,i){let s=de(),o=BR(s,t,e,n,r,i);return o!==Ft&&Iw(s,Wn(),o),Tx}function bx(t,e,n){xw(e)&&(e=e());let r=de(),i=Nc();if(dn(r,i,e)){let s=it(),o=Lh();fw(s,o,r,t,e,r[xe],n,!1)}return bx}function XH(t,e){let n=xw(t);return n&&t.set(e),n}function Cx(t,e){let n=de(),r=it(),i=st();return Gw(r,n,n[xe],i,t,e),Cx}function Ax(t,e,n){let r=it();if(r.firstCreatePass){let i=qn(t);mh(n,r.data,r.blueprint,i,!0),mh(e,r.data,r.blueprint,i,!1)}}function mh(t,e,n,r,i){if(t=tt(t),Array.isArray(t))for(let s=0;s<t.length;s++)mh(t[s],e,n,r,i);else{let s=it(),o=de(),c=st(),u=vi(t)?t:tt(t.provide),l=Z_(t),h=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(vi(t)||!t.multi){let y=new br(l,i,ot),C=Rd(u,e,i?h:h+m,p);C===-1?(zd(uc(c,o),s,u),Nd(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{let y=Rd(u,e,h+m,p),C=Rd(u,e,h,h+m),x=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!x){zd(uc(c,o),s,u);let O=Rx(i?Nx:Sx,n.length,i,r,l);!i&&R&&(n[C].providerFactory=O),Nd(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=Kw(n[i?C:y],l,!i&&r);Nd(s,t,y>-1?y:C,O)}!i&&r&&R&&n[C].componentProviders++}}}function Nd(t,e,n,r){let i=vi(e),s=l0(e);if(i||s){let u=(s?tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function Kw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Rd(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Sx(t,e,n,r){return yh(this.multi,[])}function Nx(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=Ei(n,n[J],this.providerFactory.index,r);s=c.slice(0,o),yh(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],yh(i,s);return s}function yh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Rx(t,e,n,r,i){let s=new br(t,n,ot);return s.multi=[],s.index=e,s.componentProviders=0,Kw(s,i,r&&!n),s}function eq(t,e=[]){return n=>{n.providersResolver=(r,i)=>Ax(r,i?i(t):t,e)}}var xx=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=K_(!1,n.type),i=r.length>0?CR([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=fe({token:t,providedIn:"environment",factory:()=>new t(Ne(Hn))})}}return t})();function tq(t){Ri("NgStandalone"),t.getStandaloneInjector=e=>e.get(xx).getOrCreateStandaloneInjector(t)}function Qw(t,e){let n=t[e];return n===Ft?void 0:n}function Px(t,e,n,r,i,s){let o=e+n;return dn(t,o,i)?Mw(t,o+1,s?r.call(s,i):r(i)):Qw(t,o+1)}function Mx(t,e,n,r,i,s,o){let c=e+n;return kw(t,c,i,s)?Mw(t,c+2,o?r.call(o,i,s):r(i,s)):Qw(t,c+2)}function nq(t,e){let n=it(),r,i=t+Tt;n.firstCreatePass?(r=kx(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=wr(r.type,!0)),o,c=ct(ot);try{let u=cc(!1),l=s();return cc(u),wx(n,de(),i,l),l}finally{ct(c)}}function kx(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function rq(t,e,n){let r=t+Tt,i=de(),s=Ph(i,r);return Yw(i,r)?Px(i,_I(),e,s.transform,n,s):s.transform(n)}function iq(t,e,n,r){let i=t+Tt,s=de(),o=Ph(s,i);return Yw(s,i)?Mx(s,_I(),e,o.transform,n,r,o):o.transform(n,r)}function Yw(t,e){return t[J].data[e].pure}var Si=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Jw=new Si("18.2.13");var sq=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var Ox=new te("");function Vc(t){return!!t&&typeof t.then=="function"}function rf(t){return!!t&&typeof t.subscribe=="function"}var Fx=new te(""),Zw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ee(Fx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Vc(s))n.push(s);else if(rf(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Lx=new te("");function Vx(){Lv(()=>{throw new ie(600,!1)})}function Ux(t){return t.isBoundToModule}var jx=10;function Bx(t,e,n){try{let r=n();return Vc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Uc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ee(mS),this.afterRenderManager=ee(Ow),this.zonelessEnabled=ee(nf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ln,this.afterTick=new Ln,this.componentTypes=[],this.components=[],this.isStable=ee(Rc).hasPendingTasks.pipe(ft(n=>!n)),this._injector=ee(Hn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof mc;if(!this._injector.get(Zw).done){let m=!i&&i0(n),y=!1;throw new ie(405,y)}let o;i?o=n:o=this._injector.get(bi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let c=Ux(o)?void 0:this._injector.get(zn),u=r||o.selector,l=o.create(pt.NULL,[],u,c),h=l.location.nativeElement,p=l.injector.get(Ox,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Wa(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ie(101,!1);let n=oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,oe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(yc,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<jx;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)$x(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ac(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Wa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Lx,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Wa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ie(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Wa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $x(t,e,n,r){if(!n&&!Ac(t))return;Dw(t,e,n&&!r?0:1)}var vh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},oq=(()=>{class t{compileModuleSync(n){return new lh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=z_(n),s=QI(i.declarations).reduce((o,c)=>{let u=$n(c);return u&&o.push(new Ci(u)),o},[]);return new vh(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Hx=(()=>{class t{constructor(){this.zone=ee(be),this.changeDetectionScheduler=ee(Ti),this.applicationRef=ee(Uc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),qx=new te("",{factory:()=>!1});function Xw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new be(We(Ue({},eE()),{scheduleInRootZone:n})),[{provide:be,useFactory:t},{provide:Za,multi:!0,useFactory:()=>{let r=ee(Hx,{optional:!0});return()=>r.initialize()}},{provide:Za,multi:!0,useFactory:()=>{let r=ee(zx);return()=>{r.initialize()}}},e===!0?{provide:Aw,useValue:!0}:[],{provide:Sw,useValue:n??VI}]}function aq(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Xw({ngZoneFactory:()=>{let i=eE(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ri("NgZone_CoalesceEvent"),new be(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Nr([{provide:qx,useValue:!0},{provide:nf,useValue:!1},r])}function eE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var zx=(()=>{class t{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=ee(be),this.pendingTasks=ee(Rc)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Gx=(()=>{class t{constructor(){this.appRef=ee(Uc),this.taskService=ee(Rc),this.ngZone=ee(be),this.zonelessEnabled=ee(nf),this.disableScheduling=ee(Aw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Re,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ee(Sw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yd||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?r_:UI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,r_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Wx(){return typeof $localize<"u"&&$localize.locale||wc}var Ks=new te("",{providedIn:"root",factory:()=>ee(Ks,X.Optional|X.SkipSelf)||Wx()});var _h=new te("");function Ha(t){return!t.moduleRef}function Kx(t){let e=Ha(t)?t.r3Injector:t.moduleRef.injector,n=e.get(be);return n.run(()=>{Ha(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Di,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Ha(t)){let s=()=>e.destroy(),o=t.platformInjector.get(_h);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(_h);o.add(s),t.moduleRef.onDestroy(()=>{Wa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return Bx(r,n,()=>{let s=e.get(Zw);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Ks,wc);if(yx(o||wc),Ha(t)){let c=e.get(Uc);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return Qx(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Qx(t,e){let n=t.injector.get(Uc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new ie(-403,!1);e.push(t)}var Ka=null;function Yx(t=[],e){return pt.create({name:e,providers:[{provide:J_,useValue:"platform"},{provide:_h,useValue:new Set([()=>Ka=null])},...t]})}function Jx(t=[]){if(Ka)return Ka;let e=Yx(t);return Ka=e,Vx(),Zx(e),e}function Zx(t){t.get(DS,null)?.forEach(n=>n())}var sf=(()=>{class t{static{this.__NG_ELEMENT_ID__=Xx}}return t})();function Xx(t){return eP(st(),de(),(t&16)===16)}function eP(t,e,n){if(Cc(t)&&!n){let r=Gn(t.index,e);return new Ar(r,r)}else if(t.type&175){let r=e[Wt];return new Ar(r,e)}return null}var Ih=class{constructor(){}supports(e){return Pw(e)}create(e){return new wh(e)}},tP=(t,e)=>e,wh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||tP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<E_(r,i,s)?n:r,c=E_(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=c-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Pw(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,AR(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Eh(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ec),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ec),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Eh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Dh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ec=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Dh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function E_(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function D_(){return new of([new Ih])}var of=(()=>{class t{static{this.\u0275prov=fe({token:t,providedIn:"root",factory:D_})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||D_()),deps:[[t,new BA,new gt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new ie(901,!1)}}return t})();function cq(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Jx(r),s=[Xw({}),{provide:Ti,useExisting:Gx},...n||[]],o=new _c({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Kx({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function nP(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function uq(t,e){Ri("NgSignals");let n=kv(t);return e?.equal&&(n[ln].equal=e.equal),n}function af(t){let e=oe(null);try{return t()}finally{oe(e)}}function lq(t){let e=$n(t);if(!e)return null;let n=new Ci(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var uE=null;function uf(){return uE}function Mq(t){uE??=t}var tE=class{};var wf=new te(""),Ef=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:()=>ee(rP),providedIn:"platform"})}}return t})(),kq=new te(""),rP=(()=>{class t extends Ef{constructor(){super(),this._doc=ee(wf),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return uf().getBaseHref(this._doc)}onPopState(n){let r=uf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=uf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Df(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function nE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function gn(t){return t&&t[0]!=="?"?"?"+t:t}var Yc=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=fe({token:t,factory:()=>ee(iP),providedIn:"root"})}}return t})(),lE=new te(""),iP=(()=>{class t extends Yc{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ee(wf).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Df(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+gn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+gn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+gn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(Ef),Ne(lE,8))}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Oq=(()=>{class t extends Yc{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Df(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+gn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+gn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(Ef),Ne(lE,8))}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac})}}return t})(),sP=(()=>{class t{constructor(n){this._subject=new zt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=cP(nE(rE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+gn(r))}normalize(n){return t.stripTrailingSlash(aP(this._basePath,rE(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=gn}static{this.joinWithSlash=Df}static{this.stripTrailingSlash=nE}static{this.\u0275fac=function(r){return new(r||t)(Ne(Yc))}}static{this.\u0275prov=fe({token:t,factory:()=>oP(),providedIn:"root"})}}return t})();function oP(){return new sP(Ne(Yc))}function aP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function rE(t){return t.replace(/\/index.html$/,"")}function cP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var dE=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(dE||{});var at=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(at||{}),me=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(me||{}),yt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(yt||{}),vt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function uP(t){return mt(t)[Ce.LocaleId]}function lP(t,e,n){let r=mt(t),i=[r[Ce.DayPeriodsFormat],r[Ce.DayPeriodsStandalone]],s=Ct(i,e);return Ct(s,n)}function dP(t,e,n){let r=mt(t),i=[r[Ce.DaysFormat],r[Ce.DaysStandalone]],s=Ct(i,e);return Ct(s,n)}function hP(t,e,n){let r=mt(t),i=[r[Ce.MonthsFormat],r[Ce.MonthsStandalone]],s=Ct(i,e);return Ct(s,n)}function fP(t,e){let r=mt(t)[Ce.Eras];return Ct(r,e)}function jc(t,e){let n=mt(t);return Ct(n[Ce.DateFormat],e)}function Bc(t,e){let n=mt(t);return Ct(n[Ce.TimeFormat],e)}function $c(t,e){let r=mt(t)[Ce.DateTimeFormat];return Ct(r,e)}function mn(t,e){let n=mt(t),r=n[Ce.NumberSymbols][e];if(typeof r>"u"){if(e===vt.CurrencyDecimal)return n[Ce.NumberSymbols][vt.Decimal];if(e===vt.CurrencyGroup)return n[Ce.NumberSymbols][vt.Group]}return r}function pP(t,e){return mt(t)[Ce.NumberFormats][e]}function hE(t){if(!t[Ce.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ce.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gP(t){let e=mt(t);return hE(e),(e[Ce.ExtraData][2]||[]).map(r=>typeof r=="string"?lf(r):[lf(r[0]),lf(r[1])])}function mP(t,e,n){let r=mt(t);hE(r);let i=[r[Ce.ExtraData][0],r[Ce.ExtraData][1]],s=Ct(i,e)||[];return Ct(s,n)||[]}function Ct(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function lf(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var yP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hc={},vP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,yn=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(yn||{}),le=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(le||{}),ue=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ue||{});function _P(t,e,n,r){let i=SP(t);e=pn(n,e)||e;let o=[],c;for(;e;)if(c=vP.exec(e),c){o=o.concat(c.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let u=i.getTimezoneOffset();r&&(u=pE(r,u),i=AP(i,r,!0));let l="";return o.forEach(h=>{let p=bP(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Kc(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function pn(t,e){let n=uP(t);if(Hc[n]??={},Hc[n][e])return Hc[n][e];let r="";switch(e){case"shortDate":r=jc(t,yt.Short);break;case"mediumDate":r=jc(t,yt.Medium);break;case"longDate":r=jc(t,yt.Long);break;case"fullDate":r=jc(t,yt.Full);break;case"shortTime":r=Bc(t,yt.Short);break;case"mediumTime":r=Bc(t,yt.Medium);break;case"longTime":r=Bc(t,yt.Long);break;case"fullTime":r=Bc(t,yt.Full);break;case"short":let i=pn(t,"shortTime"),s=pn(t,"shortDate");r=qc($c(t,yt.Short),[i,s]);break;case"medium":let o=pn(t,"mediumTime"),c=pn(t,"mediumDate");r=qc($c(t,yt.Medium),[o,c]);break;case"long":let u=pn(t,"longTime"),l=pn(t,"longDate");r=qc($c(t,yt.Long),[u,l]);break;case"full":let h=pn(t,"fullTime"),p=pn(t,"fullDate");r=qc($c(t,yt.Full),[h,p]);break}return r&&(Hc[n][e]=r),r}function qc(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Lt(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function IP(t,e){return Lt(t,3).substring(0,e)}function Pe(t,e,n=0,r=!1,i=!1){return function(s,o){let c=wP(t,s);if((n>0||c>-n)&&(c+=n),t===le.Hours)c===0&&n===-12&&(c=12);else if(t===le.FractionalSeconds)return IP(c,e);let u=mn(o,vt.MinusSign);return Lt(c,e,u,r,i)}}function wP(t,e){switch(t){case le.FullYear:return e.getFullYear();case le.Month:return e.getMonth();case le.Date:return e.getDate();case le.Hours:return e.getHours();case le.Minutes:return e.getMinutes();case le.Seconds:return e.getSeconds();case le.FractionalSeconds:return e.getMilliseconds();case le.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function ye(t,e,n=at.Format,r=!1){return function(i,s){return EP(i,s,t,e,n,r)}}function EP(t,e,n,r,i,s){switch(n){case ue.Months:return hP(e,i,r)[t.getMonth()];case ue.Days:return dP(e,i,r)[t.getDay()];case ue.DayPeriods:let o=t.getHours(),c=t.getMinutes();if(s){let l=gP(e),h=mP(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,C]=m,x=o>=y.hours&&c>=y.minutes,R=o<C.hours||o===C.hours&&c<C.minutes;if(y.hours<C.hours){if(x&&R)return!0}else if(x||R)return!0}else if(m.hours===o&&m.minutes===c)return!0;return!1});if(p!==-1)return h[p]}return lP(e,i,r)[o<12?0:1];case ue.Eras:return fP(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function zc(t){return function(e,n,r){let i=-1*r,s=mn(n,vt.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case yn.Short:return(i>=0?"+":"")+Lt(o,2,s)+Lt(Math.abs(i%60),2,s);case yn.ShortGMT:return"GMT"+(i>=0?"+":"")+Lt(o,1,s);case yn.Long:return"GMT"+(i>=0?"+":"")+Lt(o,2,s)+":"+Lt(Math.abs(i%60),2,s);case yn.Extended:return r===0?"Z":(i>=0?"+":"")+Lt(o,2,s)+":"+Lt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var DP=0,Wc=4;function TP(t){let e=Kc(t,DP,1).getDay();return Kc(t,0,1+(e<=Wc?Wc:Wc+7)-e)}function fE(t){let e=t.getDay(),n=e===0?-3:Wc-e;return Kc(t.getFullYear(),t.getMonth(),t.getDate()+n)}function df(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=fE(n),o=TP(s.getFullYear()),c=s.getTime()-o.getTime();i=1+Math.round(c/6048e5)}return Lt(i,t,mn(r,vt.MinusSign))}}function Gc(t,e=!1){return function(n,r){let s=fE(n).getFullYear();return Lt(s,t,mn(r,vt.MinusSign),e)}}var hf={};function bP(t){if(hf[t])return hf[t];let e;switch(t){case"G":case"GG":case"GGG":e=ye(ue.Eras,me.Abbreviated);break;case"GGGG":e=ye(ue.Eras,me.Wide);break;case"GGGGG":e=ye(ue.Eras,me.Narrow);break;case"y":e=Pe(le.FullYear,1,0,!1,!0);break;case"yy":e=Pe(le.FullYear,2,0,!0,!0);break;case"yyy":e=Pe(le.FullYear,3,0,!1,!0);break;case"yyyy":e=Pe(le.FullYear,4,0,!1,!0);break;case"Y":e=Gc(1);break;case"YY":e=Gc(2,!0);break;case"YYY":e=Gc(3);break;case"YYYY":e=Gc(4);break;case"M":case"L":e=Pe(le.Month,1,1);break;case"MM":case"LL":e=Pe(le.Month,2,1);break;case"MMM":e=ye(ue.Months,me.Abbreviated);break;case"MMMM":e=ye(ue.Months,me.Wide);break;case"MMMMM":e=ye(ue.Months,me.Narrow);break;case"LLL":e=ye(ue.Months,me.Abbreviated,at.Standalone);break;case"LLLL":e=ye(ue.Months,me.Wide,at.Standalone);break;case"LLLLL":e=ye(ue.Months,me.Narrow,at.Standalone);break;case"w":e=df(1);break;case"ww":e=df(2);break;case"W":e=df(1,!0);break;case"d":e=Pe(le.Date,1);break;case"dd":e=Pe(le.Date,2);break;case"c":case"cc":e=Pe(le.Day,1);break;case"ccc":e=ye(ue.Days,me.Abbreviated,at.Standalone);break;case"cccc":e=ye(ue.Days,me.Wide,at.Standalone);break;case"ccccc":e=ye(ue.Days,me.Narrow,at.Standalone);break;case"cccccc":e=ye(ue.Days,me.Short,at.Standalone);break;case"E":case"EE":case"EEE":e=ye(ue.Days,me.Abbreviated);break;case"EEEE":e=ye(ue.Days,me.Wide);break;case"EEEEE":e=ye(ue.Days,me.Narrow);break;case"EEEEEE":e=ye(ue.Days,me.Short);break;case"a":case"aa":case"aaa":e=ye(ue.DayPeriods,me.Abbreviated);break;case"aaaa":e=ye(ue.DayPeriods,me.Wide);break;case"aaaaa":e=ye(ue.DayPeriods,me.Narrow);break;case"b":case"bb":case"bbb":e=ye(ue.DayPeriods,me.Abbreviated,at.Standalone,!0);break;case"bbbb":e=ye(ue.DayPeriods,me.Wide,at.Standalone,!0);break;case"bbbbb":e=ye(ue.DayPeriods,me.Narrow,at.Standalone,!0);break;case"B":case"BB":case"BBB":e=ye(ue.DayPeriods,me.Abbreviated,at.Format,!0);break;case"BBBB":e=ye(ue.DayPeriods,me.Wide,at.Format,!0);break;case"BBBBB":e=ye(ue.DayPeriods,me.Narrow,at.Format,!0);break;case"h":e=Pe(le.Hours,1,-12);break;case"hh":e=Pe(le.Hours,2,-12);break;case"H":e=Pe(le.Hours,1);break;case"HH":e=Pe(le.Hours,2);break;case"m":e=Pe(le.Minutes,1);break;case"mm":e=Pe(le.Minutes,2);break;case"s":e=Pe(le.Seconds,1);break;case"ss":e=Pe(le.Seconds,2);break;case"S":e=Pe(le.FractionalSeconds,1);break;case"SS":e=Pe(le.FractionalSeconds,2);break;case"SSS":e=Pe(le.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=zc(yn.Short);break;case"ZZZZZ":e=zc(yn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=zc(yn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=zc(yn.Long);break;default:return null}return hf[t]=e,e}function pE(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function CP(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function AP(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=pE(e,i);return CP(t,r*(s-i))}function SP(t){if(iE(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(c=>+c);return Kc(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(yP))return NP(r)}let e=new Date(t);if(!iE(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function NP(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,c=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,c,u,l),e}function iE(t){return t instanceof Date&&!isNaN(t.valueOf())}var RP=/^(\d+)?\.((\d+)(-(\d+))?)?$/,sE=22,Qc=".",Qs="0",xP=";",PP=",",ff="#";function MP(t,e,n,r,i,s,o=!1){let c="",u=!1;if(!isFinite(t))c=mn(n,vt.Infinity);else{let l=LP(t);o&&(l=FP(l));let h=e.minInt,p=e.minFrac,m=e.maxFrac;if(s){let L=s.match(RP);if(L===null)throw new Error(`${s} is not a valid digit info`);let U=L[1],K=L[3],ve=L[5];U!=null&&(h=pf(U)),K!=null&&(p=pf(K)),ve!=null?m=pf(ve):K!=null&&p>m&&(m=p)}VP(l,p,m);let y=l.digits,C=l.integerLen,x=l.exponent,R=[];for(u=y.every(L=>!L);C<h;C++)y.unshift(0);for(;C<0;C++)y.unshift(0);C>0?R=y.splice(C,y.length):(R=y,y=[0]);let O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),c=O.join(mn(n,r)),R.length&&(c+=mn(n,i)+R.join("")),x&&(c+=mn(n,vt.Exponential)+"+"+x)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function kP(t,e,n){let r=pP(e,dE.Decimal),i=OP(r,mn(e,vt.MinusSign));return MP(t,i,e,vt.Group,vt.Decimal,n)}function OP(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(xP),i=r[0],s=r[1],o=i.indexOf(Qc)!==-1?i.split(Qc):[i.substring(0,i.lastIndexOf(Qs)+1),i.substring(i.lastIndexOf(Qs)+1)],c=o[0],u=o[1]||"";n.posPre=c.substring(0,c.indexOf(ff));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===Qs?n.minFrac=n.maxFrac=h+1:p===ff?n.maxFrac=h+1:n.posSuf+=p}let l=c.split(PP);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let h=i.length-n.posPre.length-n.posSuf.length,p=s.indexOf(ff);n.negPre=s.substring(0,p).replace(/'/g,""),n.negSuf=s.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function FP(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function LP(t){let e=Math.abs(t)+"",n=0,r,i,s,o,c;for((i=e.indexOf(Qc))>-1&&(e=e.replace(Qc,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Qs;s++);if(s===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Qs;)c--;for(i-=s,r=[],o=0;s<=c;s++,o++)r[o]=Number(e.charAt(s))}return i>sE&&(r=r.splice(0,sE-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function VP(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,c=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(c>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,l=e+t.integerLen,h=r.reduceRight(function(p,m,y,C){return m=m+p,C[y]=m<10?m:m-10,u&&(C[y]===0&&y>=l?C.pop():u=!1),m>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function pf(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Fq(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var gf=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Lq=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gf(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),oE(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);oE(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(ot(Lc),ot(Fc),ot(of))}}static{this.\u0275dir=Sh({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function oE(t,e){t.context.$implicit=e.item}var Vq=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new mf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){aE("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){aE("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(ot(Lc),ot(Fc))}}static{this.\u0275dir=Sh({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),mf=class{constructor(){this.$implicit=null,this.ngIf=null}};function aE(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${nt(e)}'.`)}function Tf(t,e){return new ie(2100,!1)}var yf=class{createSubscription(e,n){return af(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){af(()=>e.unsubscribe())}},vf=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},UP=new vf,jP=new yf,Uq=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Vc(n))return UP;if(rf(n))return jP;throw Tf(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(ot(sf,16))}}static{this.\u0275pipe=qs({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var BP="mediumDate",$P=new te(""),HP=new te(""),jq=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??BP,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return _P(n,o,s||this.locale,c)}catch(o){throw Tf(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(ot(Ks,16),ot($P,24),ot(HP,24))}}static{this.\u0275pipe=qs({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Bq=(()=>{class t{transform(n){return JSON.stringify(n,null,2)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=qs({name:"json",type:t,pure:!1,standalone:!0})}}return t})();var $q=(()=>{class t{constructor(n){this._locale=n}transform(n,r,i){if(!qP(n))return null;i||=this._locale;try{let s=zP(n);return kP(s,i,r)}catch(s){throw Tf(t,s.message)}}static{this.\u0275fac=function(r){return new(r||t)(ot(Ks,16))}}static{this.\u0275pipe=qs({name:"number",type:t,pure:!0,standalone:!0})}}return t})();function qP(t){return!(t==null||t===""||t!==t)}function zP(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Hq=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=$_({type:t})}static{this.\u0275inj=N_({})}}return t})(),GP="browser",WP="server";function KP(t){return t===GP}function qq(t){return t===WP}var zq=(()=>{class t{static{this.\u0275prov=fe({token:t,providedIn:"root",factory:()=>KP(ee(Gs))?new _f(ee(wf),window):new If})}}return t})(),_f=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=QP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function QP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var If=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},cE=class{};var mE=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new Cf;let m=s<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Cf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},JP=function(t){let e=mE(t);return yE.encodeByteArray(e,!0)},Ys=function(t){return JP(t).replace(/\./g,"")},Sf=function(t){try{return yE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var XP=()=>ZP().__FIREBASE_DEFAULTS__,eM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Sf(t[1]);return e&&JSON.parse(e)},Zc=()=>{try{return XP()||eM()||tM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nf=t=>{var e,n;return(n=(e=Zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vE=t=>{let e=Nf(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rf=()=>{var t;return(t=Zc())===null||t===void 0?void 0:t.config},xf=t=>{var e;return(e=Zc())===null||e===void 0?void 0:e[`_${t}`]};var Jc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function _E(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ys(JSON.stringify(n)),Ys(JSON.stringify(o)),""].join(".")}function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function nM(){var t;let e=(t=Zc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EE(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TE(){let t=je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bE(){return!nM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pf(){try{return typeof indexedDB=="object"}catch{return!1}}function CE(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var rM="FirebaseError",_t=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vn.prototype.create)}},vn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?iM(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new _t(i,c,r)}};function iM(t,e){return t.replace(sM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var sM=/\{\$([^}]+)}/g;function AE(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(gE(s)&&gE(o)){if(!Rr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function gE(t){return t!==null&&typeof t=="object"}function Js(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xi(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Pi(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SE(t,e){let n=new Af(t,e);return n.subscribe.bind(n)}var Af=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bf),i.error===void 0&&(i.error=bf),i.complete===void 0&&(i.complete=bf);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function oM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bf(){}var Kq=4*60*60*1e3;function Ae(t){return t&&t._delegate?t._delegate:t}var At=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xr="[DEFAULT]";var Mf=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Jc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cM(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aM(t){return t===xr?void 0:t}function cM(t){return t.instantiationMode==="EAGER"}var Xc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Mf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var uM=[],ne=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ne||{}),lM={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},dM=ne.INFO,hM={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},fM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=hM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kn=class{constructor(e){this.name=e,this._logLevel=dM,this._logHandler=fM,this._userLogHandler=null,uM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var pM=(t,e)=>e.some(n=>t instanceof n),NE,RE;function gM(){return NE||(NE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mM(){return RE||(RE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var xE=new WeakMap,Of=new WeakMap,PE=new WeakMap,kf=new WeakMap,Lf=new WeakMap;function yM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xE.set(n,t)}).catch(()=>{}),Lf.set(e,t),e}function vM(t){if(Of.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Of.set(t,e)}var Ff={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Of.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ME(t){Ff=t(Ff)}function _M(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(eu(this),e,...n);return PE.set(r,e.sort?e.sort():[e]),Qt(r)}:mM().includes(t)?function(...e){return t.apply(eu(this),e),Qt(xE.get(this))}:function(...e){return Qt(t.apply(eu(this),e))}}function IM(t){return typeof t=="function"?_M(t):(t instanceof IDBTransaction&&vM(t),pM(t,gM())?new Proxy(t,Ff):t)}function Qt(t){if(t instanceof IDBRequest)return yM(t);if(kf.has(t))return kf.get(t);let e=IM(t);return e!==t&&(kf.set(t,e),Lf.set(e,t)),e}var eu=t=>Lf.get(t);function OE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=Qt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Qt(o.result),u.oldVersion,u.newVersion,Qt(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var wM=["get","getKey","getAll","getAllKeys","count"],EM=["put","add","delete","clear"],Vf=new Map;function kE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vf.get(e))return Vf.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=EM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wM.includes(n)))return;let s=function(o,...c){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Vf.set(e,s),s}ME(t=>We(Ue({},t),{get:(e,n,r)=>kE(e,n)||t.get(e,n,r),has:(e,n)=>!!kE(e,n)||t.has(e,n)}));var jf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function DM(t){let e=t.getComponent();return e?.type==="VERSION"}var Bf="@firebase/app",FE="0.10.13";var _n=new Kn("@firebase/app"),TM="@firebase/app-compat",bM="@firebase/analytics-compat",CM="@firebase/analytics",AM="@firebase/app-check-compat",SM="@firebase/app-check",NM="@firebase/auth",RM="@firebase/auth-compat",xM="@firebase/database",PM="@firebase/data-connect",MM="@firebase/database-compat",kM="@firebase/functions",OM="@firebase/functions-compat",FM="@firebase/installations",LM="@firebase/installations-compat",VM="@firebase/messaging",UM="@firebase/messaging-compat",jM="@firebase/performance",BM="@firebase/performance-compat",$M="@firebase/remote-config",HM="@firebase/remote-config-compat",qM="@firebase/storage",zM="@firebase/storage-compat",GM="@firebase/firestore",WM="@firebase/vertexai-preview",KM="@firebase/firestore-compat",QM="firebase",YM="10.14.1";var $f="[DEFAULT]",JM={[Bf]:"fire-core",[TM]:"fire-core-compat",[CM]:"fire-analytics",[bM]:"fire-analytics-compat",[SM]:"fire-app-check",[AM]:"fire-app-check-compat",[NM]:"fire-auth",[RM]:"fire-auth-compat",[xM]:"fire-rtdb",[PM]:"fire-data-connect",[MM]:"fire-rtdb-compat",[kM]:"fire-fn",[OM]:"fire-fn-compat",[FM]:"fire-iid",[LM]:"fire-iid-compat",[VM]:"fire-fcm",[UM]:"fire-fcm-compat",[jM]:"fire-perf",[BM]:"fire-perf-compat",[$M]:"fire-rc",[HM]:"fire-rc-compat",[qM]:"fire-gcs",[zM]:"fire-gcs-compat",[GM]:"fire-fst",[KM]:"fire-fst-compat",[WM]:"fire-vertex","fire-js":"fire-js",[QM]:"fire-js-all"};var Zs=new Map,ZM=new Map,Hf=new Map;function LE(t,e){try{t.container.addComponent(e)}catch(n){_n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yn(t){let e=t.name;if(Hf.has(e))return _n.debug(`There were multiple attempts to register component ${e}.`),!1;Hf.set(e,t);for(let n of Zs.values())LE(n,t);for(let n of ZM.values())LE(n,t);return!0}function eo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vt(t){return t.settings!==void 0}var XM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new vn("app","Firebase",XM);var qf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new At("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}};var Jn=YM;function Wf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:$f,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(n||(n=Rf()),!n)throw Qn.create("no-options");let s=Zs.get(i);if(s){if(Rr(n,s.options)&&Rr(r,s.config))return s;throw Qn.create("duplicate-app",{appName:i})}let o=new Xc(i);for(let u of Hf.values())o.addComponent(u);let c=new qf(n,r,o);return Zs.set(i,c),c}function Pr(t=$f){let e=Zs.get(t);if(!e&&t===$f&&Rf())return Wf();if(!e)throw Qn.create("no-app",{appName:t});return e}function to(){return Array.from(Zs.values())}function Me(t,e,n){var r;let i=(r=JM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_n.warn(c.join(" "));return}Yn(new At(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ek="firebase-heartbeat-database",tk=1,Xs="firebase-heartbeat-store",Uf=null;function BE(){return Uf||(Uf=OE(ek,tk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),Uf}function nk(t){return _(this,null,function*(){try{let n=(yield BE()).transaction(Xs),r=yield n.objectStore(Xs).get($E(t));return yield n.done,r}catch(e){if(e instanceof _t)_n.warn(e.message);else{let n=Qn.create("idb-get",{originalErrorMessage:e?.message});_n.warn(n.message)}}})}function VE(t,e){return _(this,null,function*(){try{let r=(yield BE()).transaction(Xs,"readwrite");yield r.objectStore(Xs).put(e,$E(t)),yield r.done}catch(n){if(n instanceof _t)_n.warn(n.message);else{let r=Qn.create("idb-set",{originalErrorMessage:n?.message});_n.warn(r.message)}}})}function $E(t){return`${t.name}!${t.options.appId}`}var rk=1024,ik=30*24*60*60*1e3,zf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Gf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=ik}),this._storage.overwrite(this._heartbeatsCache))}catch(r){_n.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=UE(),{heartbeatsToSend:r,unsentEntries:i}=sk(this._heartbeatsCache.heartbeats),s=Ys(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return _n.warn(n),""}})}};function UE(){return new Date().toISOString().substring(0,10)}function sk(t,e=rk){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Gf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Pf()?CE().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield nk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function jE(t){return Ys(JSON.stringify({version:2,heartbeats:t})).length}function ok(t){Yn(new At("platform-logger",e=>new jf(e),"PRIVATE")),Yn(new At("heartbeat",e=>new zf(e),"PRIVATE")),Me(Bf,FE,t),Me(Bf,FE,"esm2017"),Me("fire-js","")}ok("");var ak="firebase",ck="10.14.1";Me(ak,ck,"app");var kr=new Si("ANGULARFIRE2_VERSION");function nu(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var no=(t,e)=>{let n=e?[e]:to(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ru=class{constructor(){return no(lk)}},lk="app-check";function Mi(){}var HE=class{zone;delegate;constructor(t,e=md){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let r=this.zone,i=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(i,e,n)}},dk=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mi,{},Mi,Mi)),e.pipe(cd({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ki=class tu{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new HE(Zone.current)),this.insideAngular=n.run(()=>new HE(Zone.current,Ss)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||tu)(Ne(be))};static \u0275prov=fe({token:tu,factory:tu.\u0275fac,providedIn:"root"})};function iu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function hk(t){return iu().ngZone.runOutsideAngular(()=>t())}function Mr(t){return iu().ngZone.run(()=>t())}function fk(t){return pk(iu())(t)}function pk(t){return function(n){return n=n.lift(new dk(t.ngZone)),n.pipe(Fn(t.outsideAngular),On(t.insideAngular))}}var gk=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Mr(()=>t.apply(void 0,r))},Ie=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Mr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mi,{},Mi,Mi))),r[s]=gk(r[s],n));let i=hk(()=>t.apply(this,r));if(!e)if(i instanceof G){let s=iu();return i.pipe(Fn(s.outsideAngular),On(s.insideAngular))}else return Mr(()=>i);return i instanceof G?i.pipe(fk):i instanceof Promise?Mr(()=>new Promise((s,o)=>i.then(c=>Mr(()=>s(c)),c=>Mr(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Mr(()=>i)};var Or=class{constructor(t){return t}},ro=class{constructor(){return to()}};function mk(t){return t&&t.length===1?t[0]:new Or(Pr())}var Kf=new te("angularfire2._apps"),yk={provide:Or,useFactory:mk,deps:[[new gt,Kf]]},vk={provide:ro,deps:[[new gt,Kf]]};function _k(t){return(e,n)=>{let r=n.get(Gs);Me("angularfire",kr.full,"core"),Me("angularfire",kr.full,"app"),Me("angular",Jw.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Or(i)}}function Fz(t,...e){return Nr([yk,vk,{provide:Kf,useFactory:_k(t),multi:!0,deps:[be,pt,ki,...e]}])}var Uz=Ie(Wf,!0);function oD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aD=oD,cD=new vn("auth","Firebase",oD());var lu=new Kn("@firebase/auth");function Ik(t,...e){lu.logLevel<=ne.WARN&&lu.warn(`Auth (${Jn}): ${t}`,...e)}function ou(t,...e){lu.logLevel<=ne.ERROR&&lu.error(`Auth (${Jn}): ${t}`,...e)}function Jt(t,...e){throw yp(t,...e)}function Fr(t,...e){return yp(t,...e)}function uD(t,e,n){let r=Object.assign(Object.assign({},aD()),{[e]:n});return new vn("auth","Firebase",r).create(e,{appName:t.name})}function En(t){return uD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yp(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cD.create(t,...e)}function j(t,e,...n){if(!t)throw yp(e,...n)}function In(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ou(e),new Error(e)}function Xn(t,e){t||In(e)}function Zf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wk(){return qE()==="http:"||qE()==="https:"}function qE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Ek(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wk()||EE()||"connection"in navigator)?navigator.onLine:!0}function Dk(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Lr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=IE()||DE()}get(){return Ek()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vp(t,e){Xn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var du=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bk=new Lr(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Dn(s,o,c,u){return _(this,arguments,function*(t,e,n,r,i={}){return lD(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Js(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return wE()||(y.referrerPolicy="no-referrer"),du.fetch()(dD(t,t.config.apiHost,n,p),y)}))})}function lD(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Tk),e);try{let i=new Xf(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw su(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw su(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw su(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw uD(t,h,l);Jt(t,h)}}catch(i){if(i instanceof _t)throw i;Jt(t,"network-request-failed",{message:String(i)})}})}function lo(s,o,c,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Dn(t,e,n,r,i);return"mfaPendingCredential"in l&&Jt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function dD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?vp(t.config,i):`${t.config.apiScheme}://${i}`}function Ck(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Xf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),bk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function su(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Fr(t,e,r);return i.customData._tokenResponse=n,i}function zE(t){return t!==void 0&&t.enterprise!==void 0}var ep=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ck(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Ak(t,e){return _(this,null,function*(){return Dn(t,"GET","/v2/recaptchaConfig",er(t,e))})}function Sk(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:delete",e)})}function hD(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:lookup",e)})}function io(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _p(t,e=!1){return _(this,null,function*(){let n=Ae(t),r=yield n.getIdToken(e),i=Ip(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:io(Qf(i.auth_time)),issuedAtTime:io(Qf(i.iat)),expirationTime:io(Qf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Qf(t){return Number(t)*1e3}function Ip(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ou("JWT malformed, contained fewer than 3 sections"),null;try{let i=Sf(n);return i?JSON.parse(i):(ou("Failed to decode base64 JWT payload"),null)}catch(i){return ou("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GE(t){let e=Ip(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Oi(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof _t&&Nk(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Nk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var tp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var oo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hu(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Oi(t,hD(n,{idToken:r}));j(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fD(s.providerUserInfo):[],c=Rk(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new oo(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function wp(t){return _(this,null,function*(){let e=Ae(t);yield hu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Rk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fD(t){return t.map(e=>{var{providerId:n}=e,r=nd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function xk(t,e){return _(this,null,function*(){let n=yield lD(t,{},()=>_(this,null,function*(){let r=Js({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=dD(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",du.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Pk(t,e){return _(this,null,function*(){return Dn(t,"POST","/v2/accounts:revokeToken",er(t,e))})}var so=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");let n=GE(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield xk(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return In("not implemented")}};function Zn(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Fi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=nd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Oi(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return _p(this,e)}reload(){return wp(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield hu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Vt(this.auth.app))return Promise.reject(En(this.auth));let e=yield this.getIdToken();return yield Oi(this,Sk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:K,isAnonymous:ve,providerData:q,stsTokenManager:D}=n;j(U&&D,e,"internal-error");let v=so.fromJSON(this.name,D);j(typeof U=="string",e,"internal-error"),Zn(p,e.name),Zn(m,e.name),j(typeof K=="boolean",e,"internal-error"),j(typeof ve=="boolean",e,"internal-error"),Zn(y,e.name),Zn(C,e.name),Zn(x,e.name),Zn(R,e.name),Zn(O,e.name),Zn(L,e.name);let I=new t({uid:U,auth:e,email:m,emailVerified:K,displayName:p,isAnonymous:ve,photoURL:C,phoneNumber:y,tenantId:x,stsTokenManager:v,createdAt:O,lastLoginAt:L});return q&&Array.isArray(q)&&(I.providerData=q.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new so;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hu(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];j(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new so;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new oo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var WE=new Map;function wn(t){Xn(t instanceof Function,"Expected a class definition");let e=WE.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WE.set(t,e),e)}var Mk=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),np=Mk;function au(t,e,n){return`firebase:${t}:${e}:${n}`}var fu=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=au(this.userKey,i.apiKey,s),this.fullPersistenceKey=au("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Fi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(wn(np),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||wn(np),o=au(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Fi._fromJSON(e,h);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function KE(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_D(e))return"Blackberry";if(ID(e))return"Webos";if(gD(e))return"Safari";if((e.includes("chrome/")||mD(e))&&!e.includes("edge/"))return"Chrome";if(vD(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pD(t=je()){return/firefox\//i.test(t)}function gD(t=je()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mD(t=je()){return/crios\//i.test(t)}function yD(t=je()){return/iemobile/i.test(t)}function vD(t=je()){return/android/i.test(t)}function _D(t=je()){return/blackberry/i.test(t)}function ID(t=je()){return/webos/i.test(t)}function Ep(t=je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kk(t=je()){var e;return Ep(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ok(){return TE()&&document.documentMode===10}function wD(t=je()){return Ep(t)||vD(t)||ID(t)||_D(t)||/windows phone/i.test(t)||yD(t)}function ED(t,e=[]){let n;switch(t){case"Browser":n=KE(je());break;case"Worker":n=`${KE(je())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jn}/${r}`}var rp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Fk(n){return _(this,arguments,function*(t,e={}){return Dn(t,"GET","/v2/passwordPolicy",er(t,e))})}var Lk=6,ip=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Lk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var sp=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pu(this),this.idTokenSubscription=new pu(this),this.beforeStateQueue=new rp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield fu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield hD(this,{idToken:e}),r=yield Fi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Vt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield hu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Dk()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Vt(this.app))return Promise.reject(En(this));let n=e?Ae(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Vt(this.app)?Promise.reject(En(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vt(this.app)?Promise.reject(En(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(wn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Fk(this),n=new ip(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Pk(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&wn(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=yield fu.create(this,[wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ED(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Ik(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ur(t){return Ae(t)}var pu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=SE(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wu={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vk(t){wu=t}function DD(t){return wu.loadJS(t)}function Uk(){return wu.recaptchaEnterpriseScript}function jk(){return wu.gapiScript}function TD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Bk="recaptcha-enterprise",$k="NO_RECAPTCHA",op=class{constructor(e){this.type=Bk,this.auth=Ur(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>_(this,null,function*(){Ak(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new ep(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{c(u)})}))})}function i(s,o,c){let u=window.grecaptcha;zE(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o($k)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(c=>{if(!n&&zE(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Uk();u.length!==0&&(u+=c),DD(u).then(()=>{i(c,s,o)}).catch(l=>{o(l)})}}).catch(c=>{o(c)})})})}};function QE(t,e,n,r=!1){return _(this,null,function*(){let i=new op(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function ap(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield QE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield QE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Dp(t,e){let n=eo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Rr(s,e??{}))return i;Jt(i,"already-initialized")}return n.initialize({options:e})}function Hk(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(wn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Tp(t,e,n){let r=Ur(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=bD(e),{host:o,port:c}=qk(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||zk()}function bD(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qk(t){let e=bD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:YE(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:YE(o)}}}function YE(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function zk(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ao=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return In("not implemented")}_getIdTokenResponse(e){return In("not implemented")}_linkToIdToken(e,n){return In("not implemented")}_getReauthenticationResolver(e){return In("not implemented")}};function Gk(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:update",e)})}function Wk(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:signUp",e)})}function Kk(t,e){return _(this,null,function*(){return lo(t,"POST","/v1/accounts:signInWithPassword",er(t,e))})}function Qk(t,e){return _(this,null,function*(){return lo(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))})}function Yk(t,e){return _(this,null,function*(){return lo(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))})}var co=class t extends ao{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ap(e,n,"signInWithPassword",Kk);case"emailLink":return Qk(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ap(e,r,"signUpPassword",Wk);case"emailLink":return Yk(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Yf(t,e){return _(this,null,function*(){return lo(t,"POST","/v1/accounts:signInWithIdp",er(t,e))})}function Jk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zk(t){let e=xi(Pi(t)).link,n=e?xi(Pi(e)).deep_link_id:null,r=xi(Pi(t)).deep_link_id;return(r?xi(Pi(r)).link:null)||r||n||e||t}var gu=class t{constructor(e){var n,r,i,s,o,c;let u=xi(Pi(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Jk((i=u.mode)!==null&&i!==void 0?i:null);j(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=Zk(e);try{return new t(n)}catch{return null}}};var CD=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return co._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=gu.parseLink(r);return j(i,"argument-error"),co._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),mu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var cp=class extends mu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Xk(t,e){return _(this,null,function*(){return lo(t,"POST","/v1/accounts:signUp",er(t,e))})}var Li=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield Fi._fromIdTokenResponse(e,r,i),o=JE(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=JE(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function JE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var up=class t extends _t{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function AD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?up._fromErrorAndOperation(t,s,e,r):s})}function eO(t,e,n=!1){return _(this,null,function*(){let r=yield Oi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Li._forOperation(t,"link",r)})}function tO(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Vt(r.app))return Promise.reject(En(r));let i="reauthenticate";try{let s=yield Oi(t,AD(r,i,e,t),n);j(s.idToken,r,"internal-error");let o=Ip(s.idToken);j(o,r,"internal-error");let{sub:c}=o;return j(t.uid===c,r,"user-mismatch"),Li._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Jt(r,"user-mismatch"),s}})}function SD(t,e,n=!1){return _(this,null,function*(){if(Vt(t.app))return Promise.reject(En(t));let r="signIn",i=yield AD(t,r,e),s=yield Li._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function bp(t,e){return _(this,null,function*(){return SD(Ur(t),e)})}function ND(t){return _(this,null,function*(){let e=Ur(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Cp(t,e,n){return _(this,null,function*(){if(Vt(t.app))return Promise.reject(En(t));let r=Ur(t),o=yield ap(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ND(t),u}),c=yield Li._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function Ap(t,e,n){return Vt(t.app)?Promise.reject(En(t)):bp(Ae(t),CD.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ND(t),r}))}function Sp(t,e){return nO(Ae(t),null,e)}function nO(t,e,n){return _(this,null,function*(){let{auth:r}=t,s={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);let o=yield Oi(t,Gk(r,s));yield t._updateTokensIfNecessary(o,!0)})}function ho(t,e,n,r){return Ae(t).onIdTokenChanged(e,n,r)}function Np(t,e,n){return Ae(t).beforeAuthStateChanged(e,n)}function Eu(t,e,n,r){return Ae(t).onAuthStateChanged(e,n,r)}function Rp(t){return Ae(t).signOut()}var yu="__sak";var vu=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yu,"1"),this.storage.removeItem(yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var rO=1e3,iO=10,sO=(()=>{class t extends vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wD(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);Ok()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,iO):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},rO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Pn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Pn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Pn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),RD=sO;var oO=(()=>{class t extends vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),xp=oO;function aO(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var cO=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield aO(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function xD(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var lp=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let l=xD("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Yt(){return window}function uO(t){Yt().location.href=t}function PD(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}function lO(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function dO(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hO(){return PD()?self:null}var MD="firebaseLocalStorageDb",fO=1,_u="firebaseLocalStorage",kD="fbase_key",Vr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Du(t,e){return t.transaction([_u],e?"readwrite":"readonly").objectStore(_u)}function pO(){let t=indexedDB.deleteDatabase(MD);return new Vr(t).toPromise()}function dp(){let t=indexedDB.open(MD,fO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(_u,{keyPath:kD})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(_u)?e(r):(r.close(),yield pO(),e(yield dp()))}))})}function ZE(t,e,n){return _(this,null,function*(){let r=Du(t,!0).put({[kD]:e,value:n});return new Vr(r).toPromise()})}function gO(t,e){return _(this,null,function*(){let n=Du(t,!1).get(e),r=yield new Vr(n).toPromise();return r===void 0?null:r.value})}function XE(t,e){let n=Du(t,!0).delete(e);return new Vr(n).toPromise()}var mO=800,yO=3,vO=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield dp(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>yO)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return PD()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=cO._getInstance(hO()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield lO(),!this.activeServiceWorker)return;this.sender=new lp(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||dO()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield dp();return yield ZE(n,yu,"1"),yield XE(n,yu),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>ZE(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>gO(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>XE(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Du(s,!1).getAll();return new Vr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),mO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),OD=vO;var Kz=TD("rcb"),Qz=new Lr(3e4,6e4);function _O(t,e){return e?wn(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var uo=class extends ao{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yf(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function IO(t){return SD(t.auth,new uo(t),t.bypassAuthState)}function wO(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),tO(n,new uo(t),t.bypassAuthState)}function EO(t){return _(this,null,function*(){let{auth:e,user:n}=t;return j(n,e,"internal-error"),eO(n,new uo(t),t.bypassAuthState)})}var hp=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IO;case"linkViaPopup":case"linkViaRedirect":return EO;case"reauthViaPopup":case"reauthViaRedirect":return wO;default:Jt(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Yz=new Lr(2e3,1e4);var DO="pendingRedirect",cu=new Map,fp=class t extends hp{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=cu.get(this.auth._key());if(!e){try{let r=(yield TO(this.resolver,this.auth))?yield Pn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cu.set(this.auth._key(),e)}return this.bypassAuthState||cu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Pn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Pn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function TO(t,e){return _(this,null,function*(){let n=AO(e),r=CO(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function bO(t,e){cu.set(t._key(),e)}function CO(t){return wn(t._redirectPersistence)}function AO(t){return au(DO,t.config.apiKey,t.name)}function SO(t,e,n=!1){return _(this,null,function*(){if(Vt(t.app))return Promise.reject(En(t));let r=Ur(t),i=_O(r,e),o=yield new fp(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var NO=10*60*1e3,pp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FD(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NO&&this.cachedEventUids.clear(),this.cachedEventUids.has(eD(e))}saveEventToCache(e){this.cachedEventUids.add(eD(e)),this.lastProcessedEventTime=Date.now()}};function eD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FD({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function RO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FD(t);default:return!1}}function xO(n){return _(this,arguments,function*(t,e={}){return Dn(t,"GET","/v1/projects",e)})}var PO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MO=/^https?/;function kO(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield xO(t);for(let n of e)try{if(OO(n))return}catch{}Jt(t,"unauthorized-domain")})}function OO(t){let e=Zf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!MO.test(n))return!1;if(PO.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var FO=new Lr(3e4,6e4);function tD(){let t=Yt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LO(t){return new Promise((e,n)=>{var r,i,s;function o(){tD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tD(),n(Fr(t,"network-request-failed"))},timeout:FO.get()})}if(!((i=(r=Yt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Yt().gapi)===null||s===void 0)&&s.load)o();else{let c=TD("iframefcb");return Yt()[c]=()=>{gapi.load?o():n(Fr(t,"network-request-failed"))},DD(`${jk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw uu=null,e})}var uu=null;function VO(t){return uu=uu||LO(t),uu}var UO=new Lr(5e3,15e3),jO="__/auth/iframe",BO="emulator/auth/iframe",$O={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qO(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?vp(e,BO):`https://${t.config.authDomain}/${jO}`,r={apiKey:e.apiKey,appName:t.name,v:Jn},i=HO.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Js(r).slice(1)}`}function zO(t){return _(this,null,function*(){let e=yield VO(t),n=Yt().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:qO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$O,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Fr(t,"network-request-failed"),c=Yt().setTimeout(()=>{s(o)},UO.get());function u(){Yt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var GO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WO=500,KO=600,QO="_blank",YO="http://localhost",Iu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function JO(t,e,n,r=WO,i=KO){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},GO),{width:r.toString(),height:i.toString(),top:s,left:o}),l=je().toLowerCase();n&&(c=mD(l)?QO:n),pD(l)&&(e=e||YO,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(kk(l)&&c!=="_self")return ZO(e||"",c),new Iu(null);let p=window.open(e||"",c,h);j(p,t,"popup-blocked");try{p.focus()}catch{}return new Iu(p)}function ZO(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var XO="__/auth/handler",e1="emulator/auth/handler",t1=encodeURIComponent("fac");function nD(t,e,n,r,i,s){return _(this,null,function*(){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Jn,eventId:i};if(e instanceof mu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof cp){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${t1}=${encodeURIComponent(u)}`:"";return`${n1(t)}?${Js(c).slice(1)}${l}`})}function n1({config:t}){return t.emulator?vp(t,e1):`https://${t.authDomain}/${XO}`}var Jf="webStorageSupport",gp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xp,this._completeRedirectFn=SO,this._overrideRedirectResult=bO}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Xn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nD(e,n,r,Zf(),i);return JO(e,o,xD())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield nD(e,n,r,Zf(),i);return uO(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield zO(e),r=new pp(e);return n.register("authEvent",i=>(j(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jf,{type:Jf},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Jf];o!==void 0&&n(!!o),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wD()||gD()||Ep()}},LD=gp;var rD="@firebase/auth",iD="1.7.9";var mp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function r1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i1(t){Yn(new At("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;j(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ED(t)},l=new sp(r,i,s,u);return Hk(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yn(new At("auth-internal",e=>{let n=Ur(e.getProvider("auth").getImmediate());return(r=>new mp(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(rD,iD,r1(t)),Me(rD,iD,"esm2017")}var s1=5*60,o1=xf("authIdTokenMaxAge")||s1,sD=null,a1=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>o1)return;let i=n?.token;sD!==i&&(sD=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Pp(t=Pr()){let e=eo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Dp(t,{popupRedirectResolver:LD,persistence:[OD,RD,xp]}),r=xf("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=a1(s.toString());Np(n,o,()=>o(n.currentUser)),ho(n,c=>o(c))}}let i=Nf("auth");return i&&Tp(n,`http://${i}`),n}function c1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Vk({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Fr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",c1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i1("Browser");function UD(t){return new G(function(e){var n=Eu(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}function jD(t){return new G(function(e){var n=ho(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var BD="auth",fo=class{constructor(t){return t}},Mp=class{constructor(){return no(BD)}};var kp=new te("angularfire2.auth-instances");function Y1(t,e){let n=nu(BD,t,e);return n&&new fo(n)}function J1(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fo(r)}}var Z1={provide:Mp,deps:[[new gt,kp]]},X1={provide:fo,useFactory:Y1,deps:[[new gt,kp],Or]};function L4(t,...e){return Me("angularfire",kr.full,"auth"),Nr([X1,Z1,{provide:kp,useFactory:J1(t),multi:!0,deps:[be,pt,ki,ro,[new gt,ru],...e]}])}var j4=Ie(UD,!0),$D=Ie(jD,!0);var Op=Ie(Cp,!0);var H4=Ie(Pp,!0);var Fp=Ie(Ap,!0);var HD=Ie(Rp,!0);var Lp=Ie(Sp,!0);var qD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zD={};var tr,Vp;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(E,T,A){for(var w=Array(arguments.length-2),on=2;on<arguments.length;on++)w[on-2]=arguments[on];return v.prototype[T].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)E[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)E[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],T=D.g[2];var A=D.g[3],w=v+(A^I&(T^A))+E[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=A+(T^v&(I^T))+E[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(I^A&(v^I))+E[2]+606105819&4294967295,T=A+(w<<17&4294967295|w>>>15),w=I+(v^T&(A^v))+E[3]+3250441966&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(A^I&(T^A))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(T^v&(I^T))+E[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(I^A&(v^I))+E[6]+2821735955&4294967295,T=A+(w<<17&4294967295|w>>>15),w=I+(v^T&(A^v))+E[7]+4249261313&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(A^I&(T^A))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(T^v&(I^T))+E[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(I^A&(v^I))+E[10]+4294925233&4294967295,T=A+(w<<17&4294967295|w>>>15),w=I+(v^T&(A^v))+E[11]+2304563134&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(A^I&(T^A))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(T^v&(I^T))+E[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(I^A&(v^I))+E[14]+2792965006&4294967295,T=A+(w<<17&4294967295|w>>>15),w=I+(v^T&(A^v))+E[15]+1236535329&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(T^A&(I^T))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^T&(v^I))+E[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(A^v))+E[11]+643717713&4294967295,T=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(T^A))+E[0]+3921069994&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^A&(I^T))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^T&(v^I))+E[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(A^v))+E[15]+3634488961&4294967295,T=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(T^A))+E[4]+3889429448&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^A&(I^T))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^T&(v^I))+E[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(A^v))+E[3]+4107603335&4294967295,T=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(T^A))+E[8]+1163531501&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^A&(I^T))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^T&(v^I))+E[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(A^v))+E[7]+1735328473&4294967295,T=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(T^A))+E[12]+2368359562&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(I^T^A)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^T)+E[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^I)+E[11]+1839030562&4294967295,T=A+(w<<16&4294967295|w>>>16),w=I+(T^A^v)+E[14]+4259657740&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^A)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^T)+E[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^I)+E[7]+4139469664&4294967295,T=A+(w<<16&4294967295|w>>>16),w=I+(T^A^v)+E[10]+3200236656&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^A)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^T)+E[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^I)+E[3]+3572445317&4294967295,T=A+(w<<16&4294967295|w>>>16),w=I+(T^A^v)+E[6]+76029189&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^A)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^T)+E[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^I)+E[15]+530742520&4294967295,T=A+(w<<16&4294967295|w>>>16),w=I+(T^A^v)+E[2]+3299628645&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(T^(I|~A))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~T))+E[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~I))+E[14]+2878612391&4294967295,T=A+(w<<15&4294967295|w>>>17),w=I+(A^(T|~v))+E[5]+4237533241&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~A))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~T))+E[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~I))+E[10]+4293915773&4294967295,T=A+(w<<15&4294967295|w>>>17),w=I+(A^(T|~v))+E[1]+2240044497&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~A))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~T))+E[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~I))+E[6]+2734768916&4294967295,T=A+(w<<15&4294967295|w>>>17),w=I+(A^(T|~v))+E[13]+1309151649&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~A))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~T))+E[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~I))+E[2]+718787259&4294967295,T=A+(w<<15&4294967295|w>>>17),w=I+(A^(T|~v))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,E=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=I;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(E[T++]=D.charCodeAt(A++),T==this.blockSize){i(this,E),T=0;break}}else for(;A<v;)if(E[T++]=D[A++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)D[I++]=this.g[v]>>>E&255;return D};function s(D,v){var I=c;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function o(D,v){this.h=v;for(var I=[],E=!0,T=D.length-1;0<=T;T--){var A=D[T]|0;E&&A==v||(I[T]=A,E=!1)}this.g=I}var c={};function u(D){return-128<=D&&128>D?s(D,function(v){return new o([v|0],0>v?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],I=1,E=0;D>=I;E++)v[E]=D/I|0,I*=4294967296;return new o(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,T=0;T<D.length;T+=8){var A=Math.min(8,D.length-T),w=parseInt(D.substring(T,T+A),v);8>A?(A=l(Math.pow(v,A)),E=E.j(A).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);D+=(0<=E?E:4294967296+E)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(x(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,E="";;){var T=K(I,v).g;I=O(I,T.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=T,C(I))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function x(D){return D.h==-1}t.l=function(D){return D=O(this,D),x(D)?-1:C(D)?0:1};function R(D){for(var v=D.g.length,I=[],E=0;E<v;E++)I[E]=~D.g[E];return new o(I,~D.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0,T=0;T<=v;T++){var A=E+(this.i(T)&65535)+(D.i(T)&65535),w=(A>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);E=w>>>16,A&=65535,w&=65535,I[T]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function O(D,v){return D.add(R(v))}t.j=function(D){if(C(this)||C(D))return p;if(x(this))return x(D)?R(this).j(R(D)):R(R(this).j(D));if(x(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<D.g.length;T++){var A=this.i(E)>>>16,w=this.i(E)&65535,on=D.i(T)>>>16,os=D.i(T)&65535;I[2*E+2*T]+=w*os,L(I,2*E+2*T),I[2*E+2*T+1]+=A*os,L(I,2*E+2*T+1),I[2*E+2*T+1]+=w*on,L(I,2*E+2*T+1),I[2*E+2*T+2]+=A*on,L(I,2*E+2*T+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function L(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function U(D,v){this.g=D,this.h=v}function K(D,v){if(C(v))throw Error("division by zero");if(C(D))return new U(p,p);if(x(D))return v=K(R(D),v),new U(R(v.g),R(v.h));if(x(v))return v=K(D,R(v)),new U(R(v.g),v.h);if(30<D.g.length){if(x(D)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;0>=E.l(D);)I=ve(I),E=ve(E);var T=q(I,1),A=q(E,1);for(E=q(E,2),I=q(I,2);!C(E);){var w=A.add(E);0>=w.l(D)&&(T=T.add(I),A=w),E=q(E,1),I=q(I,1)}return v=O(D,T.j(v)),new U(T,v)}for(T=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=l(I),w=A.j(v);x(w)||0<w.l(D);)I-=E,A=l(I),w=A.j(v);C(A)&&(A=m),T=T.add(A),D=O(D,w)}return new U(T,D)}t.A=function(D){return K(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&D.i(E);return new o(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|D.i(E);return new o(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^D.i(E);return new o(I,this.h^D.h)};function ve(D){for(var v=D.g.length+1,I=[],E=0;E<v;E++)I[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(I,D.h)}function q(D,v){var I=v>>5;v%=32;for(var E=D.g.length-I,T=[],A=0;A<E;A++)T[A]=0<v?D.i(A+I)>>>v|D.i(A+I+1)<<32-v:D.i(A+I);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vp=zD.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,tr=zD.Integer=o}).apply(typeof qD<"u"?qD:typeof self<"u"?self:typeof window<"u"?window:{});var Tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tn={};var Up,tF,Vi,jp,po,bu,Bp,$p,Hp;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tu=="object"&&Tu];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in f))break e;f=f[b]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,g=!1,b={next:function(){if(!g&&f<a.length){var S=f++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,b,S){for(var M=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)M[pe-2]=arguments[pe];return d.prototype[b].apply(g,M)}}function x(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=a.length||0,S=g.length||0;a.length=b+S;for(let M=0;M<S;M++)a[b+M]=g[M]}else a.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(a){return/^[\s\xa0]*$/.test(a)}function U(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function K(a){return K[" "](a),a}K[" "]=function(){};var ve=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function q(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function D(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)a[f]=g[f];for(let S=0;S<I.length;S++)f=I[S],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function T(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function A(a){c.setTimeout(()=>{throw a},0)}function w(){var a=Dl;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class on{constructor(){this.h=this.g=null}add(d,f){let g=os.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var os=new O(()=>new Wb,a=>a.reset());class Wb{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let as,cs=!1,Dl=new on,Km=()=>{let a=c.Promise.resolve(void 0);as=()=>{a.then(Kb)}};var Kb=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(f){A(f)}var d=os;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}cs=!1};function Sn(){this.s=this.s,this.C=this.C}Sn.prototype.s=!1,Sn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Sn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var Qb=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function us(a,d){if(He.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(ve){e:{try{K(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Yb[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&us.aa.h.call(this)}}C(us,He);var Yb={2:"touch",3:"pen",4:"mouse"};us.prototype.h=function(){us.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ls="closure_listenable_"+(1e6*Math.random()|0),Jb=0;function Zb(a,d,f,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++Jb,this.da=this.fa=!1}function Ho(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function qo(a){this.src=a,this.g={},this.h=0}qo.prototype.add=function(a,d,f,g,b){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var M=bl(a,d,g,b);return-1<M?(d=a[M],f||(d.fa=!1)):(d=new Zb(d,this.src,S,!!g,b),d.fa=f,a.push(d)),d};function Tl(a,d){var f=d.type;if(f in a.g){var g=a.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(Ho(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function bl(a,d,f,g){for(var b=0;b<a.length;++b){var S=a[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var Cl="closure_lm_"+(1e6*Math.random()|0),Al={};function Qm(a,d,f,g,b){if(g&&g.once)return Jm(a,d,f,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Qm(a,d[S],f,g,b);return null}return f=xl(f),a&&a[ls]?a.K(d,f,l(g)?!!g.capture:!!g,b):Ym(a,d,f,!1,g,b)}function Ym(a,d,f,g,b,S){if(!d)throw Error("Invalid event type");var M=l(b)?!!b.capture:!!b,pe=Nl(a);if(pe||(a[Cl]=pe=new qo(a)),f=pe.add(d,f,g,M,S),f.proxy)return f;if(g=Xb(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)Qb||(b=M),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(Xm(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Xb(){function a(f){return d.call(a.src,a.listener,f)}let d=eC;return a}function Jm(a,d,f,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Jm(a,d[S],f,g,b);return null}return f=xl(f),a&&a[ls]?a.L(d,f,l(g)?!!g.capture:!!g,b):Ym(a,d,f,!0,g,b)}function Zm(a,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)Zm(a,d[S],f,g,b);else g=l(g)?!!g.capture:!!g,f=xl(f),a&&a[ls]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],f=bl(S,f,g,b),-1<f&&(Ho(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Nl(a))&&(d=a.g[d.toString()],a=-1,d&&(a=bl(d,f,g,b)),(f=-1<a?d[a]:null)&&Sl(f))}function Sl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ls])Tl(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(Xm(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Nl(d))?(Tl(f,a),f.h==0&&(f.src=null,d[Cl]=null)):Ho(a)}}}function Xm(a){return a in Al?Al[a]:Al[a]="on"+a}function eC(a,d){if(a.da)a=!0;else{d=new us(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Sl(a),a=f.call(g,d)}return a}function Nl(a){return a=a[Cl],a instanceof qo?a:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function xl(a){return typeof a=="function"?a:(a[Rl]||(a[Rl]=function(d){return a.handleEvent(d)}),a[Rl])}function qe(){Sn.call(this),this.i=new qo(this),this.M=this,this.F=null}C(qe,Sn),qe.prototype[ls]=!0,qe.prototype.removeEventListener=function(a,d,f,g){Zm(this,a,d,f,g)};function Xe(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new He(d,a);else if(d instanceof He)d.target=d.target||a;else{var b=d;d=new He(g,a),E(d,b)}if(b=!0,f)for(var S=f.length-1;0<=S;S--){var M=d.g=f[S];b=zo(M,g,!0,d)&&b}if(M=d.g=a,b=zo(M,g,!0,d)&&b,b=zo(M,g,!1,d)&&b,f)for(S=0;S<f.length;S++)M=d.g=f[S],b=zo(M,g,!1,d)&&b}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Ho(f[g]);delete a.g[d],a.h--}}this.F=null},qe.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},qe.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function zo(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var M=d[S];if(M&&!M.da&&M.capture==f){var pe=M.listener,$e=M.ha||M.src;M.fa&&Tl(a.i,M),b=pe.call($e,g)!==!1&&b}}return b&&!g.defaultPrevented}function ey(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function ty(a){a.g=ey(()=>{a.g=null,a.i&&(a.i=!1,ty(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class tC extends Sn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ty(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(a){Sn.call(this),this.h=a,this.g={}}C(ds,Sn);var ny=[];function ry(a){q(a.g,function(d,f){this.g.hasOwnProperty(f)&&Sl(d)},a),a.g={}}ds.prototype.N=function(){ds.aa.N.call(this),ry(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pl=c.JSON.stringify,nC=c.JSON.parse,rC=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ml(){}Ml.prototype.h=null;function iy(a){return a.h||(a.h=a.i())}function sy(){}var hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kl(){He.call(this,"d")}C(kl,He);function Ol(){He.call(this,"c")}C(Ol,He);var ur={},oy=null;function Go(){return oy=oy||new qe}ur.La="serverreachability";function ay(a){He.call(this,ur.La,a)}C(ay,He);function fs(a){let d=Go();Xe(d,new ay(d))}ur.STAT_EVENT="statevent";function cy(a,d){He.call(this,ur.STAT_EVENT,a),this.stat=d}C(cy,He);function et(a){let d=Go();Xe(d,new cy(d,a))}ur.Ma="timingevent";function uy(a,d){He.call(this,ur.Ma,a),this.size=d}C(uy,He);function ps(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function gs(){this.g=!0}gs.prototype.xa=function(){this.g=!1};function iC(a,d,f,g,b,S){a.info(function(){if(a.g)if(S)for(var M="",pe=S.split("&"),$e=0;$e<pe.length;$e++){var ae=pe[$e].split("=");if(1<ae.length){var ze=ae[0];ae=ae[1];var Ge=ze.split("_");M=2<=Ge.length&&Ge[1]=="type"?M+(ze+"="+ae+"&"):M+(ze+"=redacted&")}}else M=null;else M=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+M})}function sC(a,d,f,g,b,S,M){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+M})}function Zr(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+aC(a,f)+(g?" "+g:"")})}function oC(a,d){a.info(function(){return"TIMEOUT: "+d})}gs.prototype.info=function(){};function aC(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var M=1;M<b.length;M++)b[M]=""}}}}return Pl(f)}catch{return d}}var Wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ly={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fl;function Ko(){}C(Ko,Ml),Ko.prototype.g=function(){return new XMLHttpRequest},Ko.prototype.i=function(){return{}},Fl=new Ko;function Nn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new ds(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dy}function dy(){this.i=null,this.g="",this.h=!1}var hy={},Ll={};function Vl(a,d,f){a.L=1,a.v=Zo(an(d)),a.m=f,a.P=!0,fy(a,null)}function fy(a,d){a.F=Date.now(),Qo(a),a.A=an(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Ay(f.i,"t",g),a.C=0,f=a.j.J,a.h=new dy,a.g=zy(a.j,f?d:null,!a.m),0<a.O&&(a.M=new tC(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(ny[0]=b.toString()),b=ny);for(var S=0;S<b.length;S++){var M=Qm(f,b[S],g||d.handleEvent,!1,d.h||d);if(!M)break;d.g[M.key]=M}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),fs(),iC(a.i,a.u,a.A,a.l,a.R,a.m)}Nn.prototype.ca=function(a){a=a.target;let d=this.M;d&&cn(a)==3?d.j():this.Y(a)},Nn.prototype.Y=function(a){try{if(a==this.g)e:{let Ge=cn(this.g);var d=this.g.Ba();let ti=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||ky(this.g)))){this.J||Ge!=4||d==7||(d==8||0>=ti?fs(3):fs(2)),Ul(this);var f=this.g.Z();this.X=f;t:if(py(this)){var g=ky(this.g);a="";var b=g.length,S=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),ms(this);var M="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=f==200,sC(this.i,this.u,this.A,this.l,this.R,Ge,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,$e=this.g;if((pe=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(pe)){var ae=pe;break t}}ae=null}if(f=ae)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jl(this,f);else{this.o=!1,this.s=3,et(12),lr(this),ms(this);break e}}if(this.P){f=!0;let Nt;for(;!this.J&&this.C<M.length;)if(Nt=cC(this,M),Nt==Ll){Ge==4&&(this.s=4,et(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==hy){this.s=4,et(15),Zr(this.i,this.l,M,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,Nt,null),jl(this,Nt);if(py(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||M.length!=0||this.h.h||(this.s=1,et(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,M,"[Invalid Chunked Response]"),lr(this),ms(this);else if(0<M.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Gl(ze),ze.M=!0,et(11))}}else Zr(this.i,this.l,M,null),jl(this,M);Ge==4&&lr(this),this.o&&!this.J&&(Ge==4?By(this.j,this):(this.o=!1,Qo(this)))}else bC(this.g),f==400&&0<M.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),lr(this),ms(this)}}}catch{}finally{}};function py(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function cC(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Ll:(f=Number(d.substring(f,g)),isNaN(f)?hy:(g+=1,g+f>d.length?Ll:(d=d.slice(g,g+f),a.C=g+f,d)))}Nn.prototype.cancel=function(){this.J=!0,lr(this)};function Qo(a){a.S=Date.now()+a.I,gy(a,a.I)}function gy(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ps(m(a.ba,a),d)}function Ul(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Nn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(oC(this.i,this.A),this.L!=2&&(fs(),et(17)),lr(this),this.s=2,ms(this)):gy(this,this.S-a)};function ms(a){a.j.G==0||a.J||By(a.j,a)}function lr(a){Ul(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ry(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function jl(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Bl(f.h,a))){if(!a.K&&Bl(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ra(f),ta(f);else break e;zl(f),et(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ps(m(f.Za,f),6e3));if(1>=vy(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else hr(f,11)}else if((a.K||f.g==a)&&ra(f),!L(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ae=b[d];if(f.T=ae[0],ae=ae[1],f.G==2)if(ae[0]=="c"){f.K=ae[1],f.ia=ae[2];let ze=ae[3];ze!=null&&(f.la=ze,f.j.info("VER="+f.la));let Ge=ae[4];Ge!=null&&(f.Aa=Ge,f.j.info("SVER="+f.Aa));let ti=ae[5];ti!=null&&typeof ti=="number"&&0<ti&&(g=1.5*ti,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Nt=a.g;if(Nt){let sa=Nt.g?Nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var S=g.h;S.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&($l(S,S.h),S.h=null))}if(g.D){let Wl=Nt.g?Nt.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(g.ya=Wl,_e(g.I,g.D,Wl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var M=a;if(g.qa=qy(g,g.J?g.ia:null,g.W),M.K){_y(g.h,M);var pe=M,$e=g.L;$e&&(pe.I=$e),pe.B&&(Ul(pe),Qo(pe)),g.g=M}else Uy(g);0<f.i.length&&na(f)}else ae[0]!="stop"&&ae[0]!="close"||hr(f,7);else f.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?hr(f,7):ql(f):ae[0]!="noop"&&f.l&&f.l.ta(ae),f.v=0)}}fs(4)}catch{}}var uC=class{constructor(a,d){this.g=a,this.map=d}};function my(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function vy(a){return a.h?1:a.g?a.g.size:0}function Bl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function $l(a,d){a.g?a.g.add(d):a.h=d}function _y(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}my.prototype.cancel=function(){if(this.i=Iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Iy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return x(a.i)}function lC(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function dC(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function wy(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=dC(a),g=lC(a),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],f&&f[S],a)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hC(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),b=null;if(0<=g){var S=a[f].substring(0,g);b=a[f].substring(g+1)}else S=a[f];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function dr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof dr){this.h=a.h,Yo(this,a.j),this.o=a.o,this.g=a.g,Jo(this,a.s),this.l=a.l;var d=a.i,f=new _s;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Dy(this,f),this.m=a.m}else a&&(d=String(a).match(Ey))?(this.h=!1,Yo(this,d[1]||"",!0),this.o=ys(d[2]||""),this.g=ys(d[3]||"",!0),Jo(this,d[4]),this.l=ys(d[5]||"",!0),Dy(this,d[6]||"",!0),this.m=ys(d[7]||"")):(this.h=!1,this.i=new _s(null,this.h))}dr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(vs(d,Ty,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(vs(d,Ty,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(vs(f,f.charAt(0)=="/"?gC:pC,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",vs(f,yC)),a.join("")};function an(a){return new dr(a)}function Yo(a,d,f){a.j=f?ys(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Jo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Dy(a,d,f){d instanceof _s?(a.i=d,vC(a.i,a.h)):(f||(d=vs(d,mC)),a.i=new _s(d,a.h))}function _e(a,d,f){a.i.set(d,f)}function Zo(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ys(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function vs(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,fC),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ty=/[#\/\?@]/g,pC=/[#\?:]/g,gC=/[#\?]/g,mC=/[#\?@]/g,yC=/#/g;function _s(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Rn(a){a.g||(a.g=new Map,a.h=0,a.i&&hC(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=_s.prototype,t.add=function(a,d){Rn(this),this.i=null,a=Xr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function by(a,d){Rn(a),d=Xr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Cy(a,d){return Rn(a),d=Xr(a,d),a.g.has(d)}t.forEach=function(a,d){Rn(this),this.g.forEach(function(f,g){f.forEach(function(b){a.call(d,b,g,this)},this)},this)},t.na=function(){Rn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=a[g];for(let S=0;S<b.length;S++)f.push(d[g])}return f},t.V=function(a){Rn(this);let d=[];if(typeof a=="string")Cy(this,a)&&(d=d.concat(this.g.get(Xr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Rn(this),this.i=null,a=Xr(this,a),Cy(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Ay(a,d,f){by(a,d),0<f.length&&(a.i=null,a.g.set(Xr(a,d),x(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var b=S;M[g]!==""&&(b+="="+encodeURIComponent(String(M[g]))),a.push(b)}}return this.i=a.join("&")};function Xr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function vC(a,d){d&&!a.j&&(Rn(a),a.i=null,a.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(by(this,g),Ay(this,b,f))},a)),a.j=d}function _C(a,d){let f=new gs;if(c.Image){let g=new Image;g.onload=y(xn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(xn,f,"TestLoadImage: error",!1,d,g),g.onabort=y(xn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(xn,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function IC(a,d){let f=new gs,g=new AbortController,b=setTimeout(()=>{g.abort(),xn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?xn(f,"TestPingServer: ok",!0,d):xn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),xn(f,"TestPingServer: error",!1,d)})}function xn(a,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function wC(){this.g=new rC}function EC(a,d,f){let g=f||"";try{wy(a,function(b,S){let M=b;l(b)&&(M=Pl(b)),d.push(g+S+"="+encodeURIComponent(M))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Is(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Is,Ml),Is.prototype.g=function(){return new Xo(this.l,this.j)},Is.prototype.i=function(a){return function(){return a}}({});function Xo(a,d){qe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Xo,qe),t=Xo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Es(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sy(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sy(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ws(this):Es(this),this.readyState==3&&Sy(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ws(this))},t.Qa=function(a){this.g&&(this.response=a,ws(this))},t.ga=function(){this.g&&ws(this)};function ws(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Es(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Es(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ny(a){let d="";return q(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Hl(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ny(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,d,f))}function De(a){qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(De,qe);var DC=/^https?$/i,TC=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fl.g(),this.v=this.o?iy(this.o):iy(Fl),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){Ry(this,S);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(TC,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,M]of f)this.g.setRequestHeader(S,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{My(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Ry(this,S)}};function Ry(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,xy(a),ea(a)}function xy(a){a.A||(a.A=!0,Xe(a,"complete"),Xe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Xe(this,"complete"),Xe(this,"abort"),ea(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ea(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Py(this):this.bb())},t.bb=function(){Py(this)};function Py(a){if(a.h&&typeof o<"u"&&(!a.v[1]||cn(a)!=4||a.Z()!=2)){if(a.u&&cn(a)==4)ey(a.Ea,0,a);else if(Xe(a,"readystatechange"),cn(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=M===0){var b=String(a.D).match(Ey)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),g=!DC.test(b?b.toLowerCase():"")}f=g}if(f)Xe(a,"complete"),Xe(a,"success");else{a.m=6;try{var S=2<cn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",xy(a)}}finally{ea(a)}}}}function ea(a,d){if(a.g){My(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Xe(a,"ready");try{f.onreadystatechange=g}catch{}}}function My(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function cn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),nC(d)}};function ky(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function bC(a){let d={};a=(a.g&&2<=cn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(L(a[g]))continue;var f=T(a[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Oy(a){this.Aa=0,this.i=[],this.j=new gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,a),this.cb=Ds("retryDelaySeedMs",1e4,a),this.Wa=Ds("forwardChannelMaxRetries",2,a),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new my(a&&a.concurrentRequestLimit),this.Da=new wC,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Oy.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){et(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=qy(this,null,this.W),na(this)};function ql(a){if(Fy(a),a.G==3){var d=a.U++,f=an(a.I);if(_e(f,"SID",a.K),_e(f,"RID",d),_e(f,"TYPE","terminate"),Ts(a,f),d=new Nn(a,a.j,d),d.L=2,d.v=Zo(an(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=zy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qo(d)}Hy(a)}function ta(a){a.g&&(Gl(a),a.g.cancel(),a.g=null)}function Fy(a){ta(a),a.u&&(c.clearTimeout(a.u),a.u=null),ra(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function na(a){if(!yy(a.h)&&!a.s){a.s=!0;var d=a.Ga;as||Km(),cs||(as(),cs=!0),Dl.add(d,a),a.B=0}}function CC(a,d){return vy(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ps(m(a.Ga,a,d),$y(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new Nn(this,this.j,a),S=this.o;if(this.S&&(S?(S=v(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Vy(this,b,d),f=an(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Ts(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(Ny(S)))+"&"+d:this.m&&Hl(f,this.m,S)),$l(this.h,b),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",d),_e(f,"SID","null"),b.T=!0,Vl(b,f,null)):Vl(b,f,d),this.G=2}}else this.G==3&&(a?Ly(this,a):this.i.length==0||yy(this.h)||Ly(this))};function Ly(a,d){var f;d?f=d.l:f=a.U++;let g=an(a.I);_e(g,"SID",a.K),_e(g,"RID",f),_e(g,"AID",a.T),Ts(a,g),a.m&&a.o&&Hl(g,a.m,a.o),f=new Nn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Vy(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),$l(a.h,f),Vl(f,g,d)}function Ts(a,d){a.H&&q(a.H,function(f,g){_e(d,g,f)}),a.l&&wy({},function(f,g){_e(d,g,f)})}function Vy(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var b=a.i;let S=-1;for(;;){let M=["count="+f];S==-1?0<f?(S=b[0].g,M.push("ofs="+S)):S=0:M.push("ofs="+S);let pe=!0;for(let $e=0;$e<f;$e++){let ae=b[$e].g,ze=b[$e].map;if(ae-=S,0>ae)S=Math.max(0,b[$e].g-100),pe=!1;else try{EC(ze,M,"req"+ae+"_")}catch{g&&g(ze)}}if(pe){g=M.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Uy(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;as||Km(),cs||(as(),cs=!0),Dl.add(d,a),a.v=0}}function zl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ps(m(a.Fa,a),$y(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,jy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ps(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),ta(this),jy(this))};function Gl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function jy(a){a.g=new Nn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=an(a.qa);_e(d,"RID","rpc"),_e(d,"SID",a.K),_e(d,"AID",a.T),_e(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(d,"TO",a.ja),_e(d,"TYPE","xmlhttp"),Ts(a,d),a.m&&a.o&&Hl(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Zo(an(d)),f.m=null,f.P=!0,fy(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ta(this),zl(this),et(19))};function ra(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function By(a,d){var f=null;if(a.g==d){ra(a),Gl(a),a.g=null;var g=2}else if(Bl(a.h,d))f=d.D,_y(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;g=Go(),Xe(g,new uy(g,f)),na(a)}else Uy(a);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&CC(a,d)||g==2&&zl(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),b){case 1:hr(a,5);break;case 4:hr(a,10);break;case 3:hr(a,6);break;default:hr(a,2)}}}function $y(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function hr(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let b=!g;g=new dr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yo(g,"https"),Zo(g),b?_C(g.toString(),f):IC(g.toString(),f)}else et(2);a.G=0,a.l&&a.l.sa(d),Hy(a),Fy(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Hy(a){if(a.G=0,a.ka=[],a.l){let d=Iy(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function qy(a,d,f){var g=f instanceof dr?an(f):new dr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Jo(g,g.s);else{var b=c.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new dr(null);g&&Yo(S,g),d&&(S.g=d),b&&Jo(S,b),f&&(S.l=f),g=S}return f=a.D,d=a.ya,f&&d&&_e(g,f,d),_e(g,"VER",a.la),Ts(a,g),g}function zy(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new Is({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gy(){}t=Gy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ia(){}ia.prototype.g=function(a,d){return new dt(a,d)};function dt(a,d){qe.call(this),this.g=new Oy(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!L(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!L(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ei(this)}C(dt,qe),dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){ql(this.g)},dt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Pl(a),a=f);d.i.push(new uC(d.Ya++,a)),d.G==3&&na(d)},dt.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,dt.aa.N.call(this)};function Wy(a){kl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(Wy,kl);function Ky(){Ol.call(this),this.status=1}C(Ky,Ol);function ei(a){this.g=a}C(ei,Gy),ei.prototype.ua=function(){Xe(this.g,"a")},ei.prototype.ta=function(a){Xe(this.g,new Wy(a))},ei.prototype.sa=function(a){Xe(this.g,new Ky)},ei.prototype.ra=function(){Xe(this.g,"b")},ia.prototype.createWebChannel=ia.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,Hp=Tn.createWebChannelTransport=function(){return new ia},$p=Tn.getStatEventTarget=function(){return Go()},Bp=Tn.Event=ur,bu=Tn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,po=Tn.ErrorCode=Wo,ly.COMPLETE="complete",jp=Tn.EventType=ly,sy.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Vi=Tn.WebChannel=sy,tF=Tn.FetchXmlHttpFactory=Is,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,Up=Tn.XhrIo=De}).apply(typeof Tu<"u"?Tu:typeof self<"u"?self:typeof window<"u"?window:{});var GD="@firebase/firestore";var Be=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");var rs="10.14.0";var Hr=new Kn("@firebase/firestore");function go(){return Hr.logLevel}function F(t,...e){if(Hr.logLevel<=ne.DEBUG){let n=e.map(bm);Hr.debug(`Firestore (${rs}): ${t}`,...n)}}function bn(t,...e){if(Hr.logLevel<=ne.ERROR){let n=e.map(bm);Hr.error(`Firestore (${rs}): ${t}`,...n)}}function zi(t,...e){if(Hr.logLevel<=ne.WARN){let n=e.map(bm);Hr.warn(`Firestore (${rs}): ${t}`,...n)}}function bm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t="Unexpected state"){let e=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+t;throw bn(e),new Error(e)}function he(t,e){t||B()}function H(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends _t{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ut=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ru=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Be.UNAUTHENTICATED))}shutdown(){}},Qp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Yp=class{constructor(e){this.t=e,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ut,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ut)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new Ru(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Be(e)}},Jp=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Zp=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Jp(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Be.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eg=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){he(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new Xp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function nF(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var xu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=nF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function Gi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ve=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var W=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ve(0,0))}static max(){return new t(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ee=class t extends Pu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},rF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class t extends Pu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return rF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new k(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new k(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var V=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ee.fromString(e))}static fromName(e){return new t(Ee.fromString(e).popFirst(5))}static empty(){return new t(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ee(e.slice()))}};var tg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};tg.UNKNOWN_ID=-1;function iF(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new qr(i,V.empty(),e)}function sF(t){return new qr(t.readTime,t.key,-1)}var qr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(W.min(),V.empty(),-1)}static max(){return new t(W.max(),V.empty(),-1)}};function oF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var aF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ng=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Lo(t){return _(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==aF)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++c,c===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function cF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(t){return t.name==="IndexedDbTransactionError"}var AT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function ul(t){return t==null}function wo(t){return t===0&&1/t==-1/0}function uF(t){return typeof t=="number"&&Number.isInteger(t)&&!wo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var lF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rG=[...lF,"documentOverlays"],dF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hF=dF,fF=[...hF,"indexConfiguration","indexState","indexEntries"];var iG=[...fF,"globals"];function WD(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ST(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Se=class t{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $i(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $i(this.root,e,this.comparator,!1)}getReverseIterator(){return new $i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $i(this.root,e,this.comparator,!0)}},$i=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class t{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mu(this.data.getIterator())}getIteratorFrom(e){return new Mu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Mu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var St=class t{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ye(wt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ku=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ku("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var pF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(t){if(he(!!t),typeof t=="string"){let e=0,n=pF.exec(t);if(he(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:we(t.seconds),nanos:we(t.nanos)}}function we(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}function Cm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Am(t){let e=t.mapValue.fields.__previous_value__;return Cm(e)?Am(e):e}function Eo(t){let e=Cn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var rg=class{constructor(e,n,r,i,s,o,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},Ou=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Cu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:RT(t)?9007199254740991:NT(t)?10:11:B()}function rn(t,e){if(t===e)return!0;let n=zr(t);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eo(t).isEqual(Eo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Cn(i.timestampValue),c=Cn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return rr(i.bytesValue).isEqual(rr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return we(i.geoPointValue.latitude)===we(s.geoPointValue.latitude)&&we(i.geoPointValue.longitude)===we(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return we(i.integerValue)===we(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=we(i.doubleValue),c=we(s.doubleValue);return o===c?wo(o)===wo(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(WD(o)!==WD(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!rn(o[u],c[u])))return!1;return!0}(t,e);default:return B()}}function Do(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function Wi(t,e){if(t===e)return 0;let n=zr(t),r=zr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=we(s.integerValue||s.doubleValue),u=we(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return KD(t.timestampValue,e.timestampValue);case 4:return KD(Eo(t),Eo(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){let c=rr(s),u=rr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ce(c[l],u[l]);if(h!==0)return h}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ce(we(s.latitude),we(o.latitude));return c!==0?c:ce(we(s.longitude),we(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return QD(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,l,h;let p=s.fields||{},m=o.fields||{},y=(c=p.value)===null||c===void 0?void 0:c.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,x=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:QD(y,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cu.mapValue&&o===Cu.mapValue)return 0;if(s===Cu.mapValue)return 1;if(o===Cu.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ce(u[p],h[p]);if(m!==0)return m;let y=Wi(c[u[p]],l[h[p]]);if(y!==0)return y}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw B()}}function KD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=Cn(t),r=Cn(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function QD(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Wi(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Ki(t){return ig(t)}function ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Cn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return V.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=ig(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ig(n.fields[o])}`;return i+"}"}(t.mapValue):B()}function YD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sg(t){return!!t&&"integerValue"in t}function Sm(t){return!!t&&"arrayValue"in t}function JD(t){return!!t&&"nullValue"in t}function ZD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Su(t){return!!t&&"mapValue"in t}function NT(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Yr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var It=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=yo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Su(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(yo(this.value))}};function xT(t){let e=[];return Yr(t.fields,(n,r)=>{let i=new wt([n]);if(Su(r)){let s=xT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new St(e)}var jt=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,W.min(),W.min(),W.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,W.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,W.min(),W.min(),It.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,W.min(),W.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qi=class{constructor(e,n){this.position=e,this.inclusive=n}};function XD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=V.comparator(V.fromName(o.referenceValue),n.key):r=Wi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}var Gr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function gF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Fu=class{},Fe=class t extends Fu{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ag(e,n,r):n==="array-contains"?new lg(e,r):n==="in"?new dg(e,r):n==="not-in"?new hg(e,r):n==="array-contains-any"?new fg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cg(e,r):new ug(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wi(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(Wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Bt=class t extends Fu{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return PT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function PT(t){return t.op==="and"}function MT(t){return mF(t)&&PT(t)}function mF(t){for(let e of t.filters)if(e instanceof Bt)return!1;return!0}function og(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Ki(t.value);if(MT(t))return t.filters.map(e=>og(e)).join(",");{let e=t.filters.map(n=>og(n)).join(",");return`${t.op}(${e})`}}function kT(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&rn(r.value,i.value)}(t,e):t instanceof Bt?function(r,i){return i instanceof Bt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&kT(o,i.filters[c]),!0):!1}(t,e):void B()}function OT(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`}(t):t instanceof Bt?function(n){return n.op.toString()+" {"+n.getFilters().map(OT).join(" ,")+"}"}(t):"Filter"}var ag=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.matchesComparison(n)}},cg=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=FT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ug=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=FT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function FT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}var lg=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Sm(n)&&Do(n.arrayValue,this.value)}},dg=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Do(this.value.arrayValue,n)}},hg=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Do(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Do(this.value.arrayValue,n)}},fg=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Do(this.value.arrayValue,r))}};var pg=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function tT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pg(t,e,n,r,i,s,o)}function Nm(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>og(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ki(r)).join(",")),e.ue=n}return e.ue}function Rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eT(t.startAt,e.startAt)&&eT(t.endAt,e.endAt)}function gg(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ir=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function yF(t,e,n,r,i,s,o,c){return new ir(t,e,n,r,i,s,o,c)}function ll(t){return new ir(t)}function nT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function LT(t){return t.collectionGroup!==null}function vo(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Gr(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new Gr(wt.keyField(),r))}return e.ce}function en(t){let e=H(t);return e.le||(e.le=vF(e,vo(t))),e.le}function vF(t,e){if(t.limitType==="F")return tT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Gr(i.field,s)});let n=t.endAt?new Qi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qi(t.startAt.position,t.startAt.inclusive):null;return tT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mg(t,e){let n=t.filters.concat([e]);return new ir(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yg(t,e,n){return new ir(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dl(t,e){return Rm(en(t),en(e))&&t.limitType===e.limitType}function VT(t){return`${Nm(en(t))}|lt:${t.limitType}`}function Ui(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>OT(i)).join(", ")}]`),ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ki(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ki(i)).join(",")),`Target(${r})`}(en(t))}; limitType=${t.limitType})`}function hl(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):V.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of vo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let l=XD(o,c,u);return o.inclusive?l<=0:l<0}(r.startAt,vo(r),i)||r.endAt&&!function(o,c,u){let l=XD(o,c,u);return o.inclusive?l>=0:l>0}(r.endAt,vo(r),i))}(t,e)}function _F(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UT(t){return(e,n)=>{let r=!1;for(let i of vo(t)){let s=IF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function IF(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),l=c.data.field(s);return u!==null&&l!==null?Wi(u,l):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return ST(this.inner)}size(){return this.innerSize}};var wF=new Se(V.comparator);function An(){return wF}var jT=new Se(V.comparator);function mo(...t){let e=jT;for(let n of t)e=e.insert(n.key,n);return e}function BT(t){let e=jT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jr(){return _o()}function $T(){return _o()}function _o(){return new sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var EF=new Se(V.comparator),DF=new Ye(V.comparator);function re(...t){let e=DF;for(let n of t)e=e.add(n);return e}var TF=new Ye(ce);function bF(){return TF}function xm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wo(e)?"-0":e}}function HT(t){return{integerValue:""+t}}function CF(t,e){return uF(e)?HT(e):xm(t,e)}var Yi=class{constructor(){this._=void 0}};function AF(t,e,n){return t instanceof Ji?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cm(s)&&(s=Am(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Wr?zT(t,e):t instanceof Kr?GT(t,e):function(i,s){let o=qT(i,s),c=rT(o)+rT(i.Pe);return sg(o)&&sg(i.Pe)?HT(c):xm(i.serializer,c)}(t,e)}function SF(t,e,n){return t instanceof Wr?zT(t,e):t instanceof Kr?GT(t,e):n}function qT(t,e){return t instanceof Zi?function(r){return sg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ji=class extends Yi{},Wr=class extends Yi{constructor(e){super(),this.elements=e}};function zT(t,e){let n=WT(e);for(let r of t.elements)n.some(i=>rn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Kr=class extends Yi{constructor(e){super(),this.elements=e}};function GT(t,e){let n=WT(e);for(let r of t.elements)n=n.filter(i=>!rn(i,r));return{arrayValue:{values:n}}}var Zi=class extends Yi{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function rT(t){return we(t.integerValue||t.doubleValue)}function WT(t){return Sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wr&&i instanceof Wr||r instanceof Kr&&i instanceof Kr?Gi(r.elements,i.elements,rn):r instanceof Zi&&i instanceof Zi?rn(r.Pe,i.Pe):r instanceof Ji&&i instanceof Ji}(t.transform,e.transform)}var vg=class{constructor(e,n){this.version=e,this.transformResults=n}},tn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Xi=class{};function KT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new To(t.key,tn.none()):new Qr(t.key,t.data,tn.none());{let n=t.data,r=It.empty(),i=new Ye(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new sn(t.key,r,new St(i.toArray()),tn.none())}}function RF(t,e,n){t instanceof Qr?function(i,s,o){let c=i.value.clone(),u=sT(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof sn?function(i,s,o){if(!Nu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=sT(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(QT(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Io(t,e,n,r){return t instanceof Qr?function(s,o,c,u){if(!Nu(s.precondition,o))return c;let l=s.value.clone(),h=oT(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof sn?function(s,o,c,u){if(!Nu(s.precondition,o))return c;let l=oT(s.fieldTransforms,u,o),h=o.data;return h.setAll(QT(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return Nu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function xF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=qT(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function iT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gi(r,i,(s,o)=>NF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Qr=class extends Xi{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},sn=class extends Xi{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function QT(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function sT(t,e,n){let r=new Map;he(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,SF(o,c,n[i]))}return r}function oT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,AF(s,o,e))}return r}var To=class extends Xi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_g=class extends Xi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ig=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&RF(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=$T();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=KT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(n,r)=>iT(n,r))&&Gi(this.baseMutations,e.baseMutations,(n,r)=>iT(n,r))}},wg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length);let i=function(){return EF}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Eg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,se;function PF(t){switch(t){default:return B();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function YT(t){if(t===void 0)return bn("GRPC error has no .code"),N.UNKNOWN;switch(t){case ke.OK:return N.OK;case ke.CANCELLED:return N.CANCELLED;case ke.UNKNOWN:return N.UNKNOWN;case ke.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ke.INTERNAL:return N.INTERNAL;case ke.UNAVAILABLE:return N.UNAVAILABLE;case ke.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ke.NOT_FOUND:return N.NOT_FOUND;case ke.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ke.ABORTED:return N.ABORTED;case ke.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ke.DATA_LOSS:return N.DATA_LOSS;default:return B()}}(se=ke||(ke={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var aT=null;function MF(){return new TextEncoder}var kF=new tr([4294967295,4294967295],0);function cT(t){let e=MF().encode(t),n=new Vp;return n.update(e),new Uint8Array(n.digest())}function uT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tr([n,r],0),new tr([i,s],0)]}var Tg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Br(`Invalid padding: ${n}`);if(r<0)throw new Br(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Br(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Br(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=tr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(tr.fromNumber(r)));return i.compare(kF)===1&&(i=new tr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=cT(e),[r,i]=uT(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=cT(e),[r,i]=uT(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Br=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,bo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(W.min(),i,new Se(ce),An(),re())}},bo=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,re(),re(),re())}};var Hi=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Vu=class{constructor(e,n){this.targetId=e,this.me=n}},Uu=class{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ju=class{constructor(){this.fe=0,this.ge=dT(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B()}}),new bo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},bg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=An(),this.qe=lT(),this.Qe=new Se(ce)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(gg(s))if(r===0){let o=new V(s.path);this.Ue(n,o,jt.newNoDocument(o,W.min()))}else he(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}aT?.et(function(h,p,m,y,C){var x,R,O,L,U,K;let ve={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},q=p.unchangedNames;return q&&(ve.bloomFilter={applied:C===0,hashCount:(x=q?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(L=(O=(R=q?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&L!==void 0?L:0,padding:(K=(U=q?.bits)===null||U===void 0?void 0:U.padding)!==null&&K!==void 0?K:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),ve}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=rr(r).toUint8Array()}catch(u){if(u instanceof ku)return zi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Tg(o,i,s)}catch(u){return zi(u instanceof Br?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&gg(c.target)){let u=new V(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,jt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=re();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Lu(e,n,this.Qe,this.ke,r);return this.ke=An(),this.qe=lT(),this.Qe=new Se(ce),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ju,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(ce),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ju),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function lT(){return new Se(V.comparator)}function dT(){return new Se(V.comparator)}var OF={asc:"ASCENDING",desc:"DESCENDING"},FF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LF={and:"AND",or:"OR"},Cg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ag(t,e){return t.useProto3Json||ul(e)?e:{value:e}}function Bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VF(t,e){return Bu(t,e.toTimestamp())}function nn(t){return he(!!t),W.fromTimestamp(function(n){let r=Cn(n);return new Ve(r.seconds,r.nanos)}(t))}function Pm(t,e){return Sg(t,e).canonicalString()}function Sg(t,e){let n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZT(t){let e=Ee.fromString(t);return he(rb(e)),e}function Ng(t,e){return Pm(t.databaseId,e.path)}function qp(t,e){let n=ZT(e);if(n.get(1)!==t.databaseId.projectId)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(eb(n))}function XT(t,e){return Pm(t.databaseId,e)}function UF(t){let e=ZT(t);return e.length===4?Ee.emptyPath():eb(e)}function Rg(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eb(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hT(t,e,n){return{name:Ng(t,e),fields:n.value.mapValue.fields}}function jF(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(he(h===void 0||typeof h=="string"),Ze.fromBase64String(h||"")):(he(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ze.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(l){let h=l.code===void 0?N.UNKNOWN:YT(l.code);return new k(h,l.message||"")}(o);n=new Uu(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qp(t,r.document.name),s=nn(r.document.updateTime),o=r.document.createTime?nn(r.document.createTime):W.min(),c=new It({mapValue:{fields:r.document.fields}}),u=jt.newFoundDocument(i,s,o,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Hi(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qp(t,r.document),s=r.readTime?nn(r.readTime):W.min(),o=jt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Hi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qp(t,r.document),s=r.removedTargetIds||[];n=new Hi([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Dg(i,s),c=r.targetId;n=new Vu(c,o)}}return n}function BF(t,e){let n;if(e instanceof Qr)n={update:hT(t,e.key,e.value)};else if(e instanceof To)n={delete:Ng(t,e.key)};else if(e instanceof sn)n={update:hT(t,e.key,e.data),updateMask:YF(e.fieldMask)};else{if(!(e instanceof _g))return B();n={verify:Ng(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Ji)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Kr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zi)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:VF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function $F(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?nn(i.updateTime):nn(s);return o.isEqual(W.min())&&(o=nn(s)),new vg(o,i.transformResults||[])}(n,e))):[]}function HF(t,e){return{documents:[XT(t,e.path)]}}function qF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XT(t,i);let s=function(l){if(l.length!==0)return nb(Bt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ji(m.field),direction:WF(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=Ag(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function zF(t){let e=UF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){he(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=tb(p);return m instanceof Bt&&MT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new Gr(Bi(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,ul(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Qi(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Qi(y,m)}(n.endAt)),yF(e,i,o,s,c,"F",u,l)}function GF(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Bi(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Bi(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Bi(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Bi(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Bi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bt.create(n.compositeFilter.filters.map(r=>tb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(n.compositeFilter.op))}(t):B()}function WF(t){return OF[t]}function KF(t){return FF[t]}function QF(t){return LF[t]}function ji(t){return{fieldPath:t.canonicalString()}}function Bi(t){return wt.fromServerFormat(t.fieldPath)}function nb(t){return t instanceof Fe?function(n){if(n.op==="=="){if(ZD(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NAN"}};if(JD(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZD(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NOT_NAN"}};if(JD(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ji(n.field),op:KF(n.op),value:n.value}}}(t):t instanceof Bt?function(n){let r=n.getFilters().map(i=>nb(i));return r.length===1?r[0]:{compositeFilter:{op:QF(n.op),filters:r}}}(t):B()}function YF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Co=class t{constructor(e,n,r,i,s=W.min(),o=W.min(),c=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xg=class{constructor(e){this.ct=e}};function JF(t){let e=zF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yg(e,e.limit,"L"):e}var $u=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(we(e.integerValue));else if("doubleValue"in e){let r=we(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),wo(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Cn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(rr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?RT(e)?this.dt(n,Number.MAX_SAFE_INTEGER):NT(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):B()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(we(c)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),V.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};$u.vt=new $u;var Pg=class{constructor(){this.un=new Mg}addToCollectionParentIndex(e,n){return this.un.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(qr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Mg=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ee.comparator)).toArray()}};var oG=new Uint8Array(0);var Zt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(41943040,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);var Ao=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var kg=class{constructor(){this.changes=new sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Og=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Fg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Io(r.mutation,i,St.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){let i=jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=mo();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=An(),o=_o(),c=function(){return _o()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof sn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Io(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):o.set(l.key,St.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new Og(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=_o(),i=new Se((o,c)=>o-c),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||St.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||re()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=$T();h.forEach(m=>{if(!s.has(m)){let y=KT(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return V.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(jr()),c=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,re())).next(h=>({batchId:c,changes:BT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=mo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=mo();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,u=>{let l=function(p,m){return new ir(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,jt.newInvalidDocument(h)))});let c=mo();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Io(h.mutation,l,St.empty(),Ve.now()),hl(n,l)&&(c=c.insert(u,l))}),c})}};var Lg=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return P.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:JF(i.bundledQuery),readTime:nn(i.readTime)}}(n)),P.resolve()}};var Vg=class{constructor(){this.overlays=new Se(V.comparator),this.Ir=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=jr();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=jr(),s=n.length+1,o=new V(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Se((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=jr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=jr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return P.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Eg(n,r));let s=this.Ir.get(n);s===void 0&&(s=re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Ug=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var So=class{constructor(){this.Tr=new Ye(Oe.Er),this.dr=new Ye(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Oe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Oe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new V(new Ee([])),r=new Oe(n,e),i=new Oe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new V(new Ee([])),r=new Oe(n,e),i=new Oe(n,e+1),s=re();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Oe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return V.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||V.comparator(e.key,n.key)}};var jg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Oe.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ig(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Oe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Oe(n,0),i=new Oe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ce);return n.forEach(i=>{let s=new Oe(i,0),o=new Oe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;V.isDocumentKey(s)||(s=s.child(""));let o=new Oe(new V(s),0),c=new Ye(ce);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.wr)),!0)},o),P.resolve(this.Cr(c))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(n.mutations,i=>{let s=new Oe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Oe(n,0),i=this.br.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Bg=class{constructor(e){this.Mr=e,this.docs=function(){return new Se(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=An();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=An(),o=n.path,c=new V(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||oF(sF(h),r)<=0||(i.has(h.key)||hl(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){B()}Or(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $g(this)}getSize(e){return P.resolve(this.size)}},$g=class extends kg{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Hg=class{constructor(e){this.persistence=e,this.Nr=new sr(n=>Nm(n),Rm),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Lr=0,this.Br=new So,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),P.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Kn(n),P.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Br.containsKey(n))}};var qg=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new AT(0),this.Kr=!1,this.Kr=!0,this.$r=new Ug,this.referenceDelegate=e(this),this.Ur=new Hg(this),this.indexManager=new Pg,this.remoteDocumentCache=function(i){return new Bg(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xg(n),this.Gr=new Lg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vg,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new jg(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new zg(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},zg=class extends ng{constructor(e){super(),this.currentSequenceNumber=e}},Gg=class t{constructor(e){this.persistence=e,this.Jr=new So,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw B()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=V.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,W.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return P.or([()=>P.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Wg=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=re(),i=re();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Kg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bE()?8:cF(je())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Kg;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(go()<=ne.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ui(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(go()<=ne.DEBUG&&F("QueryEngine","Query:",Ui(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(go()<=ne.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ui(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):P.resolve())}Yi(e,n){if(nT(n))return P.resolve(null);let r=en(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=yg(n,null,"F"),r=en(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=re(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,c);return this.ns(n,l,o,u.readTime)?this.Yi(e,yg(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return nT(n)||i.isEqual(W.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?P.resolve(null):(go()<=ne.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ui(n)),this.rs(e,o,n,iF(i,-1)).next(c=>c))})}ts(e,n){let r=new Ye(UT(e));return n.forEach((i,s)=>{hl(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return go()<=ne.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ui(n)),this.Ji.getDocumentsMatchingQuery(e,n,qr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Yg=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Se(ce),this._s=new sr(s=>Nm(s),Rm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function ZF(t,e,n,r){return new Yg(t,e,n,r)}function ib(t,e){return _(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=re();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:c}))})})})}function XF(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(x=>{let R=l.docVersions.get(C);he(R!==null),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=re();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sb(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eL(t,e){let n=H(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ze.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(x,R,O){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,h)&&c.push(n.Ur.updateTargetData(s,y))});let u=An(),l=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(tL(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(W.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(h)}return P.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function tL(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=An();return n.forEach((c,u)=>{let l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function nL(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rL(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Co(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Jg(t,e,n){return _(this,null,function*(){let r=H(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Vo(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function fT(t,e,n){let r=H(t),i=W.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=H(u),m=p._s.get(h);return m!==void 0?P.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,en(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:W.min(),n?s:re())).next(c=>(iL(r,_F(e),c),{documents:c,Ts:s})))}function iL(t,e,n){let r=t.us.get(e)||W.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Hu=class{constructor(){this.activeTargetIds=bF()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Zg=class{constructor(){this.so=new Hu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Xg=class{_o(e){}shutdown(){}};var qu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Au=null;function zp(){return Au===null?Au=function(){return 268435456+Math.round(2147483648*Math.random())}():Au++,"0x"+Au.toString(16)}var sL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var em=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Qe="WebChannelConnection",tm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let c=zp(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(F("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw zi("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=sL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=zp();return new Promise((o,c)=>{let u=new Up;u.setWithCredentials(!0),u.listenOnce(jp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case po.NO_ERROR:let h=u.getResponseJson();F(Qe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case po.TIMEOUT:F(Qe,`RPC '${e}' ${s} timed out`),c(new k(N.DEADLINE_EXCEEDED,"Request time out"));break;case po.HTTP_ERROR:let p=u.getStatus();if(F(Qe,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let C=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(O)>=0?O:N.UNKNOWN}(y.status);c(new k(C,y.message))}else c(new k(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new k(N.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{F(Qe,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(Qe,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=zp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hp(),c=$p(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(Qe,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,C=new em({Io:R=>{y?F(Qe,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(Qe,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(Qe,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),x=(R,O,L)=>{R.listen(O,U=>{try{L(U)}catch(K){setTimeout(()=>{throw K},0)}})};return x(p,Vi.EventType.OPEN,()=>{y||(F(Qe,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),x(p,Vi.EventType.CLOSE,()=>{y||(y=!0,F(Qe,`RPC '${e}' stream ${i} transport closed`),C.So())}),x(p,Vi.EventType.ERROR,R=>{y||(y=!0,zi(Qe,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new k(N.UNAVAILABLE,"The operation could not be completed")))}),x(p,Vi.EventType.MESSAGE,R=>{var O;if(!y){let L=R.data[0];he(!!L);let U=L,K=U.error||((O=U[0])===null||O===void 0?void 0:O.error);if(K){F(Qe,`RPC '${e}' stream ${i} received error:`,K);let ve=K.status,q=function(I){let E=ke[I];if(E!==void 0)return YT(E)}(ve),D=K.message;q===void 0&&(q=N.INTERNAL,D="Unknown error status: "+ve+" with message "+K.message),y=!0,C.So(new k(q,D)),p.close()}else F(Qe,`RPC '${e}' stream ${i} received:`,L),C.bo(L)}}),x(c,Bp.STAT_EVENT,R=>{R.stat===bu.PROXY?F(Qe,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===bu.NOPROXY&&F(Qe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Gp(){return typeof document<"u"?document:null}function fl(t){return new Cg(t,!0)}var zu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Gu=class{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zu(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(bn(n.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nm=class extends Gu{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=jF(this.serializer,e),r=function(s){if(!("targetChange"in s))return W.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?nn(o.readTime):W.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Rg(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=gg(u)?{documents:HF(s,u)}:{query:qF(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=JT(s,o.resumeToken);let l=Ag(s,o.expectedCount);l!==null&&(c.expectedCount=l)}else if(o.snapshotVersion.compareTo(W.min())>0){c.readTime=Bu(s,o.snapshotVersion.toTimestamp());let l=Ag(s,o.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=GF(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Rg(this.serializer),n.removeTarget=e,this.a_(n)}},rm=class extends Gu{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=$F(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Rg(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>BF(this.serializer,r))};this.a_(n)}};var im=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Sg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(N.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Sg(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},sm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bn(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var om=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){Jr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=H(u);l.L_.add(4),yield Uo(l),l.q_.set("Unknown"),l.L_.delete(4),yield pl(l)})}(this))}))}),this.q_=new sm(r,i)}};function pl(t){return _(this,null,function*(){if(Jr(t))for(let e of t.B_)yield e(!0)})}function Uo(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function ob(t,e){let n=H(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fm(n)?Om(n):is(n).r_()&&km(n,e))}function Mm(t,e){let n=H(t),r=is(n);n.N_.delete(e),r.r_()&&ab(n,e),n.N_.size===0&&(r.r_()?r.o_():Jr(n)&&n.q_.set("Unknown"))}function km(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}is(t).A_(e)}function ab(t,e){t.Q_.xe(e),is(t).R_(e)}function Om(t){t.Q_=new bg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),is(t).start(),t.q_.v_()}function Fm(t){return Jr(t)&&!is(t).n_()&&t.N_.size>0}function Jr(t){return H(t).L_.size===0}function cb(t){t.Q_=void 0}function oL(t){return _(this,null,function*(){t.q_.set("Online")})}function aL(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{km(t,e)})})}function cL(t,e){return _(this,null,function*(){cb(t),Fm(t)?(t.q_.M_(e),Om(t)):t.q_.set("Unknown")})}function uL(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof Uu&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wu(t,r)}else if(e instanceof Hi?t.Q_.Ke(e):e instanceof Vu?t.Q_.He(e):t.Q_.We(e),!n.isEqual(W.min()))try{let r=yield sb(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),ab(s,u);let p=new Co(h.target,u,l,h.sequenceNumber);km(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Wu(t,r)}})}function Wu(t,e,n){return _(this,null,function*(){if(!Vo(e))throw e;t.L_.add(1),yield Uo(t),t.q_.set("Offline"),n||(n=()=>sb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield pl(t)}))})}function ub(t,e){return e().catch(n=>Wu(t,n,e))}function gl(t){return _(this,null,function*(){let e=H(t),n=or(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lL(e);)try{let i=yield nL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,dL(e,i)}catch(i){yield Wu(e,i)}lb(e)&&db(e)})}function lL(t){return Jr(t)&&t.O_.length<10}function dL(t,e){t.O_.push(e);let n=or(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lb(t){return Jr(t)&&!or(t).n_()&&t.O_.length>0}function db(t){or(t).start()}function hL(t){return _(this,null,function*(){or(t).p_()})}function fL(t){return _(this,null,function*(){let e=or(t);for(let n of t.O_)e.m_(n.mutations)})}function pL(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=wg.from(r,e,n);yield ub(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield gl(t)})}function gL(t,e){return _(this,null,function*(){e&&or(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return PF(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();or(r).s_(),yield ub(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield gl(r)}})}(t,e)),lb(t)&&db(t)})}function pT(t,e){return _(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Jr(n);n.L_.add(3),yield Uo(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield pl(n)})}function mL(t,e){return _(this,null,function*(){let n=H(t);e?(n.L_.delete(2),yield pl(n)):e||(n.L_.add(2),yield Uo(n),n.q_.set("Unknown"))})}function is(t){return t.K_||(t.K_=function(n,r,i){let s=H(n);return s.w_(),new nm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:oL.bind(null,t),Ro:aL.bind(null,t),mo:cL.bind(null,t),d_:uL.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),Fm(t)?Om(t):t.q_.set("Unknown")):(yield t.K_.stop(),cb(t))}))),t.K_}function or(t){return t.U_||(t.U_=function(n,r,i){let s=H(n);return s.w_(),new rm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hL.bind(null,t),mo:gL.bind(null,t),f_:fL.bind(null,t),g_:pL.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield gl(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var am=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Lm(t,e){if(bn("AsyncQueue",`${e}: ${t}`),Vo(t))return new k(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Ku=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=mo(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Qu=class{constructor(){this.W_=new Se(V.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):B():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},es=class t{constructor(e,n,r,i,s,o,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,Ku.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var cm=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},um=class{constructor(){this.queries=gT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=H(n),s=i.queries;i.queries=gT(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new k(N.ABORTED,"Firestore shutting down"))}};function gT(){return new sr(t=>VT(t),dl)}function Vm(t,e){return _(this,null,function*(){let n=H(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new cm,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=Lm(o,`Initialization of query '${Ui(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&jm(n)})}function Um(t,e){return _(this,null,function*(){let n=H(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function yL(t,e){let n=H(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&jm(n)}function vL(t,e,n){let r=H(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function jm(t){t.Y_.forEach(e=>{e.next()})}var lm,mT;(mT=lm||(lm={})).ea="default",mT.Cache="cache";var No=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lm.Cache}};var Yu=class{constructor(e){this.key=e}},Ju=class{constructor(e){this.key=e}},dm=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=UT(e),this.Ra=new Ku(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Qu,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=hl(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==x&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(y?(o=o.add(y),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,C){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return x(y)-x(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new es(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ju(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Yu(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return es.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},hm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},fm=class{constructor(e){this.key=e,this.va=!1}},pm=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sr(c=>VT(c),dl),this.Ma=new Map,this.xa=new Set,this.Oa=new Se(V.comparator),this.Na=new Map,this.La=new So,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function _L(t,e,n=!0){return _(this,null,function*(){let r=yb(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield hb(r,e,n,!0),i})}function IL(t,e){return _(this,null,function*(){let n=yb(t);yield hb(n,e,!0,!1)})}function hb(t,e,n,r){return _(this,null,function*(){let i=yield rL(t.localStore,en(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),c;return r&&(c=yield wL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ob(t.remoteStore,i),c})}function wL(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,y)=>function(x,R,O,L){return _(this,null,function*(){let U=R.view.ma(O);U.ns&&(U=yield fT(x.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,U)));let K=L&&L.targetChanges.get(R.targetId),ve=L&&L.targetMismatches.get(R.targetId)!=null,q=R.view.applyChanges(U,x.isPrimaryClient,K,ve);return vT(x,R.targetId,q.wa),q.snapshot})}(t,p,m,y);let s=yield fT(t.localStore,e,!0),o=new dm(e,s.Ts),c=o.ma(s.documents),u=bo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(c,t.isPrimaryClient,u);vT(t,n,l.wa);let h=new hm(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function EL(t,e,n){return _(this,null,function*(){let r=H(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!dl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Jg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mm(r.remoteStore,i.targetId),gm(r,i.targetId)}).catch(Lo))):(gm(r,i.targetId),yield Jg(r.localStore,i.targetId,!0))})}function DL(t,e){return _(this,null,function*(){let n=H(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mm(n.remoteStore,r.targetId))})}function TL(t,e,n){return _(this,null,function*(){let r=xL(t);try{let i=yield function(o,c){let u=H(o),l=Ve.now(),h=c.reduce((y,C)=>y.add(C.key),re()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=An(),x=re();return u.cs.getEntries(y,h).next(R=>{C=R,C.forEach((O,L)=>{L.isValidDocument()||(x=x.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let O=[];for(let L of c){let U=xF(L,p.get(L.key).overlayedDocument);U!=null&&O.push(new sn(L.key,U,xT(U.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,c)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:BT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Se(ce)),l=l.insert(c,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield jo(r,i.changes),yield gl(r.remoteStore)}catch(i){let s=Lm(i,"Failed to persist write");n.reject(s)}})}function fb(t,e){return _(this,null,function*(){let n=H(t);try{let r=yield eL(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?he(o.va):i.removedDocuments.size>0&&(he(o.va),o.va=!1))}),yield jo(n,r,e)}catch(r){yield Lo(r)}})}function yT(t,e,n){let r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=H(o);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(c)&&(l=!0)}),l&&jm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bL(t,e,n){return _(this,null,function*(){let r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Se(V.comparator);o=o.insert(s,jt.newNoDocument(s,W.min()));let c=re().add(s),u=new Lu(W.min(),new Map,new Se(ce),o,c);yield fb(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Bm(r)}else yield Jg(r.localStore,e,!1).then(()=>gm(r,e,n)).catch(Lo)})}function CL(t,e){return _(this,null,function*(){let n=H(t),r=e.batch.batchId;try{let i=yield XF(n.localStore,e);gb(n,r,null),pb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield jo(n,i)}catch(i){yield Lo(i)}})}function AL(t,e,n){return _(this,null,function*(){let r=H(t);try{let i=yield function(o,c){let u=H(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(he(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);gb(r,e,n),pb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield jo(r,i)}catch(i){yield Lo(i)}})}function pb(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gb(t,e,n){let r=H(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function gm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mb(t,r)})}function mb(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Mm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Bm(t))}function vT(t,e,n){for(let r of n)r instanceof Yu?(t.La.addReference(r.key,e),SL(t,r)):r instanceof Ju?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mb(t,r.key)):B()}function SL(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),Bm(t))}function Bm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new V(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new fm(n)),t.Oa=t.Oa.insert(n,r),ob(t.remoteStore,new Co(en(ll(n.path)),r,"TargetPurposeLimboResolution",AT.oe))}}function jo(t,e,n){return _(this,null,function*(){let r=H(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Wg.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=H(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Vo(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),C=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,x)}}})}(r.localStore,s))})}function NL(t,e){return _(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield ib(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new k(N.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jo(n,r.hs)}})}function RL(t,e){let n=H(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function yb(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bL.bind(null,e),e.Ca.d_=yL.bind(null,e.eventManager),e.Ca.$a=vL.bind(null,e.eventManager),e}function xL(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AL.bind(null,e),e}var _T=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=fl(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return ZF(this.persistence,new Qg,n.initialUser,this.serializer)}Ga(n){return new qg(Gg.Zr,this.serializer)}Wa(n){return new Zg}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var PL=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NL.bind(null,this.syncEngine),yield mL(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new um}()}createDatastore(n){let r=fl(n.databaseInfo.databaseId),i=function(o){return new tm(o)}(n.databaseInfo);return function(o,c,u,l){return new im(o,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,c,u){return new om(i,s,o,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>yT(this.syncEngine,r,0),function(){return qu.D()?new qu:new Xg}())}createSyncEngine(n,r){return function(s,o,c,u,l,h,p){let m=new pm(s,o,c,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=H(s);F("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Uo(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Ro=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var mm=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Be.UNAUTHENTICATED,this.clientId=xu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Lm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wp(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield ib(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function IT(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield ML(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pT(e.remoteStore,i)),t._onlineComponents=e})}function ML(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wp(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zi("Error using user provided cache. Falling back to memory cache: "+n),yield Wp(t,new _T)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Wp(t,new _T);return t._offlineComponents})}function vb(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield IT(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield IT(t,new PL))),t._onlineComponents})}function kL(t){return vb(t).then(e=>e.syncEngine)}function Zu(t){return _(this,null,function*(){let e=yield vb(t),n=e.eventManager;return n.onListen=_L.bind(null,e.syncEngine),n.onUnlisten=EL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DL.bind(null,e.syncEngine),n})}function OL(t,e,n={}){let r=new Ut;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,c,u,l){let h=new Ro({next:m=>{h.Za(),o.enqueueAndForget(()=>Um(s,p));let y=m.docs.has(c);!y&&m.fromCache?l.reject(new k(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new No(ll(c.path),h,{includeMetadataChanges:!0,_a:!0});return Vm(s,p)}(yield Zu(t),t.asyncQueue,e,n,r)})),r.promise}function FL(t,e,n={}){let r=new Ut;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,c,u,l){let h=new Ro({next:m=>{h.Za(),o.enqueueAndForget(()=>Um(s,p)),m.fromCache&&u.source==="server"?l.reject(new k(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new No(c,h,{includeMetadataChanges:!0,_a:!0});return Vm(s,p)}(yield Zu(t),t.asyncQueue,e,n,r)})),r.promise}function _b(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var wT=new Map;function Ib(t,e,n){if(!n)throw new k(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LL(t,e,n,r){if(e===!0&&r===!0)throw new k(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ET(t){if(!V.isDocumentKey(t))throw new k(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DT(t){if(V.isDocumentKey(t))throw new k(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ml(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ml(t);throw new k(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Xu=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_b((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ts=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xu(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kp;switch(r.type){case"firstParty":return new Zp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=wT.get(n);r&&(F("ComponentProvider","Removing Datastore"),wT.delete(n),r.terminate())}(this),Promise.resolve()}};function wb(t,e,n,r={}){var i;let s=(t=lt(t,ts))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Be.MOCK_USER;else{c=_E(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Be(l)}t._authCredentials=new Qp(new Ru(c,u))}}var ar=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Je=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},nr=class t extends ar{constructor(e,n,r){super(e,n,ll(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new V(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Eb(t,e,...n){if(t=Ae(t),Ib("collection","path",e),t instanceof ts){let r=Ee.fromString(e,...n);return DT(r),new nr(t,null,r)}{if(!(t instanceof Je||t instanceof nr))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return DT(r),new nr(t.firestore,null,r)}}function $m(t,e,...n){if(t=Ae(t),arguments.length===1&&(e=xu.newId()),Ib("doc","path",e),t instanceof ts){let r=Ee.fromString(e,...n);return ET(r),new Je(t,null,new V(r))}{if(!(t instanceof Je||t instanceof nr))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return ET(r),new Je(t.firestore,t instanceof nr?t.converter:null,new V(r))}}var el=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zu(this,"async_queue_retry"),this.Vu=()=>{let r=Gp();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Ut;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vo(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw bn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=am.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&B()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function TT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var $t=class extends ts{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new el,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new el(e),this._firestoreClient=void 0,yield e}})}};function Db(t,e){let n=typeof t=="object"?t:Pr(),r=typeof t=="string"?t:e||"(default)",i=eo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=vE("firestore");s&&wb(i,...s)}return i}function yl(t){if(t._terminated)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VL(t),t._firestoreClient}function VL(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,l,h){return new rg(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_b(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new mm(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var xo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ze.fromBase64String(e))}catch(n){throw new k(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ns=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Po=class{constructor(e){this._methodName=e}};var Mo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var ko=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var UL=/^__.*__$/,ym=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qr(e,this.data,n,this.fieldTransforms)}},tl=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Tb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var vm=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Tb(this.Cu)&&UL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},_m=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fl(e)}Qu(e,n,r,i=!1){return new vm({Cu:e,methodName:n,qu:r,path:wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vl(t){let e=t._freezeSettings(),n=fl(t._databaseId);return new _m(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bb(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Hm("Data must be an object, but it was:",o,r);let c=Cb(r,o),u,l;if(s.merge)u=new St(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Im(e,p,n);if(!o.contains(m))throw new k(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Sb(h,m)||h.push(m)}u=new St(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new ym(new It(c),u,l)}var nl=class t extends Po{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function jL(t,e,n,r){let i=t.Qu(1,e,n);Hm("Data must be an object, but it was:",i,r);let s=[],o=It.empty();Yr(r,(u,l)=>{let h=qm(e,u,n);l=Ae(l);let p=i.Nu(h);if(l instanceof nl)s.push(h);else{let m=Bo(l,p);m!=null&&(s.push(h),o.set(h,m))}});let c=new St(s);return new tl(o,c,i.fieldTransforms)}function BL(t,e,n,r,i,s){let o=t.Qu(1,e,n),c=[Im(e,r,n)],u=[i];if(s.length%2!=0)throw new k(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)c.push(Im(e,s[m])),u.push(s[m+1]);let l=[],h=It.empty();for(let m=c.length-1;m>=0;--m)if(!Sb(l,c[m])){let y=c[m],C=u[m];C=Ae(C);let x=o.Nu(y);if(C instanceof nl)l.push(y);else{let R=Bo(C,x);R!=null&&(l.push(y),h.set(y,R))}}let p=new St(l);return new tl(h,p,o.fieldTransforms)}function $L(t,e,n,r=!1){return Bo(n,t.Qu(r?4:3,e))}function Bo(t,e){if(Ab(t=Ae(t)))return Hm("Unsupported field value:",e,t),Cb(t,e);if(t instanceof Po)return function(r,i){if(!Tb(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=Bo(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ve.fromDate(r);return{timestampValue:Bu(i.serializer,s)}}if(r instanceof Ve){let s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bu(i.serializer,s)}}if(r instanceof Mo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xo)return{bytesValue:JT(i.serializer,r._byteString)};if(r instanceof Je){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ko)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return xm(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ml(r)}`)}(t,e)}function Cb(t,e){let n={};return ST(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(t,(r,i)=>{let s=Bo(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Ab(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Mo||t instanceof xo||t instanceof Je||t instanceof Po||t instanceof ko)}function Hm(t,e,n){if(!Ab(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ml(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Im(t,e,n){if((e=Ae(e))instanceof ns)return e._internalPath;if(typeof e=="string")return qm(t,e);throw rl("Field path arguments must be of type string or ",t,!1,void 0,n)}var HL=new RegExp("[~\\*/\\[\\]]");function qm(t,e,n){if(e.search(HL)>=0)throw rl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ns(...e.split("."))._internalPath}catch{throw rl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rl(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new k(N.INVALID_ARGUMENT,c+t+u)}function Sb(t,e){return t.some(n=>n.isEqual(e))}var il=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(_l("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},wm=class extends il{data(){return super.data()}};function _l(t,e){return typeof e=="string"?qm(t,e):e instanceof ns?e._internalPath:e._delegate._internalPath}function Nb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Oo=class{},sl=class extends Oo{};function Rb(t,e,...n){let r=[];e instanceof Oo&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof Em).length,c=s.filter(u=>u instanceof ol).length;if(o>1||o>0&&c>0)throw new k(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ol=class t extends sl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Mb(e._query,n),new ar(e.firestore,e.converter,mg(e._query,n))}_parse(e){let n=vl(e.firestore);return function(s,o,c,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){CT(p,h);let y=[];for(let C of p)y.push(bT(u,s,C));m={arrayValue:{values:y}}}else m=bT(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||CT(p,h),m=$L(c,o,p,h==="in"||h==="not-in");return Fe.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function xb(t,e,n){let r=e,i=_l("where",t);return ol._create(i,r,n)}var Em=class t extends Oo{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)Mb(o,u),o=mg(o,u)}(e._query,n),new ar(e.firestore,e.converter,mg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Dm=class t extends sl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new k(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gr(s,o)}(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new ir(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function Pb(t,e="asc"){let n=e,r=_l("orderBy",t);return Dm._create(r,n)}function bT(t,e,n){if(typeof(n=Ae(n))=="string"){if(n==="")throw new k(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LT(e)&&n.indexOf("/")!==-1)throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ee.fromString(n));if(!V.isDocumentKey(r))throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return YD(t,new V(r))}if(n instanceof Je)return YD(t,n._key);throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ml(n)}.`)}function CT(t,e){if(!Array.isArray(t)||t.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mb(t,e){let n=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Tm=class{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Yr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>we(o.doubleValue));return new ko(s)}convertGeoPoint(e){return new Mo(we(e.latitude),we(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eo(e));default:return null}}convertTimestamp(e){let n=Cn(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ee.fromString(e);he(rb(r));let i=new Ou(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||bn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function kb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var $r=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},al=class extends il{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new qi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(_l("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},qi=class extends al{data(e={}){return super.data(e)}},cl=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $r(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qi(this._firestore,this._userDataWriter,r.key,r,new $r(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new qi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new $r(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new qi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new $r(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:qL(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function qL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function Ob(t){t=lt(t,Je);let e=lt(t.firestore,$t);return OL(yl(e),t._key).then(n=>$b(e,t,n))}var Fo=class extends Tm{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}};function Fb(t){t=lt(t,ar);let e=lt(t.firestore,$t),n=yl(e),r=new Fo(e);return Nb(t._query),FL(n,t._query).then(i=>new cl(e,r,t,i))}function Lb(t,e,n){t=lt(t,Je);let r=lt(t.firestore,$t),i=kb(t.converter,e,n);return Il(r,[bb(vl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,tn.none())])}function Vb(t,e,n,...r){t=lt(t,Je);let i=lt(t.firestore,$t),s=vl(i),o;return o=typeof(e=Ae(e))=="string"||e instanceof ns?BL(s,"updateDoc",t._key,e,n,r):jL(s,"updateDoc",t._key,e),Il(i,[o.toMutation(t._key,tn.exists(!0))])}function Ub(t){return Il(lt(t.firestore,$t),[new To(t._key,tn.none())])}function jb(t,e){let n=lt(t.firestore,$t),r=$m(t),i=kb(t.converter,e);return Il(n,[bb(vl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function Bb(t,...e){var n,r,i;t=Ae(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||TT(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(TT(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Je)l=lt(t.firestore,$t),h=ll(t._key.path),u={next:p=>{e[o]&&e[o]($b(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=lt(t,ar);l=lt(p.firestore,$t),h=p._query;let m=new Fo(l);u={next:y=>{e[o]&&e[o](new cl(l,m,p,y))},error:e[o+1],complete:e[o+2]},Nb(t._query)}return function(m,y,C,x){let R=new Ro(x),O=new No(y,R,C);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Vm(yield Zu(m),O)})),()=>{R.Za(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Um(yield Zu(m),O)}))}}(yl(l),h,c,u)}function Il(t,e){return function(r,i){let s=new Ut;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return TL(yield kL(r),i,s)})),s.promise}(yl(t),e)}function $b(t,e,n){let r=n.docs.get(e._key),i=new Fo(t);return new al(t,i,e._key,r,new $r(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){rs=i})(Jn),Yn(new At("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new $t(new Yp(r.getProvider("auth-internal")),new eg(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Me(GD,"4.7.3",e),Me(GD,"4.7.3","esm2017")})();var $o=class{constructor(t){return t}},Hb="firestore",GL=class{constructor(){return no(Hb)}};var zm=new te("angularfire2.firestore-instances");function WL(t,e){let n=nu(Hb,t,e);return n&&new $o(n)}function KL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $o(r)}}var QL={provide:GL,deps:[[new gt,zm]]},YL={provide:$o,useFactory:WL,deps:[[new gt,zm],Or]};function I9(t,...e){return Me("angularfire",kr.full,"fst"),Nr([YL,QL,{provide:zm,useFactory:KL(t),multi:!0,deps:[be,pt,ki,ro,[new gt,Mp],[new gt,ru],...e]}])}var D9=Ie(jb,!0);var wl=Ie(Eb,!0);var qb=Ie(Ub,!0);var cr=Ie($m,!0);var zb=Ie(Ob,!0);var El=Ie(Fb,!0);var T9=Ie(Db,!0);var b9=Ie(Bb,!0);var C9=Ie(Pb,!0);var Gm=Ie(Rb,!0);var ss=Ie(Lb,!0);var A9=Ie(Vb,!0);var Wm=Ie(xb,!0);function ZL(t){if(t&&typeof t=="object"){let e=Ue({},t);return e.createdAt&&e.createdAt instanceof Ve&&(e.createdAt=e.createdAt.toDate()),e}return t}var Gb=class t{constructor(e,n){this.auth=e;this.firestore=n;this.user$=$D(this.auth),this.user$.subscribe(r=>{console.log("AuthService: Authentication state changed:",r?"User logged in":"No user")})}user$;login(e,n){return _(this,null,function*(){try{let r=yield this.findUserByUsername(e);if(!r)throw new Error("Gebruiker niet gevonden");if(r.needsAuthAccount){console.log("Creating Firebase Auth account for user:",e);let i=yield Op(this.auth,r.email||"",n);console.log("Firebase Auth user created:",i.user.uid);let s=cr(this.firestore,"users",e);yield ss(s,We(Ue({},r),{uid:i.user.uid,needsAuthAccount:!1}),{merge:!0}),console.log("User Firebase Auth account created and document updated")}else yield Fp(this.auth,r.email||"",n);return r.needsPasswordChange?(console.log("User needs to change password"),{needsPasswordChange:!0}):{needsPasswordChange:!1}}catch(r){throw r}})}logout(){return _(this,null,function*(){try{yield HD(this.auth)}catch(e){throw e}})}createUser(e){return _(this,null,function*(){try{if(console.log("Creating user:",e.username),yield this.findUserByUsername(e.username))throw new Error("Gebruikersnaam bestaat al");let r=Date.now(),i=Math.random().toString(36).substr(2,9),s=e.email||`${e.username}_${r}_${i}@example.com`;console.log("Using unique email:",s);let o=yield Op(this.auth,s,e.password);console.log("Firebase Auth user created:",o.user.uid);let c=cr(this.firestore,"users",e.username),u={username:e.username,email:s,displayName:e.displayName||e.username,role:e.role,createdAt:new Date,uid:o.user.uid};console.log("Creating Firestore document:",u),yield ss(c,u),console.log("User created successfully")}catch(n){throw console.error("Error creating user:",n),n}})}createUserAsAdmin(e){return _(this,null,function*(){try{if(console.log("Creating user as admin:",e.username),yield this.findUserByUsername(e.username))throw new Error("Gebruikersnaam bestaat al");let r=Date.now(),i=Math.random().toString(36).substr(2,9),s=e.email||`${e.username}_${r}_${i}@example.com`;console.log("Using unique email:",s);let o=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,c=cr(this.firestore,"users",e.username),u={username:e.username,email:s,displayName:e.displayName||e.username,role:e.role,createdAt:new Date,uid:o,needsAuthAccount:!0,needsPasswordChange:!0};console.log("Creating Firestore document:",u),yield ss(c,u),console.log("User created successfully as admin - Firestore document only")}catch(n){throw console.error("Error creating user as admin:",n),n}})}findUserByUsername(e){return _(this,null,function*(){let n=wl(this.firestore,"users"),r=Gm(n,Wm("username","==",e)),i=yield El(r);if(!i.empty){let s=i.docs[0];return We(Ue({},s.data()),{uid:s.id})}return null})}getUserData(e){let n=cr(this.firestore,"users",e);return new G(r=>{zb(n).then(i=>{i.exists()?r.next(Ue({uid:e},i.data())):r.next(null),r.complete()}).catch(i=>{r.error(i)})})}getUserDataByUsername(e){return new G(n=>{this.findUserByUsername(e).then(r=>{n.next(r),n.complete()}).catch(r=>{n.error(r)})})}getCurrentUserData(){return this.user$.pipe(Ra(e=>e?this.getUserDataByEmail(e.email||""):new G(n=>{n.next(null),n.complete()})))}getUserDataByEmail(e){let n=wl(this.firestore,"users"),r=Gm(n,Wm("email","==",e));return new G(i=>{El(r).then(s=>{if(s.empty)i.next(null);else{let o=s.docs[0];i.next(We(Ue({},o.data()),{uid:o.id}))}i.complete()}).catch(s=>{i.error(s)})})}isAdmin(){return this.getCurrentUserData().pipe(ft(e=>e?.role==="admin"||!1))}isLoggedIn(){return this.user$.pipe(ft(e=>!!e))}deleteUser(e){return _(this,null,function*(){try{if(console.log("Deleting user:",e),!(yield this.findUserByUsername(e)))throw new Error("Gebruiker niet gevonden");let r=cr(this.firestore,"users",e);yield qb(r),console.log("Firestore document deleted"),console.log("User deleted successfully")}catch(n){throw console.error("Error deleting user:",n),n}})}changePassword(e,n){return _(this,null,function*(){try{console.log("Changing password for current user");let r=this.auth.currentUser;if(!r)throw new Error("Geen gebruiker ingelogd");yield Fp(this.auth,r.email||"",e),yield Lp(r,n),console.log("Password updated in Firebase Auth");let i=yield this.getCurrentUserData().toPromise();if(i){let s=cr(this.firestore,"users",i.username);yield ss(s,{needsPasswordChange:!1},{merge:!0}),console.log("User document updated - password change flag removed")}console.log("Password changed successfully")}catch(r){throw console.error("Error changing password:",r),r}})}changePasswordFirstTime(e){return _(this,null,function*(){try{console.log("Changing password for first time");let n=this.auth.currentUser;if(!n)throw new Error("Geen gebruiker ingelogd");yield Lp(n,e),console.log("Password updated in Firebase Auth");let r=yield this.getUserDataByEmail(n.email||"").toPromise();if(r){let i=cr(this.firestore,"users",r.username);yield ss(i,{needsPasswordChange:!1},{merge:!0}),console.log("User document updated - password change flag removed")}else throw console.error("User data not found for email:",n.email),new Error("Gebruikersgegevens niet gevonden");console.log("Password changed successfully")}catch(n){throw console.error("Error changing password:",n),n}})}getAllUsers(){let e=wl(this.firestore,"users");return new G(n=>{El(e).then(r=>{let i=[];r.forEach(s=>{let o=ZL(s.data());i.push(We(Ue({},o),{username:s.id,uid:o.uid}))}),n.next(i),n.complete()}).catch(r=>{n.error(r)})})}static \u0275fac=function(n){return new(n||t)(Ne(fo),Ne($o))};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})};export{Ue as a,We as b,XL as c,_ as d,Re as e,OC as f,G as g,od as h,ad as i,Ln as j,xs as k,Cs as l,un as m,Tv as n,nA as o,vA as p,vr as q,lA as r,ft as s,ZC as t,yr as u,id as v,Sa as w,_A as x,IA as y,Rs as z,hv as A,eA as B,Ns as C,da as D,tA as E,iA as F,bv as G,sd as H,sA as I,oA as J,aA as K,Ra as L,cA as M,cd as N,ie as O,A_ as P,fe as Q,N_ as R,RH as S,te as T,X as U,Ne as V,ee as W,gt as X,BA as Y,Ls as Z,xH as _,$_ as $,Sh as aa,Nr as ba,J_ as ca,Hn as da,PH as ea,iI as fa,MH as ga,kH as ha,OH as ia,FH as ja,LH as ka,oS as la,pt as ma,Rc as na,zt as oa,be as pa,Di as qa,zh as ra,VH as sa,UH as ta,DS as ua,Gs as va,jH as wa,BH as xa,fc as ya,$H as za,ot as Aa,HH as Ba,yc as Ca,Nw as Da,Lc as Ea,WH as Fa,_R as Ga,bR as Ha,ch as Ia,CR as Ja,PR as Ka,OR as La,UR as Ma,ZR as Na,Vw as Oa,XR as Pa,KH as Qa,qw as Ra,zw as Sa,dx as Ta,QH as Ua,_x as Va,YH as Wa,JH as Xa,ZH as Ya,Dx as Za,Ww as _a,Tx as $a,bx as ab,XH as bb,Cx as cb,eq as db,tq as eb,nq as fb,rq as gb,iq as hb,sq as ib,Vc as jb,Fx as kb,Lx as lb,Uc as mb,oq as nb,aq as ob,sf as pb,cq as qb,nP as rb,uq as sb,af as tb,lq as ub,uf as vb,Mq as wb,tE as xb,wf as yb,kq as zb,Yc as Ab,iP as Bb,Oq as Cb,sP as Db,Fq as Eb,Lq as Fb,Vq as Gb,Uq as Hb,jq as Ib,Bq as Jb,$q as Kb,Hq as Lb,GP as Mb,qq as Nb,zq as Ob,cE as Pb,Fz as Qb,Uz as Rb,fo as Sb,L4 as Tb,j4 as Ub,H4 as Vb,$o as Wb,I9 as Xb,D9 as Yb,wl as Zb,qb as _b,cr as $b,El as ac,T9 as bc,b9 as cc,C9 as dc,Gm as ec,A9 as fc,Wm as gc,Gb as hc};
