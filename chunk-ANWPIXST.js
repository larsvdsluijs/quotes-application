import{a as j,b as L}from"./chunk-4MP26IH7.js";import{c as A,e as F}from"./chunk-V5UMPPQC.js";import{Cb as k,Db as Q,Fb as U,Ha as g,Hb as $,Ib as M,Ka as d,La as N,Oa as i,Pa as n,Qa as c,Ra as b,Sa as x,Ta as p,Va as s,Wa as S,Xa as m,Ya as O,_ as V,bb as C,cb as I,d as v,eb as E,ec as q,fa as D,ga as f,ha as h,ia as u,ja as _,na as T,xa as a,ya as w}from"./chunk-WXRRZLAK.js";function Y(o,t){o&1&&(i(0,"div",17)(1,"div",18),u(),i(2,"svg",19),c(3,"circle",20)(4,"path",21),n(),s(5," Stemdetails laden... "),n()())}function J(o,t){o&1&&(i(0,"div",37),s(1," Nog geen ja stemmen "),n())}function W(o,t){if(o&1&&(i(0,"div",38),s(1),n()),o&2){let e=t.$implicit;a(),m(" \u2022 ",e.displayName||e.username," ")}}function K(o,t){o&1&&(i(0,"div",39),s(1," Nog geen nee stemmen "),n())}function X(o,t){if(o&1&&(i(0,"div",40),s(1),n()),o&2){let e=t.$implicit;a(),m(" \u2022 ",e.displayName||e.username," ")}}function Z(o,t){if(o&1&&(i(0,"div",9)(1,"div")(2,"h4",22),u(),i(3,"svg",23),c(4,"path",24),n(),s(5),n(),_(),i(6,"div",25),g(7,J,2,0,"div",26)(8,W,2,1,"div",27),n()(),i(9,"div")(10,"h4",28),u(),i(11,"svg",23),c(12,"path",29),n(),s(13),n(),_(),i(14,"div",30),g(15,K,2,0,"div",31)(16,X,2,1,"div",32),n()(),i(17,"div",33)(18,"div",34)(19,"div",35)(20,"span"),s(21,"Totaal gestemd:"),n(),i(22,"span",36),s(23),n()(),i(24,"div",35)(25,"span"),s(26,"Goedkeuring:"),n(),i(27,"span",36),s(28),n()()()()()),o&2){let e=p(2);a(5),m(" Ja stemmen (",e.yesVoters.length,") "),a(2),d("ngIf",e.yesVoters.length===0),a(),d("ngForOf",e.yesVoters),a(5),m(" Nee stemmen (",e.noVoters.length,") "),a(2),d("ngIf",e.noVoters.length===0),a(),d("ngForOf",e.noVoters),a(7),S(e.totalVotes),a(5),m("",e.approvalPercentage,"%")}}function ee(o,t){if(o&1){let e=b();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),s(5,"Stemdetails"),n(),i(6,"button",6),x("click",function(){f(e);let l=p();return h(l.onClose())}),u(),i(7,"svg",7),c(8,"path",8),n()()(),_(),i(9,"div",9)(10,"div",10)(11,"blockquote",11),s(12),n(),i(13,"p",12),s(14),n()(),g(15,Y,6,0,"div",13)(16,Z,29,8,"div",14),i(17,"div",15)(18,"button",16),x("click",function(){f(e);let l=p();return h(l.onClose())}),s(19," Sluiten "),n()()()()()()}if(o&2){let e=p();a(12),m(' "',e.quote==null?null:e.quote.text,'" '),a(2),m("\u2014 ",e.quote==null?null:e.quote.author,""),a(),d("ngIf",e.loading),a(),d("ngIf",!e.loading)}}var P=class o{constructor(t){this.authService=t}show=!1;quote=null;closed=new T;loading=!1;yesVoters=[];noVoters=[];totalVotes=0;approvalPercentage=0;ngOnChanges(){this.show&&this.quote&&this.loadVoteDetails()}loadVoteDetails(){return v(this,null,function*(){this.loading=!0;try{let t=yield this.authService.getAllUsers().toPromise();if(this.quote&&this.quote.votes){let e=this.quote.votes.filter(l=>l.vote==="yes").map(l=>l.userId),r=this.quote.votes.filter(l=>l.vote==="no").map(l=>l.userId);this.yesVoters=t?.filter(l=>e.includes(l.uid))||[],this.noVoters=t?.filter(l=>r.includes(l.uid))||[],this.totalVotes=this.quote.votes.length,this.approvalPercentage=this.totalVotes>0?Math.round(this.yesVoters.length/this.totalVotes*100):0}}catch(t){console.error("Error loading vote details:",t)}finally{this.loading=!1}})}onClose(){this.closed.emit(),this.resetData()}resetData(){this.yesVoters=[],this.noVoters=[],this.totalVotes=0,this.approvalPercentage=0,this.loading=!1}static \u0275fac=function(e){return new(e||o)(w(q))};static \u0275cmp=V({type:o,selectors:[["app-vote-details-modal"]],inputs:{show:"show",quote:"quote"},outputs:{closed:"closed"},standalone:!0,features:[D,C],decls:1,vars:1,consts:[["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4"],[1,"bg-gray-50","p-3","rounded-md"],[1,"text-sm","text-gray-700","italic"],[1,"text-xs","text-gray-500","mt-1"],["class","text-center py-4",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"flex","justify-end"],[1,"bg-gray-300","hover:bg-gray-400","text-gray-800","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-200",3,"click"],[1,"text-center","py-4"],[1,"inline-flex","items-center","px-3","py-1","text-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-indigo-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-medium","text-green-700","mb-2","flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","mr-1"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"bg-green-50","border","border-green-200","rounded-md","p-3"],["class","text-sm text-green-600",4,"ngIf"],["class","text-sm text-green-800 mb-1",4,"ngFor","ngForOf"],[1,"text-sm","font-medium","text-red-700","mb-2","flex","items-center"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"bg-red-50","border","border-red-200","rounded-md","p-3"],["class","text-sm text-red-600",4,"ngIf"],["class","text-sm text-red-800 mb-1",4,"ngFor","ngForOf"],[1,"bg-gray-50","border","border-gray-200","rounded-md","p-3"],[1,"text-sm","text-gray-700"],[1,"flex","justify-between"],[1,"font-medium"],[1,"text-sm","text-green-600"],[1,"text-sm","text-green-800","mb-1"],[1,"text-sm","text-red-600"],[1,"text-sm","text-red-800","mb-1"]],template:function(e,r){e&1&&g(0,ee,20,4,"div",0),e&2&&d("ngIf",r.show)},dependencies:[M,k,Q],encapsulation:2})};function te(o,t){o&1&&(i(0,"div",9)(1,"div",10),u(),i(2,"svg",11),c(3,"circle",12)(4,"path",13),n(),s(5," Quotes laden... "),n()())}function ie(o,t){if(o&1&&(i(0,"p",39),s(1),n()),o&2){let e=p().$implicit;a(),S(e.category)}}function ne(o,t){if(o&1&&(i(0,"p",39),s(1),I(2,"date"),n()),o&2){let e=p().$implicit;a(),S(E(2,1,e.date,"shortDate"))}}function oe(o,t){o&1&&(u(),i(0,"svg",40),c(1,"circle",12)(2,"path",13),n())}function re(o,t){o&1&&(u(),i(0,"svg",40),c(1,"circle",12)(2,"path",13),n())}function ae(o,t){if(o&1){let e=b();i(0,"div",16)(1,"div",17)(2,"blockquote",18),s(3),n(),i(4,"div",19)(5,"p",20),s(6),n(),g(7,ie,2,1,"p",21)(8,ne,3,4,"p",21),i(9,"p",22),s(10),I(11,"date"),n()(),i(12,"div",23)(13,"div",24)(14,"span",25),s(15),n(),i(16,"span",26),s(17),n()(),i(18,"div",27)(19,"div",28),c(20,"div",29),n(),i(21,"p",30),s(22),I(23,"number"),n(),i(24,"p",30),s(25),n()(),i(26,"button",31),x("click",function(){let l=f(e).$implicit,y=p(2);return h(y.openVoteDetails(l))}),u(),i(27,"svg",32),c(28,"path",33)(29,"path",34),n(),s(30," Bekijk stemmen "),n()(),_(),i(31,"div",35)(32,"button",36),x("click",function(){let l=f(e).$implicit,y=p(2);return h(y.voteOnQuote(l.id,"yes"))}),g(33,oe,3,0,"svg",37),s(34," Ja "),n(),i(35,"button",38),x("click",function(){let l=f(e).$implicit,y=p(2);return h(y.voteOnQuote(l.id,"no"))}),g(36,re,3,0,"svg",37),s(37," Nee "),n()()()()}if(o&2){let e=t.$implicit,r=p(2);a(3),m(' "',e.text,'" '),a(3),m("\u2014 ",e.author,""),a(),d("ngIf",e.category),a(),d("ngIf",e.date),a(2),m(" Toegevoegd op ",E(11,16,e.createdAt,"shortDate")," "),a(5),m(" Ja: ",r.getYesVotes(e)," "),a(2),m(" Nee: ",r.getNoVotes(e)," "),a(3),N("width",r.getApprovalPercentage(e),"%"),a(2),m(" ",E(23,19,r.getApprovalPercentage(e),"1.0-0"),"% goedkeuring "),a(3),O(" ",r.getTotalVotes(e)," van ",r.totalUsers," gebruikers hebben gestemd "),a(7),d("disabled",r.voting),a(),d("ngIf",r.voting),a(2),d("disabled",r.voting),a(),d("ngIf",r.voting)}}function se(o,t){if(o&1&&(i(0,"div",14),g(1,ae,38,22,"div",15),n()),o&2){let e=p();a(),d("ngForOf",e.quotes)}}function le(o,t){if(o&1){let e=b();i(0,"div",9),u(),i(1,"svg",41),c(2,"path",42),n(),_(),i(3,"h3",43),s(4,"Geen pending quotes"),n(),i(5,"p",44),s(6,"Er zijn momenteel geen quotes die wachten op goedkeuring."),n(),i(7,"div",45)(8,"button",46),x("click",function(){f(e);let l=p();return h(l.router.navigate(["/add-quote"]))}),u(),i(9,"svg",47),c(10,"path",48),n(),s(11," Quote toevoegen "),n()()()}}var z=class o{constructor(t,e,r){this.quoteService=t;this.authService=e;this.router=r;this.currentUser$=this.authService.getCurrentUserData(),this.isAdmin$=this.authService.isAdmin(),this.isLoggedIn$=this.authService.isLoggedIn()}quotes=[];loading=!0;voting=!1;mobileMenuOpen=!1;currentUser$;isAdmin$;isLoggedIn$;totalUsers=0;selectedQuote=null;showVoteDetailsModal=!1;ngOnInit(){this.loadQuotes(),this.getTotalUsers().then(t=>this.totalUsers=t)}loadQuotes(){this.quoteService.getPendingQuotes().subscribe({next:t=>{this.quotes=t,this.loading=!1},error:t=>{console.error("Error loading pending quotes:",t),this.loading=!1}})}voteOnQuote(t,e){return v(this,null,function*(){this.voting=!0;try{yield this.quoteService.voteOnQuote(t,e)}catch(r){console.error("Error voting on quote:",r)}finally{this.voting=!1}})}getYesVotes(t){return t.votes.filter(e=>e.vote==="yes").length}getNoVotes(t){return t.votes.filter(e=>e.vote==="no").length}getApprovalPercentage(t){let e=this.getYesVotes(t),r=(t.votes||[]).length;return r>0?e/r*100:0}getTotalVotes(t){return(t.votes||[]).length}getTotalUsers(){return v(this,null,function*(){try{return yield this.quoteService.getTotalUsersCount()}catch(t){return console.error("Error getting total users:",t),1}})}hasVoted(t){return v(this,null,function*(){let e=yield this.authService.user$.pipe().toPromise();return t.votes.some(r=>r.userId===e?.uid)})}hasVotedYes(t){return v(this,null,function*(){let e=yield this.authService.user$.pipe().toPromise();return t.votes.some(r=>r.userId===e?.uid&&r.vote==="yes")})}hasVotedNo(t){return v(this,null,function*(){let e=yield this.authService.user$.pipe().toPromise();return t.votes.some(r=>r.userId===e?.uid&&r.vote==="no")})}logout(){return v(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/login"])})}openVoteDetails(t){this.selectedQuote=t,this.showVoteDetailsModal=!0}closeVoteDetails(){this.selectedQuote=null,this.showVoteDetailsModal=!1}static \u0275fac=function(e){return new(e||o)(w(L),w(q),w(A))};static \u0275cmp=V({type:o,selectors:[["app-pending-quotes"]],standalone:!0,features:[C],decls:13,vars:5,consts:[[1,"min-h-screen","bg-gray-50"],[1,"max-w-7xl","mx-auto","py-6","sm:px-6","lg:px-8"],[1,"px-4","py-6","sm:px-0"],[1,"text-center","mb-8"],[1,"text-3xl","font-extrabold","text-gray-900","sm:text-4xl"],[1,"mt-3","max-w-2xl","mx-auto","text-xl","text-gray-500","sm:mt-4"],["class","text-center py-12",4,"ngIf"],["class","grid gap-6 md:grid-cols-2 lg:grid-cols-3",4,"ngIf"],[3,"closed","show","quote"],[1,"text-center","py-12"],[1,"inline-flex","items-center","px-4","py-2","font-semibold","leading-6","text-sm","shadow","rounded-md","text-white","bg-indigo-500","hover:bg-indigo-400","transition","ease-in-out","duration-150","cursor-not-allowed"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-3"],["class","bg-white overflow-hidden shadow rounded-lg",4,"ngFor","ngForOf"],[1,"bg-white","overflow-hidden","shadow","rounded-lg"],[1,"px-4","py-5","sm:p-6"],[1,"text-lg","text-gray-900","mb-4"],[1,"mb-4"],[1,"text-sm","font-medium","text-gray-900"],["class","text-sm text-gray-500",4,"ngIf"],[1,"text-xs","text-gray-500","mt-2"],[1,"mb-4","p-3","bg-gray-50","rounded-md"],[1,"flex","justify-between","text-sm"],[1,"text-green-600","font-medium"],[1,"text-red-600","font-medium"],[1,"mt-2"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-green-600","h-2","rounded-full"],[1,"text-xs","text-gray-500","mt-1"],[1,"mt-3","w-full","bg-blue-50","hover:bg-blue-100","text-blue-700","px-3","py-2","rounded-md","text-xs","font-medium","transition-colors","duration-200","border","border-blue-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"inline","w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"flex","space-x-2"],[1,"flex-1","bg-green-600","hover:bg-green-700","disabled:bg-green-300","text-white","px-3","py-2","rounded-md","text-sm","font-medium","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin -ml-1 mr-2 h-4 w-4 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","bg-red-600","hover:bg-red-700","disabled:bg-red-300","text-white","px-3","py-2","rounded-md","text-sm","font-medium","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-sm","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"-ml-1","mr-2","h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"]],template:function(e,r){e&1&&(i(0,"div",0),c(1,"app-navbar"),i(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),s(6," Wachtende Quotes "),n(),i(7,"p",5),s(8," Stem op quotes die wachten op goedkeuring "),n()(),g(9,te,6,0,"div",6)(10,se,2,1,"div",7)(11,le,12,0,"div",6),n()()(),i(12,"app-vote-details-modal",8),x("closed",function(){return r.closeVoteDetails()}),n()),e&2&&(a(9),d("ngIf",r.loading),a(),d("ngIf",!r.loading),a(),d("ngIf",!r.loading&&r.quotes.length===0),a(),d("show",r.showVoteDetailsModal)("quote",r.selectedQuote))},dependencies:[M,k,Q,$,U,F,P,j],encapsulation:2})};export{z as PendingQuotesComponent};
