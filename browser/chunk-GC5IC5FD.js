var MR=Object.defineProperty,xR=Object.defineProperties;var PR=Object.getOwnPropertyDescriptors;var Uc=Object.getOwnPropertySymbols,OR=Object.getPrototypeOf,ZI=Object.prototype.hasOwnProperty,JI=Object.prototype.propertyIsEnumerable,kR=Reflect.get;var YI=(t,e,n)=>e in t?MR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})ZI.call(e,n)&&YI(t,n,e[n]);if(Uc)for(var n of Uc(e))JI.call(e,n)&&YI(t,n,e[n]);return t},ge=(t,e)=>xR(t,PR(e));var H$=(t,e)=>{var n={};for(var r in t)ZI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Uc)for(var r of Uc(t))e.indexOf(r)<0&&JI.call(t,r)&&(n[r]=t[r]);return n};var lr=(t,e,n)=>kR(OR(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function J(t){return typeof t=="function"}function ji(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var jc=ji(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Kr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof jc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{XI(s)}catch(o){e=e??[],o instanceof jc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)XI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Kr(n,e)}remove(e){let{_finalizers:n}=this;n&&Kr(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var Yh=xe.EMPTY;function Bc(t){return t instanceof xe||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function XI(t){J(t)?t():t.unsubscribe()}var Kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bi={setTimeout(t,e,...n){let{delegate:r}=Bi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Bi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $c(t){Bi.setTimeout(()=>{let{onUnhandledError:e}=Kt;if(e)e(t);else throw t})}function ko(){}var ew=Zh("C",void 0,void 0);function tw(t){return Zh("E",void 0,t)}function nw(t){return Zh("N",t,void 0)}function Zh(t,e,n){return{kind:t,value:e,error:n}}var Qr=null;function $i(t){if(Kt.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Qr;if(Qr=null,n)throw r}}else t()}function rw(t){Kt.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=t)}var Yr=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bc(e)&&e.add(this)):this.destination=VR}static create(e,n,r){return new Hi(e,n,r)}next(e){this.isStopped?Xh(nw(e),this):this._next(e)}error(e){this.isStopped?Xh(tw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xh(ew,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FR=Function.prototype.bind;function Jh(t,e){return FR.call(t,e)}var ef=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Hc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Hc(r)}else Hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Hc(n)}}},Hi=class extends Yr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Kt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jh(e.next,s),error:e.error&&Jh(e.error,s),complete:e.complete&&Jh(e.complete,s)}):i=e}this.destination=new ef(i)}};function Hc(t){Kt.useDeprecatedSynchronousErrorHandling?rw(t):$c(t)}function LR(t){throw t}function Xh(t,e){let{onStoppedNotification:n}=Kt;n&&Bi.setTimeout(()=>n(t,e))}var VR={closed:!0,next:ko,error:LR,complete:ko};var qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function St(t){return t}function tf(...t){return nf(t)}function nf(t){return t.length===0?St:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=jR(n)?n:new Hi(n,r,i);return $i(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=iw(r),new r((i,s)=>{let o=new Hi({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[qi](){return this}pipe(...n){return nf(n)(this)}toPromise(n){return n=iw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function iw(t){var e;return(e=t??Kt.Promise)!==null&&e!==void 0?e:Promise}function UR(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function jR(t){return t&&t instanceof Yr||UR(t)&&Bc(t)}var At=new X(t=>t.complete());function rf(t){return J(t?.lift)}function le(t){return e=>{if(rf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new sf(t,e,n,r,i)}var sf=class extends Yr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function un(t){return t<=0?()=>At:le((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function of(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ow(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function sw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zr(t){return this instanceof Zr?(this.v=t,this):new Zr(t)}function aw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(N){return new Promise(function(R,k){s.push([y,N,R,k])>1||u(y,N)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(N){m(s[0][3],N)}}function l(y){y.value instanceof Zr?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,b){y(b),s.shift(),s.length&&u(s[0][0],s[0][1])}}function cw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sw=="function"?sw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var qc=t=>t&&typeof t.length=="number"&&typeof t!="function";function zc(t){return J(t?.then)}function Gc(t){return J(t[qi])}function Wc(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function Kc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qc=BR();function Yc(t){return J(t?.[Qc])}function Zc(t){return aw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Zr(n.read());if(i)return yield Zr(void 0);yield yield Zr(r)}}finally{n.releaseLock()}})}function Jc(t){return J(t?.getReader)}function Ve(t){if(t instanceof X)return t;if(t!=null){if(Gc(t))return $R(t);if(qc(t))return HR(t);if(zc(t))return qR(t);if(Wc(t))return uw(t);if(Yc(t))return zR(t);if(Jc(t))return GR(t)}throw Kc(t)}function $R(t){return new X(e=>{let n=t[qi]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function HR(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function qR(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,$c)})}function zR(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function uw(t){return new X(e=>{WR(t,e).catch(n=>e.error(n))})}function GR(t){return uw(Zc(t))}function WR(t,e){var n,r,i,s;return ow(this,void 0,void 0,function*(){try{for(n=cw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}var Xc=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var Fo={setInterval(t,e,...n){let{delegate:r}=Fo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Fo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var zi=class extends Xc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Fo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Fo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Kr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var af={now(){return(af.delegate||Date).now()},delegate:void 0};var Gi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Gi.now=af.now;var Wi=class extends Gi{constructor(e,n=Gi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var cf=new Wi(zi);function lw(t){return t&&J(t.schedule)}function dw(t){return t[t.length-1]}function eu(t){return J(dw(t))?t.pop():void 0}function dr(t){return lw(dw(t))?t.pop():void 0}function wt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function hr(t){return le((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ae(n,void 0,void 0,o=>{s=Ve(t(o,hr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}var{isArray:KR}=Array,{getPrototypeOf:QR,prototype:YR,keys:ZR}=Object;function tu(t){if(t.length===1){let e=t[0];if(KR(e))return{args:e,keys:null};if(JR(e)){let n=ZR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function JR(t){return t&&typeof t=="object"&&QR(t)===YR}function fr(t,e=0){return le((n,r)=>{n.subscribe(ae(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function pr(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function hw(t,e){return Ve(t).pipe(pr(e),fr(e))}function fw(t,e){return Ve(t).pipe(pr(e),fr(e))}function pw(t,e){return new X(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function gw(t,e){return new X(n=>{let r;return wt(n,e,()=>{r=t[Qc](),wt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function nu(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function mw(t,e){return nu(Zc(t),e)}function yw(t,e){if(t!=null){if(Gc(t))return hw(t,e);if(qc(t))return pw(t,e);if(zc(t))return fw(t,e);if(Wc(t))return nu(t,e);if(Yc(t))return gw(t,e);if(Jc(t))return mw(t,e)}throw Kc(t)}function Pe(t,e){return e?yw(t,e):Ve(t)}function ie(t,e){return le((n,r)=>{let i=0;n.subscribe(ae(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:XR}=Array;function eN(t,e){return XR(e)?t(...e):t(e)}function ru(t){return ie(e=>eN(t,e))}function iu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Lo(...t){let e=dr(t),n=eu(t),{args:r,keys:i}=tu(t);if(r.length===0)return Pe([],e);let s=new X(tN(r,e,i?o=>iu(i,o):St));return n?s.pipe(ru(n)):s}function tN(t,e,n=St){return r=>{vw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)vw(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(ae(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function vw(t,e,n){t?wt(n,t,e):e()}function _w(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?b(N):u.push(N),b=N=>{s&&e.next(N),l++;let R=!1;Ve(n(N,h++)).subscribe(ae(e,k=>{i?.(k),s?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?wt(e,o,()=>b(k)):b(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(ae(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ue(t,e,n=1/0){return J(e)?Ue((r,i)=>ie((s,o)=>e(r,s,i,o))(Ve(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>_w(r,i,t,n)))}function Iw(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ae(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Ki(t=1/0){return Ue(St,t)}function ww(){return Ki(1)}function Jr(t,e){return J(e)?Ue(t,e,1):Ue(t,1)}var Ew=ji(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new su(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ew}next(n){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Yh:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,Kr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new su(e,n),t})(),su=class extends it{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Yh}};function gr(t){return le((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qi(...t){return ww()(Pe(t,dr(t)))}function uf(t){return ie(()=>t)}function G(...t){let e=dr(t);return Pe(t,e)}function Yi(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new X(e?i=>e.schedule(r,0,i):r)}function Vt(t,e){return le((n,r)=>{let i=0;n.subscribe(ae(r,s=>t.call(e,s,i++)&&r.next(s)))})}var kn=ji(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ou(t=nN){return le((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function nN(){return new kn}function Vo(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ln(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,s)=>t(i,s,r)):St,un(1),n?gr(e):ou(()=>new kn))}function Zi(t){return t<=0?()=>At:le((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function lf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,s)=>t(i,s,r)):St,Zi(1),n?gr(e):ou(()=>new kn))}function Ji(){return le((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Xi=class extends X{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return Ji()(this)}};var Xe=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function df(t,e){return le(Iw(t,e,arguments.length>=2,!0))}function hf(...t){let e=dr(t);return le((n,r)=>{(e?Qi(t,n,e):Qi(t,n)).subscribe(r)})}function ft(t,e){return le((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=s++;Ve(t(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ff(t){return le((e,n)=>{Ve(t).subscribe(ae(n,()=>n.complete(),ko)),!n.closed&&e.subscribe(n)})}function Ge(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ae(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):St}function Dw(t,e){return Object.is(t,e)}var We=null,au=!1,cu=1,Fn=Symbol("SIGNAL");function he(t){let e=We;return We=t,e}function Tw(){return We}var jo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mf(t){if(au)throw new Error("");if(We===null)return;We.consumerOnSignalRead(t);let e=We.nextProducerIndex++;if(hu(We),e<We.producerNode.length&&We.producerNode[e]!==t&&Uo(We)){let n=We.producerNode[e];du(n,We.producerIndexOfThis[e])}We.producerNode[e]!==t&&(We.producerNode[e]=t,We.producerIndexOfThis[e]=Uo(We)?Aw(t,We,e):0),We.producerLastReadVersion[e]=t.version}function rN(){cu++}function bw(t){if(!(Uo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===cu)){if(!t.producerMustRecompute(t)&&!vf(t)){t.dirty=!1,t.lastCleanEpoch=cu;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=cu}}function Cw(t){if(t.liveConsumerNode===void 0)return;let e=au;au=!0;try{for(let n of t.liveConsumerNode)n.dirty||iN(n)}finally{au=e}}function Sw(){return We?.consumerAllowSignalWrites!==!1}function iN(t){t.dirty=!0,Cw(t),t.consumerMarkedDirty?.(t)}function lu(t){return t&&(t.nextProducerIndex=0),he(t)}function yf(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Uo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)du(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function vf(t){hu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(bw(n),r!==n.version))return!0}return!1}function _f(t){if(hu(t),Uo(t))for(let e=0;e<t.producerNode.length;e++)du(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Aw(t,e,n){if(Rw(t),t.liveConsumerNode.length===0&&Nw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Aw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function du(t,e){if(Rw(t),t.liveConsumerNode.length===1&&Nw(t))for(let r=0;r<t.producerNode.length;r++)du(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];hu(i),i.producerIndexOfThis[r]=e}}function Uo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function hu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Rw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Nw(t){return t.producerNode!==void 0}function Mw(t){let e=Object.create(sN);e.computation=t;let n=()=>{if(bw(e),mf(e),e.value===uu)throw e.error;return e.value};return n[Fn]=e,n}var pf=Symbol("UNSET"),gf=Symbol("COMPUTING"),uu=Symbol("ERRORED"),sN=ge(F({},jo),{value:pf,dirty:!0,error:null,equal:Dw,producerMustRecompute(t){return t.value===pf||t.value===gf},producerRecomputeValue(t){if(t.value===gf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=gf;let n=lu(t),r;try{r=t.computation()}catch(i){r=uu,t.error=i}finally{yf(t,n)}if(e!==pf&&e!==uu&&r!==uu&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function oN(){throw new Error}var xw=oN;function Pw(){xw()}function Ow(t){xw=t}var aN=null;function kw(t){let e=Object.create(Lw);e.value=t;let n=()=>(mf(e),e.value);return n[Fn]=e,n}function If(t,e){Sw()||Pw(),t.equal(t.value,e)||(t.value=e,cN(t))}function Fw(t,e){Sw()||Pw(),If(t,e(t.value))}var Lw=ge(F({},jo),{equal:Dw,value:void 0});function cN(t){t.version++,rN(),Cw(t),aN?.()}var fu=class extends zi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var pu=class extends Wi{};var wf=new pu(fu);function Ef(t){return!!t&&(t instanceof X||J(t.lift)&&J(t.subscribe))}function gu(t){return new X(e=>{Ve(t()).subscribe(e)})}function uN(...t){let e=eu(t),{args:n,keys:r}=tu(t),i=new X(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ve(n[h]).subscribe(ae(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?iu(r,a):a),s.complete())}))}});return e?i.pipe(ru(e)):i}var wE="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(Rp(e,n)),this.code=e}};function Rp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Qo(t){return{toString:t}.toString()}var mu="__parameters__";function lN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function EE(t,e,n){return Qo(()=>{let r=lN(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(mu)?u[mu]:Object.defineProperty(u,mu,{value:[]})[mu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ei=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function dN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(mt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Lf(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var hN=De({__forward_ref__:De});function DE(t){return t.__forward_ref__=DE,t.toString=function(){return mt(this())},t}function pt(t){return TE(t)?t():t}function TE(t){return typeof t=="function"&&t.hasOwnProperty(hN)&&t.__forward_ref__===DE}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zu(t){return Vw(t,CE)||Vw(t,SE)}function bE(t){return Zu(t)!==null}function Vw(t,e){return t.hasOwnProperty(e)?t[e]:null}function fN(t){let e=t&&(t[CE]||t[SE]);return e||null}function Uw(t){return t&&(t.hasOwnProperty(jw)||t.hasOwnProperty(pN))?t[jw]:null}var CE=De({\u0275prov:De}),jw=De({\u0275inj:De}),SE=De({ngInjectableDef:De}),pN=De({ngInjectorDef:De}),H=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AE(t){return t&&!!t.\u0275providers}var gN=De({\u0275cmp:De}),mN=De({\u0275dir:De}),yN=De({\u0275pipe:De}),vN=De({\u0275mod:De}),Cu=De({\u0275fac:De}),$o=De({__NG_ELEMENT_ID__:De}),Bw=De({__NG_ENV_ID__:De});function os(t){return typeof t=="string"?t:t==null?"":String(t)}function _N(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():os(t)}function IN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function Np(t,e){throw new j(-201,!1)}var se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),Vf;function RE(){return Vf}function Et(t){let e=Vf;return Vf=t,e}function NE(t,e,n){let r=Zu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;Np(t,"Injector")}var wN={},Ho=wN,Uf="__NG_DI_FLAG__",Su="ngTempTokenPath",EN="ngTokenPath",DN=/\n/gm,TN="\u0275",$w="__source",is;function bN(){return is}function mr(t){let e=is;return is=t,e}function CN(t,e=se.Default){if(is===void 0)throw new j(-203,!1);return is===null?NE(t,void 0,e):is.get(t,e&se.Optional?null:void 0,e)}function z(t,e=se.Default){return(RE()||CN)(pt(t),e)}function O(t,e=se.Default){return z(t,Ju(e))}function Ju(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jf(t){let e=[];for(let n=0;n<t.length;n++){let r=pt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],u=SN(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function ME(t,e){return t[Uf]=e,t.prototype[Uf]=e,t}function SN(t){return t[Uf]}function AN(t,e,n,r){let i=t[Su];throw e[$w]&&i.unshift(e[$w]),t.message=RN(`
`+t.message,i,n,r),t[EN]=i,t[Su]=null,t}function RN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==TN?t.slice(2):t;let i=mt(e);if(Array.isArray(e))i=e.map(mt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):mt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(DN,`
  `)}`}var ot=ME(EE("Optional"),8);var Mp=ME(EE("SkipSelf"),4);function ni(t,e){let n=t.hasOwnProperty(Cu);return n?t[Cu]:null}function xp(t,e){t.forEach(n=>Array.isArray(n)?xp(n,e):e(n))}function xE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Au(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function NN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Pp(t,e,n){let r=Zo(t,e);return r>=0?t[r|1]=n:(r=~r,NN(t,r,e,n)),r}function Df(t,e){let n=Zo(t,e);if(n>=0)return t[n|1]}function Zo(t,e){return MN(t,e,1)}function MN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var as={},Dt=[],cs=new H(""),PE=new H("",-1),OE=new H(""),Ru=class{get(e,n=Ho){if(n===Ho){let r=new Error(`NullInjectorError: No provider for ${mt(e)}!`);throw r.name="NullInjectorError",r}return n}},kE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(kE||{}),fn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(fn||{}),_r=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(_r||{});function xN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];PN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function FE(t){return t===3||t===4||t===6}function PN(t){return t.charCodeAt(0)===64}function qo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Hw(t,n,i,null,e[++r]):Hw(t,n,i,null,null))}}return t}function Hw(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var LE="ng-template";function ON(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Op(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Op(t){return t.type===4&&t.value!==LE}function kN(t,e,n){let r=t.type===4&&!n?LE:t.value;return e===r}function FN(t,e,n){let r=4,i=t.attrs,s=i!==null?UN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Qt(r)&&!Qt(u))return!1;if(o&&Qt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!kN(t,u,n)||u===""&&e.length===1){if(Qt(r))return!1;o=!0}}else if(r&8){if(i===null||!ON(t,i,u,n)){if(Qt(r))return!1;o=!0}}else{let l=e[++a],h=LN(u,i,Op(t),n);if(h===-1){if(Qt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Qt(r))return!1;o=!0}}}}return Qt(r)||o}function Qt(t){return(t&1)===0}function LN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return jN(e,t)}function VN(t,e,n=!1){for(let r=0;r<e.length;r++)if(FN(t,e[r],n))return!0;return!1}function UN(t){for(let e=0;e<t.length;e++){let n=t[e];if(FE(n))return e}return t.length}function jN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function qw(t,e){return t?":not("+e.trim()+")":e}function BN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Qt(o)&&(e+=qw(s,i),i=""),r=o,s=s||!Qt(r);n++}return i!==""&&(e+=qw(s,i)),e}function $N(t){return t.map(BN).join(",")}function HN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Qt(i))break;i=s}r++}return{attrs:e,classes:n}}function VE(t){return Qo(()=>{let e=HE(t),n=ge(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===kE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fn.Emulated,styles:t.styles||Dt,_:null,schemas:t.schemas||null,tView:null,id:""});qE(n);let r=t.dependencies;return n.directiveDefs=Gw(r,!1),n.pipeDefs=Gw(r,!0),n.id=GN(n),n})}function qN(t){return Ir(t)||UE(t)}function zN(t){return t!==null}function Jo(t){return Qo(()=>({type:t.type,bootstrap:t.bootstrap||Dt,declarations:t.declarations||Dt,imports:t.imports||Dt,exports:t.exports||Dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zw(t,e){if(t==null)return as;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=_r.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==_r.None?[r,a]:r,e[s]=o):n[s]=r}return n}function _s(t){return Qo(()=>{let e=HE(t);return qE(e),e})}function Xu(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ir(t){return t[gN]||null}function UE(t){return t[mN]||null}function jE(t){return t[yN]||null}function BE(t){let e=Ir(t)||UE(t)||jE(t);return e!==null?e.standalone:!1}function $E(t,e){let n=t[vN]||null;if(!n&&e===!0)throw new Error(`Type ${mt(t)} does not have '\u0275mod' property.`);return n}function HE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||as,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Dt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zw(t.inputs,e),outputs:zw(t.outputs),debugInfo:null}}function qE(t){t.features?.forEach(e=>e(t))}function Gw(t,e){if(!t)return null;let n=e?jE:qN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(zN)}function GN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yn(t){return{\u0275providers:t}}function WN(...t){return{\u0275providers:zE(!0,t),\u0275fromNgModule:!0}}function zE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return xp(e,o=>{let a=o;$f(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GE(i,s),n}function GE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];kp(i,s=>{e(s,r)})}}function $f(t,e,n,r){if(t=pt(t),!t)return!1;let i=null,s=Uw(t),o=!s&&Ir(t);if(!s&&!o){let u=t.ngModule;if(s=Uw(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)$f(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{xp(s.imports,h=>{$f(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&GE(l,e)}if(!a){let l=ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dt},i),e({provide:OE,useValue:i,multi:!0},i),e({provide:cs,useValue:()=>z(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;kp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function kp(t,e){for(let n of t)AE(n)&&(n=n.\u0275providers),Array.isArray(n)?kp(n,e):e(n)}var KN=De({provide:String,useValue:De});function WE(t){return t!==null&&typeof t=="object"&&KN in t}function QN(t){return!!(t&&t.useExisting)}function YN(t){return!!(t&&t.useFactory)}function us(t){return typeof t=="function"}function ZN(t){return!!t.useClass}var el=new H(""),wu={},JN={},Tf;function Fp(){return Tf===void 0&&(Tf=new Ru),Tf}var Rt=class{},zo=class extends Rt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qf(e,o=>this.processProvider(o)),this.records.set(PE,es(void 0,this)),i.has("environment")&&this.records.set(Rt,es(void 0,this));let s=this.records.get(el);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(OE,Dt,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=mr(this),r=Et(void 0),i;try{return e()}finally{mr(n),Et(r)}}get(e,n=Ho,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Bw))return e[Bw](this);r=Ju(r);let i,s=mr(this),o=Et(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=rM(e)&&Zu(e);l&&this.injectableDefInScope(l)?u=es(Hf(e),wu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?Fp():this.parent;return n=r&se.Optional&&n===Ho?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Su]=a[Su]||[]).unshift(mt(e)),s)throw a;return AN(a,e,"R3InjectorError",this.source)}else throw a}finally{Et(o),mr(s)}}resolveInjectorInitializers(){let e=he(null),n=mr(this),r=Et(void 0),i;try{let s=this.get(cs,Dt,se.Self);for(let o of s)o()}finally{mr(n),Et(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=pt(e);let n=us(e)?e:pt(e&&e.provide),r=eM(e);if(!us(e)&&e.multi===!0){let i=this.records.get(n);i||(i=es(void 0,wu,!0),i.factory=()=>jf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===wu&&(n.value=JN,n.value=n.factory()),typeof n.value=="object"&&n.value&&nM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=pt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hf(t){let e=Zu(t),n=e!==null?e.factory:ni(t);if(n!==null)return n;if(t instanceof H)throw new j(204,!1);if(t instanceof Function)return XN(t);throw new j(204,!1)}function XN(t){if(t.length>0)throw new j(204,!1);let n=fN(t);return n!==null?()=>n.factory(t):()=>new t}function eM(t){if(WE(t))return es(void 0,t.useValue);{let e=KE(t);return es(e,wu)}}function KE(t,e,n){let r;if(us(t)){let i=pt(t);return ni(i)||Hf(i)}else if(WE(t))r=()=>pt(t.useValue);else if(YN(t))r=()=>t.useFactory(...jf(t.deps||[]));else if(QN(t))r=()=>z(pt(t.useExisting));else{let i=pt(t&&(t.useClass||t.provide));if(tM(t))r=()=>new i(...jf(t.deps));else return ni(i)||Hf(i)}return r}function es(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function tM(t){return!!t.deps}function nM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function rM(t){return typeof t=="function"||typeof t=="object"&&t instanceof H}function qf(t,e){for(let n of t)Array.isArray(n)?qf(n,e):n&&AE(n)?qf(n.\u0275providers,e):e(n)}function vn(t,e){t instanceof zo&&t.assertNotDestroyed();let n,r=mr(t),i=Et(void 0);try{return e()}finally{mr(r),Et(i)}}function QE(){return RE()!==void 0||bN()!=null}function iM(t){if(!QE())throw new j(-203,!1)}function sM(t){return typeof t=="function"}var jn=0,oe=1,Q=2,yt=3,Zt=4,Xt=5,Nu=6,Mu=7,Jt=8,ls=9,pn=10,je=11,Go=12,Ww=13,Is=14,gn=15,ds=16,ts=17,hs=18,tl=19,YE=20,yr=21,bf=22,Ut=23,Bt=25,ZE=1;var ri=7,xu=8,Pu=9,jt=10,Ou=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ou||{});function vr(t){return Array.isArray(t)&&typeof t[ZE]=="object"}function Bn(t){return Array.isArray(t)&&t[ZE]===!0}function JE(t){return(t.flags&4)!==0}function nl(t){return t.componentOffset>-1}function Lp(t){return(t.flags&1)===1}function wr(t){return!!t.template}function zf(t){return(t[Q]&512)!==0}var Gf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function XE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xo(){return eD}function eD(t){return t.type.prototype.ngOnChanges&&(t.setInput=aM),oM}Xo.ngInherit=!0;function oM(){let t=nD(this),e=t?.current;if(e){let n=t.previous;if(n===as)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function aM(t,e,n,r,i){let s=this.declaredInputs[r],o=nD(t)||cM(t,{previous:as,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Gf(l&&l.currentValue,n,u===as),XE(t,e,i,n)}var tD="__ngSimpleChanges__";function nD(t){return t[tD]||null}function cM(t,e){return t[tD]=e}var Kw=null;var dn=function(t,e,n){Kw?.(t,e,n)},rD="svg",uM="math";function mn(t){for(;Array.isArray(t);)t=t[jn];return t}function iD(t,e){return mn(e[t])}function $t(t,e){return mn(e[t.index])}function sD(t,e){return t.data[e]}function Vp(t,e){return t[e]}function Tr(t,e){let n=e[t];return vr(n)?n:n[jn]}function Up(t){return(t[Q]&128)===128}function lM(t){return Bn(t[yt])}function ku(t,e){return e==null?null:t[e]}function oD(t){t[ts]=0}function aD(t){t[Q]&1024||(t[Q]|=1024,Up(t)&&il(t))}function dM(t,e){for(;t>0;)e=e[Is],t--;return e}function rl(t){return!!(t[Q]&9216||t[Ut]?.dirty)}function Wf(t){t[pn].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),rl(t)&&il(t)}function il(t){t[pn].changeDetectionScheduler?.notify(0);let e=ii(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Up(e)));)e=ii(e)}function cD(t,e){if((t[Q]&256)===256)throw new j(911,!1);t[yr]===null&&(t[yr]=[]),t[yr].push(e)}function hM(t,e){if(t[yr]===null)return;let n=t[yr].indexOf(e);n!==-1&&t[yr].splice(n,1)}function ii(t){let e=t[yt];return Bn(e)?e[yt]:e}var ne={lFrame:vD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var uD=!1;function fM(){return ne.lFrame.elementDepthCount}function pM(){ne.lFrame.elementDepthCount++}function gM(){ne.lFrame.elementDepthCount--}function lD(){return ne.bindingsEnabled}function mM(){return ne.skipHydrationRootTNode!==null}function yM(t){return ne.skipHydrationRootTNode===t}function vM(){ne.skipHydrationRootTNode=null}function _e(){return ne.lFrame.lView}function vt(){return ne.lFrame.tView}function l9(t){return ne.lFrame.contextLView=t,t[Jt]}function d9(t){return ne.lFrame.contextLView=null,t}function _t(){let t=dD();for(;t!==null&&t.type===64;)t=t.parent;return t}function dD(){return ne.lFrame.currentTNode}function _M(){let t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ea(t,e){let n=ne.lFrame;n.currentTNode=t,n.isParent=e}function hD(){return ne.lFrame.isParent}function IM(){ne.lFrame.isParent=!1}function wM(){return ne.lFrame.contextLView}function fD(){return uD}function Qw(t){uD=t}function pD(){let t=ne.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function EM(){return ne.lFrame.bindingIndex}function DM(t){return ne.lFrame.bindingIndex=t}function sl(){return ne.lFrame.bindingIndex++}function jp(t){let e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function TM(){return ne.lFrame.inI18n}function bM(t,e){let n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kf(e)}function CM(){return ne.lFrame.currentDirectiveIndex}function Kf(t){ne.lFrame.currentDirectiveIndex=t}function SM(t){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function gD(t){ne.lFrame.currentQueryIndex=t}function AM(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[Xt]:null}function mD(t,e,n){if(n&se.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=AM(s),i===null||(s=s[Is],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ne.lFrame=yD();return r.currentTNode=e,r.lView=t,!0}function Bp(t){let e=yD(),n=t[oe];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yD(){let t=ne.lFrame,e=t===null?null:t.child;return e===null?vD(t):e}function vD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function _D(){let t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ID=_D;function $p(){let t=_D();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function RM(t){return(ne.lFrame.contextLView=dM(t,ne.lFrame.contextLView))[Jt]}function br(){return ne.lFrame.selectedIndex}function si(t){ne.lFrame.selectedIndex=t}function Hp(){let t=ne.lFrame;return sD(t.tView,t.selectedIndex)}function h9(){ne.lFrame.currentNamespace=rD}function f9(){NM()}function NM(){ne.lFrame.currentNamespace=null}function MM(){return ne.lFrame.currentNamespace}var wD=!0;function qp(){return wD}function zp(t){wD=t}function xM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=eD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Gp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Eu(t,e,n){ED(t,e,3,n)}function Du(t,e,n,r){(t[Q]&3)===n&&ED(t,e,n,r)}function Cf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function ED(t,e,n,r){let i=r!==void 0?t[ts]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ts]+=65536),(a<s||s==-1)&&(PM(t,n,e,u),t[ts]=(t[ts]&4294901760)+u+2),u++}function Yw(t,e){dn(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),dn(5,t,e)}}function PM(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[ts]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,Yw(a,s)):Yw(a,s)}var ss=-1,oi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function OM(t){return t instanceof oi}function kM(t){return(t.flags&8)!==0}function FM(t){return(t.flags&16)!==0}var Sf={},Qf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ju(r);let i=this.injector.get(e,Sf,r);return i!==Sf||n===Sf?i:this.parentInjector.get(e,n,r)}};function DD(t){return t!==ss}function Fu(t){return t&32767}function LM(t){return t>>16}function Lu(t,e){let n=LM(t),r=e;for(;n>0;)r=r[Is],n--;return r}var Yf=!0;function Vu(t){let e=Yf;return Yf=t,e}var VM=256,TD=VM-1,bD=5,UM=0,hn={};function jM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty($o)&&(r=n[$o]),r==null&&(r=n[$o]=UM++);let i=r&TD,s=1<<i;e.data[t+(i>>bD)]|=s}function Uu(t,e){let n=CD(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,Af(r.data,t),Af(e,null),Af(r.blueprint,null));let i=Wp(t,e),s=t.injectorIndex;if(DD(i)){let o=Fu(i),a=Lu(i,e),u=a[oe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Af(t,e){t.push(0,0,0,0,0,0,0,0,e)}function CD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Wp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=MD(i),r===null)return ss;if(n++,i=i[Is],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ss}function Zf(t,e,n){jM(t,e,n)}function BM(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(FE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function SD(t,e,n){if(n&se.Optional||t!==void 0)return t;Np(e,"NodeInjector")}function AD(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),!(n&(se.Self|se.Host))){let i=t[ls],s=Et(void 0);try{return i?i.get(e,r,n&se.Optional):NE(e,r,n&se.Optional)}finally{Et(s)}}return SD(r,e,n)}function RD(t,e,n,r=se.Default,i){if(t!==null){if(e[Q]&2048&&!(r&se.Self)){let o=GM(t,e,n,r,hn);if(o!==hn)return o}let s=ND(t,e,n,r,hn);if(s!==hn)return s}return AD(e,n,r,i)}function ND(t,e,n,r,i){let s=qM(n);if(typeof s=="function"){if(!mD(e,t,r))return r&se.Host?SD(i,n,r):AD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))Np(n);else return o}finally{ID()}}else if(typeof s=="number"){let o=null,a=CD(t,e),u=ss,l=r&se.Host?e[gn][Xt]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?Wp(t,e):e[a+8],u===ss||!Jw(r,!1)?a=-1:(o=e[oe],a=Fu(u),e=Lu(u,e)));a!==-1;){let h=e[oe];if(Zw(s,a,h.data)){let p=$M(a,e,n,o,r,l);if(p!==hn)return p}u=e[a+8],u!==ss&&Jw(r,e[oe].data[a+8]===l)&&Zw(s,a,e)?(o=h,a=Fu(u),e=Lu(u,e)):a=-1}}return i}function $M(t,e,n,r,i,s){let o=e[oe],a=o.data[t+8],u=r==null?nl(a)&&Yf:r!=o&&(a.type&3)!==0,l=i&se.Host&&s===a,h=HM(a,o,n,u,l);return h!==null?fs(e,o,h,a):hn}function HM(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=o[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=o[u];if(y&&wr(y)&&y.type===n)return u}return null}function fs(t,e,n,r){let i=t[n],s=e.data;if(OM(i)){let o=i;o.resolving&&IN(_N(s[n]));let a=Vu(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Et(o.injectImpl):null,h=mD(t,r,se.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&xM(n,s[n],e)}finally{l!==null&&Et(l),Vu(a),o.resolving=!1,ID()}}return i}function qM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty($o)?t[$o]:void 0;return typeof e=="number"?e>=0?e&TD:zM:e}function Zw(t,e,n){let r=1<<t;return!!(n[e+(t>>bD)]&r)}function Jw(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var ti=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return RD(this._tNode,this._lView,e,Ju(r),n)}};function zM(){return new ti(_t(),_e())}function Kp(t){return Qo(()=>{let e=t.prototype.constructor,n=e[Cu]||Jf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Cu]||Jf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Jf(t){return TE(t)?()=>{let e=Jf(pt(t));return e&&e()}:ni(t)}function GM(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=ND(s,o,n,r|se.Self,hn);if(a!==hn)return a;let u=s.parent;if(!u){let l=o[YE];if(l){let h=l.get(n,hn,r);if(h!==hn)return h}u=MD(o),o=o[Is]}s=u}return i}function MD(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[Xt]:null}function Qp(t){return BM(_t(),t)}function Xw(t,e=null,n=null,r){let i=xD(t,e,n,r);return i.resolveInjectorInitializers(),i}function xD(t,e=null,n=null,r,i=new Set){let s=[n||Dt,WN(t)];return r=r||(typeof t=="object"?void 0:mt(t)),new zo(s,e||Fp(),r||null,i)}var st=class t{static{this.THROW_IF_NOT_FOUND=Ho}static{this.NULL=new Ru}static create(e,n){if(Array.isArray(e))return Xw({name:""},n,e,"");{let r=e.name??"";return Xw({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>z(PE)})}static{this.__NG_ELEMENT_ID__=-1}};var WM=new H("");WM.__NG_ELEMENT_ID__=t=>{let e=_t();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&se.Optional)return null;throw new j(204,!1)};var KM="ngOriginalError";function Rf(t){return t[KM]}var PD=!0,Yp=(()=>{class t{static{this.__NG_ELEMENT_ID__=QM}static{this.__NG_ENV_ID__=n=>n}}return t})(),Xf=class extends Yp{constructor(e){super(),this._lView=e}onDestroy(e){return cD(this._lView,e),()=>hM(this._lView,e)}};function QM(){return new Xf(_e())}var ws=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();var ep=class extends it{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,QE()&&(this.destroyRef=O(Yp,{optional:!0})??void 0,this.pendingTasks=O(ws,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},gt=ep;function ju(...t){}function OD(t){let e,n;function r(){t=ju;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function eE(t){return queueMicrotask(()=>t()),()=>{t=ju}}var Zp="isAngularZone",Bu=Zp+"_ID",YM=0,ve=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=PD}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,XM(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Zp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ZM,ju,ju);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ZM={};function Jp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function JM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){OD(()=>{t.callbackScheduled=!1,tp(t),t.isCheckStableRunning=!0,Jp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),tp(t)}function XM(t){let e=()=>{JM(t)},n=YM++;t._inner=t._inner.fork({name:"angular",properties:{[Zp]:!0,[Bu]:n,[Bu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(ex(u))return r.invokeTask(s,o,a,u);try{return tE(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nE(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return tE(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!tx(u)&&e(),nE(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,tp(t),Jp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function tp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nE(t){t._nesting--,Jp(t)}var np=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function ex(t){return kD(t,"__ignore_ng_zone__")}function tx(t){return kD(t,"__scheduler_tick__")}function kD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ln=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Rf(e);for(;n&&Rf(n);)n=Rf(n);return n||null}},nx=new H("",{providedIn:"root",factory:()=>{let t=O(ve),e=O(Ln);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function rx(){return ol(_t(),_e())}function ol(t,e){return new ta($t(t,e))}var ta=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=rx}}return t})();function FD(t){return(t.flags&128)===128}var LD=new Map,ix=0;function sx(){return ix++}function ox(t){LD.set(t[tl],t)}function rp(t){LD.delete(t[tl])}var rE="__ngContext__";function ai(t,e){vr(e)?(t[rE]=e[tl],ox(e)):t[rE]=e}function VD(t){return jD(t[Go])}function UD(t){return jD(t[Zt])}function jD(t){for(;t!==null&&!Bn(t);)t=t[Zt];return t}var ip;function BD(t){ip=t}function ax(){if(ip!==void 0)return ip;if(typeof document<"u")return document;throw new j(210,!1)}var Xp=new H("",{providedIn:"root",factory:()=>cx}),cx="ng",eg=new H(""),_n=new H("",{providedIn:"platform",factory:()=>"unknown"});var tg=new H("",{providedIn:"root",factory:()=>ax().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ux="h",lx="b";var dx=()=>null;function ng(t,e,n=!1){return dx(t,e,n)}var $D=!1,hx=new H("",{providedIn:"root",factory:()=>$D});var yu;function fx(){if(yu===void 0&&(yu=null,ei.trustedTypes))try{yu=ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return yu}function iE(t){return fx()?.createScriptURL(t)||t}var $u=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wE})`}};function Es(t){return t instanceof $u?t.changingThisBreaksApplicationSecurity:t}function rg(t,e){let n=px(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${wE})`)}return n===e}function px(t){return t instanceof $u&&t.getTypeName()||null}var gx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HD(t){return t=String(t),t.match(gx)?t:"unsafe:"+t}var al=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(al||{});function mx(t){let e=zD();return e?e.sanitize(al.URL,t)||"":rg(t,"URL")?Es(t):HD(os(t))}function yx(t){let e=zD();if(e)return iE(e.sanitize(al.RESOURCE_URL,t)||"");if(rg(t,"ResourceURL"))return iE(Es(t));throw new j(904,!1)}function vx(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?yx:mx}function qD(t,e,n){return vx(e,n)(t)}function zD(){let t=_e();return t&&t[pn].sanitizer}function GD(t){return t instanceof Function?t():t}function _x(t){return(t??O(st)).get(_n)==="browser"}var Vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Vn||{}),Ix;function ig(t,e){return Ix(t,e)}function ns(t,e,n,r,i){if(r!=null){let s,o=!1;Bn(r)?s=r:vr(r)&&(o=!0,r=r[jn]);let a=mn(r);t===0&&n!==null?i==null?ZD(e,n,a):Hu(e,n,a,i||null,!0):t===1&&n!==null?Hu(e,n,a,i||null,!0):t===2?kx(e,a,o):t===3&&e.destroyNode(a),s!=null&&Lx(e,t,s,n,i)}}function wx(t,e){return t.createText(e)}function Ex(t,e,n){t.setValue(e,n)}function WD(t,e,n){return t.createElement(e,n)}function Dx(t,e){KD(t,e),e[jn]=null,e[Xt]=null}function Tx(t,e,n,r,i,s){r[jn]=i,r[Xt]=e,cl(t,r,n,1,i,s)}function KD(t,e){e[pn].changeDetectionScheduler?.notify(9),cl(t,e,e[je],2,null,null)}function bx(t){let e=t[Go];if(!e)return Nf(t[oe],t);for(;e;){let n=null;if(vr(e))n=e[Go];else{let r=e[jt];r&&(n=r)}if(!n){for(;e&&!e[Zt]&&e!==t;)vr(e)&&Nf(e[oe],e),e=e[yt];e===null&&(e=t),vr(e)&&Nf(e[oe],e),n=e&&e[Zt]}e=n}}function Cx(t,e,n,r){let i=jt+r,s=n.length;r>0&&(n[i-1][Zt]=e),r<s-jt?(e[Zt]=n[i],xE(n,jt+r,e)):(n.push(e),e[Zt]=null),e[yt]=n;let o=e[ds];o!==null&&n!==o&&QD(o,e);let a=e[hs];a!==null&&a.insertView(t),Wf(e),e[Q]|=128}function QD(t,e){let n=t[Pu],r=e[yt];if(vr(r))t[Q]|=Ou.HasTransplantedViews;else{let i=r[yt][gn];e[gn]!==i&&(t[Q]|=Ou.HasTransplantedViews)}n===null?t[Pu]=[e]:n.push(e)}function sg(t,e){let n=t[Pu],r=n.indexOf(e);n.splice(r,1)}function sp(t,e){if(t.length<=jt)return;let n=jt+e,r=t[n];if(r){let i=r[ds];i!==null&&i!==t&&sg(i,r),e>0&&(t[n-1][Zt]=r[Zt]);let s=Au(t,jt+e);Dx(r[oe],r);let o=s[hs];o!==null&&o.detachView(s[oe]),r[yt]=null,r[Zt]=null,r[Q]&=-129}return r}function YD(t,e){if(!(e[Q]&256)){let n=e[je];n.destroyNode&&cl(t,e,n,3,null,null),bx(e)}}function Nf(t,e){if(e[Q]&256)return;let n=he(null);try{e[Q]&=-129,e[Q]|=256,e[Ut]&&_f(e[Ut]),Ax(t,e),Sx(t,e),e[oe].type===1&&e[je].destroy();let r=e[ds];if(r!==null&&Bn(e[yt])){r!==e[yt]&&sg(r,e);let i=e[hs];i!==null&&i.detachView(t)}rp(e)}finally{he(n)}}function Sx(t,e){let n=t.cleanup,r=e[Mu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Mu]=null);let i=e[yr];if(i!==null){e[yr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Ax(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof oi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];dn(4,a,u);try{u.call(a)}finally{dn(5,a,u)}}else{dn(4,i,s);try{s.call(i)}finally{dn(5,i,s)}}}}}function Rx(t,e,n){return Nx(t,e.parent,n)}function Nx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[jn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===fn.None||s===fn.Emulated)return null}return $t(r,n)}}function Hu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ZD(t,e,n){t.appendChild(e,n)}function sE(t,e,n,r,i){r!==null?Hu(t,e,n,r,i):ZD(t,e,n)}function JD(t,e){return t.parentNode(e)}function Mx(t,e){return t.nextSibling(e)}function xx(t,e,n){return Ox(t,e,n)}function Px(t,e,n){return t.type&40?$t(t,n):null}var Ox=Px,oE;function og(t,e,n,r){let i=Rx(t,r,e),s=e[je],o=r.parent||e[Xt],a=xx(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)sE(s,i,n[u],a,!1);else sE(s,i,n,a,!1);oE!==void 0&&oE(s,r,e,n,i)}function Bo(t,e){if(e!==null){let n=e.type;if(n&3)return $t(e,t);if(n&4)return op(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Bo(t,r);{let i=t[e.index];return Bn(i)?op(-1,i):mn(i)}}else{if(n&128)return Bo(t,e.next);if(n&32)return ig(e,t)()||mn(t[e.index]);{let r=XD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ii(t[gn]);return Bo(i,r)}else return Bo(t,e.next)}}}return null}function XD(t,e){if(e!==null){let r=t[gn][Xt],i=e.projection;return r.projection[i]}return null}function op(t,e){let n=jt+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return Bo(r,i)}return e[ri]}function kx(t,e,n){t.removeChild(null,e,n)}function ag(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&ai(mn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)ag(t,e,n.child,r,i,s,!1),ns(e,t,i,a,s);else if(u&32){let l=ig(n,r),h;for(;h=l();)ns(e,t,i,h,s);ns(e,t,i,a,s)}else u&16?Fx(t,e,r,n,i,s):ns(e,t,i,a,s);n=o?n.projectionNext:n.next}}function cl(t,e,n,r,i,s){ag(n,r,t.firstChild,e,i,s,!1)}function Fx(t,e,n,r,i,s){let o=n[gn],u=o[Xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ns(e,t,i,h,s)}else{let l=u,h=o[yt];FD(r)&&(l.flags|=128),ag(t,e,l,h,i,s,!0)}}function Lx(t,e,n,r,i){let s=n[ri],o=mn(n);s!==o&&ns(e,t,r,s,i);for(let a=jt;a<n.length;a++){let u=n[a];cl(u[oe],u,t,e,r,s)}}function Vx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Vn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Vn.Important),t.setStyle(n,r,i,s))}}function Ux(t,e,n){t.setAttribute(e,"style",n)}function eT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function tT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Bf(t,e,r),i!==null&&eT(t,e,i),s!==null&&Ux(t,e,s)}var en={};function p9(t=1){nT(vt(),_e(),br()+t,!1)}function nT(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Eu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Du(e,s,0,n)}si(n)}function Le(t,e=se.Default){let n=_e();if(n===null)return z(t,e);let r=_t();return RD(r,n,pt(t),e)}function rT(){let t="invalid";throw new Error(t)}function iT(t,e,n,r,i,s){let o=he(null);try{let a=null;i&_r.SignalBased&&(a=e[r][Fn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&_r.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):XE(e,a,r,s)}finally{he(o)}}function jx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)si(~i);else{let s=i,o=n[++r],a=n[++r];bM(o,s);let u=e[s];a(2,u)}}}finally{si(-1)}}function ul(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[jn]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),oD(p),p[yt]=p[Is]=t,p[Jt]=n,p[pn]=o||t&&t[pn],p[je]=a||t&&t[je],p[ls]=u||t&&t[ls]||null,p[Xt]=s,p[tl]=sx(),p[Nu]=h,p[YE]=l,p[gn]=e.type==2?t[gn]:p,p}function ll(t,e,n,r,i){let s=t.data[e];if(s===null)s=Bx(t,e,n,r,i),TM()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=_M();s.injectorIndex=o===null?-1:o.injectorIndex}return ea(s,!0),s}function Bx(t,e,n,r,i){let s=dD(),o=hD(),a=o?s:s&&s.parent,u=t.data[e]=Gx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function sT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oT(t,e,n,r,i){let s=br(),o=r&2;try{si(-1),o&&e.length>Bt&&nT(t,e,Bt,!1),dn(o?2:0,i),n(r,i)}finally{si(s),dn(o?3:1,i)}}function aT(t,e,n){if(JE(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function cT(t,e,n){lD()&&(Jx(t,e,n,$t(n,e)),(n.flags&64)===64&&pT(t,e,n))}function uT(t,e,n=$t){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function lT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=cg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cg(t,e,n,r,i,s,o,a,u,l,h){let p=Bt+r,m=p+i,y=$x(p,m),b=typeof l=="function"?l():l;return y[oe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function $x(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:en);return n}function Hx(t,e,n,r){let s=r.get(hx,$D)||n===fn.ShadowDom,o=t.selectRootElement(e,s);return qx(o),o}function qx(t){zx(t)}var zx=()=>null;function Gx(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return mM()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=_r.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?cE(r,n,l,a,u):cE(r,n,l,a)}return r}function cE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Wx(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=aE(0,p.inputs,h,u,y),l=aE(1,p.outputs,h,l,b);let N=u!==null&&o!==null&&!Op(e)?uP(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Kx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dT(t,e,n,r,i,s,o,a){let u=$t(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ug(t,n,h,r,i),nl(e)&&Qx(n,e.index)):e.type&3?(r=Kx(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function Qx(t,e){let n=Tr(e,t);n[Q]&16||(n[Q]|=64)}function hT(t,e,n,r){if(lD()){let i=r===null?null:{"":-1},s=eP(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fT(t,e,n,o,i,a),i&&tP(n,r,i)}n.mergedAttrs=qo(n.mergedAttrs,n.attrs)}function fT(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Zf(Uu(n,e),t,r[l].type);rP(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=sT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=qo(n.mergedAttrs,h.hostAttrs),iP(t,n,e,u,h),nP(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}Wx(t,n,s)}function Yx(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Zx(o)!=a&&o.push(a),o.push(n,r,s)}}function Zx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Jx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;nl(n)&&sP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Uu(n,e),ai(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=fs(e,t,a,n);if(ai(l,e),o!==null&&cP(e,a-i,l,u,n,o),wr(u)){let h=Tr(n.index,e);h[Jt]=fs(e,t,a,n)}}}function pT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=CM();try{si(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Kf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Xx(u,l)}}finally{si(-1),Kf(o)}}function Xx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function eP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(VN(e,o.selectors,!1))if(r||(r=[]),wr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;ap(t,e,u)}else r.unshift(o),ap(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function ap(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function nP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wr(e)&&(n[""]=t)}}function rP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function iP(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ni(i.type,!0)),o=new oi(s,wr(i),Le);t.blueprint[r]=o,n[r]=o,Yx(t,e,r,sT(t,n,i.hostVars,en),i)}function sP(t,e,n){let r=$t(e,t),i=lT(n),s=t[pn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=dl(t,ul(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function oP(t,e,n,r,i,s){let o=$t(t,e);aP(e[je],o,s,t.value,n,r,i)}function aP(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?os(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function cP(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];iT(r,n,u,l,h,p)}}function uP(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function gT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mT(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];gD(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function dl(t,e){return t[Go]?t[Ww][Zt]=e:t[Go]=e,t[Ww]=e,e}function cp(t,e,n){gD(0);let r=he(null);try{e(t,n)}finally{he(r)}}function lP(t){return t[Mu]??=[]}function dP(t){return t.cleanup??=[]}function yT(t,e){let n=t[ls],r=n?n.get(Ln,null):null;r&&r.handleError(e)}function ug(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];iT(h,l,r,a,u,i)}}function vT(t,e,n){let r=iD(e,t);Ex(t[je],r,n)}function hP(t,e){let n=Tr(e,t),r=n[oe];fP(r,n);let i=n[jn];i!==null&&n[Nu]===null&&(n[Nu]=ng(i,n[ls])),lg(r,n,n[Jt])}function fP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function lg(t,e,n){Bp(e);try{let r=t.viewQuery;r!==null&&cp(1,r,n);let i=t.template;i!==null&&oT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[hs]?.finishViewCreation(t),t.staticContentQueries&&mT(t,e),t.staticViewQueries&&cp(2,t.viewQuery,n);let s=t.components;s!==null&&pP(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,$p()}}function pP(t,e){for(let n=0;n<e.length;n++)hP(t,e[n])}function gP(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Q]&4096?4096:16,u=ul(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ds]=l;let h=t[hs];return h!==null&&(u[hs]=h.createEmbeddedView(s)),lg(s,u,n),u}finally{he(i)}}function uE(t,e){return!e||e.firstChild===null||FD(t)}function mP(t,e,n,r=!0){let i=e[oe];if(Cx(i,e,t,n),r){let o=op(n,t),a=e[je],u=JD(a,t[ri]);u!==null&&Tx(i,t[Xt],a,e,u,o)}let s=e[Nu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function qu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(mn(s)),Bn(s)&&yP(s,r);let o=n.type;if(o&8)qu(t,e,n.child,r);else if(o&32){let a=ig(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=XD(e,n);if(Array.isArray(a))r.push(...a);else{let u=ii(e[gn]);qu(u[oe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function yP(t,e){for(let n=jt;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&qu(r[oe],r,i,e)}t[ri]!==t[jn]&&e.push(t[ri])}var _T=[];function vP(t){return t[Ut]??_P(t)}function _P(t){let e=_T.pop()??Object.create(wP);return e.lView=t,e}function IP(t){t.lView[Ut]!==t&&(t.lView=null,_T.push(t))}var wP=ge(F({},jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{il(t.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function EP(t){let e=t[Ut]??Object.create(DP);return e.lView=t,e}var DP=ge(F({},jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ii(t.lView);for(;e&&!IT(e[oe]);)e=ii(e);e&&aD(e)},consumerOnSignalRead(){this.lView[Ut]=this}});function IT(t){return t.type!==2}var TP=100;function wT(t,e=!0,n=0){let r=t[pn],i=r.rendererFactory,s=!1;s||i.begin?.();try{bP(t,n)}catch(o){throw e&&yT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function bP(t,e){let n=fD();try{Qw(!0),up(t,e);let r=0;for(;rl(t);){if(r===TP)throw new j(103,!1);r++,up(t,1)}}finally{Qw(n)}}function CP(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[pn].inlineEffectRunner?.flush(),Bp(e);let a=!0,u=null,l=null;s||(IT(t)?(l=vP(e),u=lu(l)):Tw()===null?(a=!1,l=EP(e),u=lu(l)):e[Ut]&&(_f(e[Ut]),e[Ut]=null));try{oD(e),DM(t.bindingStartIndex),n!==null&&oT(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&Eu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Du(e,y,0,null),Cf(e,0)}if(o||SP(e),ET(e,0),t.contentQueries!==null&&mT(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&Eu(e,y)}else{let y=t.contentHooks;y!==null&&Du(e,y,1),Cf(e,1)}jx(t,e);let p=t.components;p!==null&&TT(e,p,0);let m=t.viewQuery;if(m!==null&&cp(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&Eu(e,y)}else{let y=t.viewHooks;y!==null&&Du(e,y,2),Cf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bf]){for(let y of e[bf])y();e[bf]=null}s||(e[Q]&=-73)}catch(h){throw s||il(e),h}finally{l!==null&&(yf(l,u),a&&IP(l)),$p()}}function ET(t,e){for(let n=VD(t);n!==null;n=UD(n))for(let r=jt;r<n.length;r++){let i=n[r];DT(i,e)}}function SP(t){for(let e=VD(t);e!==null;e=UD(e)){if(!(e[Q]&Ou.HasTransplantedViews))continue;let n=e[Pu];for(let r=0;r<n.length;r++){let i=n[r];aD(i)}}}function AP(t,e,n){let r=Tr(e,t);DT(r,n)}function DT(t,e){Up(t)&&up(t,e)}function up(t,e){let r=t[oe],i=t[Q],s=t[Ut],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&vf(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)CP(r,t,r.template,t[Jt]);else if(i&8192){ET(t,1);let a=r.components;a!==null&&TT(t,a,1)}}function TT(t,e,n){for(let r=0;r<e.length;r++)AP(t,e[r],n)}function dg(t,e){let n=fD()?64:1088;for(t[pn].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=ii(t);if(zf(t)&&!r)return t;t=r}return null}var ci=class{get rootNodes(){let e=this._lView,n=e[oe];return qu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jt]}set context(e){this._lView[Jt]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yt];if(Bn(e)){let n=e[xu],r=n?n.indexOf(this):-1;r>-1&&(sp(e,r),Au(n,r))}this._attachedToViewContainer=!1}YD(this._lView[oe],this._lView)}onDestroy(e){cD(this._lView,e)}markForCheck(){dg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){Wf(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,wT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zf(this._lView),n=this._lView[ds];n!==null&&!e&&sg(n,this._lView),KD(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=zf(this._lView),r=this._lView[ds];r!==null&&!n&&QD(r,this._lView),Wf(this._lView)}},hl=(()=>{class t{static{this.__NG_ELEMENT_ID__=MP}}return t})(),RP=hl,NP=class extends RP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=gP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ci(i)}};function MP(){return xP(_t(),_e())}function xP(t,e){return t.type&4?new NP(e,t,ol(t,e)):null}var m9=new RegExp(`^(\\d+)*(${lx}|${ux})*(.*)`);var PP=()=>null;function lE(t,e){return PP(t,e)}var ps=class{},fl=new H("",{providedIn:"root",factory:()=>!1});var bT=new H(""),CT=new H(""),lp=class{},zu=class{};function OP(t){let e=Error(`No component factory found for ${mt(t)}.`);return e[kP]=t,e}var kP="ngComponent";var dp=class{resolveComponentFactory(e){throw OP(e)}},gs=class{static{this.NULL=new dp}},ms=class{},pl=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>FP()}}return t})();function FP(){let t=_e(),e=_t(),n=Tr(e.index,t);return(vr(n)?n:t)[je]}var LP=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})();function hp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Lf(i,a);else if(s==2){let u=a,l=e[++o];r=Lf(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Gu=class extends gs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ir(e);return new ys(n,this.ngModule)}};function dE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:_r.None;e?n.push({propName:o,templateName:r,isSignal:(a&_r.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function VP(t){let e=t.toLowerCase();return e==="svg"?rD:e==="math"?uM:null}var ys=class extends zu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=dE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return dE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$N(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof Rt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Qf(e,o):e,u=a.get(ms,null);if(u===null)throw new j(407,!1);let l=a.get(LP,null),h=a.get(ps,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?Hx(m,r,this.componentDef.encapsulation,a):WD(m,y,VP(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;b!==null&&(R=ng(b,a,!0));let k=cg(0,null,null,1,0,null,null,null,null,null,null),U=ul(null,k,null,N,null,null,p,m,a,null,R);Bp(U);let $,te,Ce=null;try{let Z=this.componentDef,D,v=null;Z.findHostDirectiveDefs?(D=[],v=new Map,Z.findHostDirectiveDefs(Z,D,v),D.push(Z)):D=[Z];let I=UP(U,b);Ce=jP(I,b,Z,D,U,p,m),te=sD(k,Bt),b&&HP(m,Z,b,r),n!==void 0&&qP(te,this.ngContentSelectors,n),$=$P(Ce,Z,D,v,U,[zP]),lg(k,U,null)}catch(Z){throw Ce!==null&&rp(Ce),rp(U),Z}finally{$p()}return new fp(this.componentType,$,ol(te,U),U,te)}finally{he(s)}}},fp=class extends lp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ci(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;ug(s[oe],s,i,e,n),this.previousInputValues.set(e,n);let o=Tr(this._tNode.index,s);dg(o,1)}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function UP(t,e){let n=t[oe],r=Bt;return t[r]=e,ll(n,r,2,"#host",null)}function jP(t,e,n,r,i,s,o){let a=i[oe];BP(r,t,e,o);let u=null;e!==null&&(u=ng(e,i[ls]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=ul(i,lT(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&ap(a,t,r.length-1),dl(i,p),i[t.index]=p}function BP(t,e,n,r){for(let i of t)e.mergedAttrs=qo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(hp(e,e.mergedAttrs,!0),n!==null&&tT(r,n,e))}function $P(t,e,n,r,i,s){let o=_t(),a=i[oe],u=$t(o,i);fT(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=fs(i,a,p,o);ai(m,i)}pT(a,i,o),u&&ai(u,i);let l=fs(i,a,o.directiveStart+o.componentOffset,o);if(t[Jt]=i[Jt]=l,s!==null)for(let h of s)h(l,e);return aT(a,o,i),l}function HP(t,e,n,r){if(r)Bf(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=HN(e.selectors[0]);i&&Bf(t,n,i),s&&s.length>0&&eT(t,n,s.join(" "))}}function qP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function zP(){let t=_t();Gp(_e()[oe],t)}var Ds=(()=>{class t{static{this.__NG_ELEMENT_ID__=GP}}return t})();function GP(){let t=_t();return KP(t,_e())}var WP=Ds,ST=class extends WP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ol(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){let e=Wp(this._hostTNode,this._hostLView);if(DD(e)){let n=Lu(e,this._hostLView),r=Fu(e),i=n[oe].data[r+8];return new ti(i,n)}else return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=hE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-jt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=lE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,uE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!sM(e),a;if(o)a=n;else{let b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}let u=o?e:new ys(Ir(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(Rt,null);N&&(s=N)}let h=Ir(u.componentType??{}),p=lE(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,a,uE(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(lM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[yt],l=new ST(u,u[Xt],u[yt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return mP(o,i,s,r),e.attachToViewContainerRef(),xE(Mf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=hE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=sp(this._lContainer,n);r&&(Au(Mf(this._lContainer),n),YD(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=sp(this._lContainer,n);return r&&Au(Mf(this._lContainer),n)!=null?new ci(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function hE(t){return t[xu]}function Mf(t){return t[xu]||(t[xu]=[])}function KP(t,e){let n,r=e[t.index];return Bn(r)?n=r:(n=gT(r,e,null,t),e[t.index]=n,dl(e,n)),YP(n,e,t,r),new ST(n,t,e)}function QP(t,e){let n=t[je],r=n.createComment(""),i=$t(e,t),s=JD(n,i);return Hu(n,s,r,Mx(n,i),!1),r}var YP=XP,ZP=()=>!1;function JP(t,e,n){return ZP(t,e,n)}function XP(t,e,n,r){if(t[ri])return;let i;n.type&8?i=mn(r):i=QP(e,n),t[ri]=i}var fE=new Set;function Ts(t){fE.has(t)||(fE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function eO(t){return typeof t=="function"&&t[Fn]!==void 0}function v9(t,e){Ts("NgSignals");let n=kw(t),r=n[Fn];return e?.equal&&(r.equal=e.equal),n.set=i=>If(r,i),n.update=i=>Fw(r,i),n.asReadonly=tO.bind(n),n}function tO(){let t=this[Fn];if(t.readonlyFn===void 0){let e=()=>this();e[Fn]=t,t.readonlyFn=e}return t.readonlyFn}function AT(t){return eO(t)&&typeof t.set=="function"}function nO(t){return Object.getPrototypeOf(t.prototype).constructor}function rO(t){let e=nO(t.type),n=!0,r=[t];for(;e;){let i;if(wr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=vu(t.inputs),o.inputTransforms=vu(t.inputTransforms),o.declaredInputs=vu(t.declaredInputs),o.outputs=vu(t.outputs);let a=i.hostBindings;a&&cO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&oO(t,u),l&&aO(t,l),iO(t,i),dN(t.outputs,i.outputs),wr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===rO&&(n=!1)}}e=Object.getPrototypeOf(e)}sO(r)}function iO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function sO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qo(i.hostAttrs,n=qo(n,i.hostAttrs))}}function vu(t){return t===as?{}:t===Dt?[]:t}function oO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function aO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function cO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function hg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Er=class{},Wo=class{};var pp=class extends Er{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gu(this);let s=$E(e);this._bootstrapComponents=GD(s.bootstrap),this._r3Injector=xD(e,n,[{provide:Er,useValue:this},{provide:gs,useValue:this.componentFactoryResolver},...r],mt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gp=class extends Wo{constructor(e){super(),this.moduleType=e}create(e){return new pp(this.moduleType,e,[])}};var Wu=class extends Er{constructor(e){super(),this.componentFactoryResolver=new Gu(this),this.instance=null;let n=new zo([...e.providers,{provide:Er,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],e.parent||Fp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gl(t,e,n=null){return new Wu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function RT(t){return lO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function uO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function lO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function NT(t,e,n){return t[e]=n}function Un(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function MT(t,e,n,r){let i=Un(t,e,n);return Un(t,e+1,r)||i}function dO(t){return(t.flags&32)===32}function hO(t,e,n,r,i,s,o,a,u){let l=e.consts,h=ll(e,t,4,o||null,a||null);hT(e,n,h,ku(l,u)),Gp(e,h);let p=h.tView=cg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function fO(t,e,n,r,i,s,o,a,u,l){let h=n+Bt,p=e.firstCreatePass?hO(h,e,t,r,i,s,o,a,u):e.data[h];ea(p,!1);let m=gO(e,t,p,n);qp()&&og(e,t,m,p),ai(m,t);let y=gT(m,t,m,p);return t[h]=y,dl(t,y),JP(y,p,t),Lp(p)&&cT(e,t,p),u!=null&&uT(t,p,l),p}function pO(t,e,n,r,i,s,o,a){let u=_e(),l=vt(),h=ku(l.consts,s);return fO(u,l,t,e,n,r,i,h,o,a),pO}var gO=mO;function mO(t,e,n,r){return zp(!0),e[je].createComment("")}var rs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(rs||{}),xT=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})(),mp=class t{constructor(){this.ngZone=O(ve),this.scheduler=O(ps),this.errorHandler=O(Ln,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[rs.EarlyRead,rs.Write,rs.MixedReadWrite,rs.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}},yp=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function fg(t,e){!e?.injector&&iM(fg);let n=e?.injector??O(st);return _x(n)?(Ts("NgAfterNextRender"),vO(t,n,e,!0)):_O}function yO(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function vO(t,e,n,r){let i=e.get(xT);i.impl??=e.get(mp);let s=n?.phase??rs.MixedReadWrite,o=n?.manualCleanup!==!0?e.get(Yp):null,a=new yp(i.impl,yO(t,s),r,o);return i.impl.register(a),a}var _O={destroy(){}};function pg(t,e,n,r){let i=_e(),s=sl();if(Un(i,s,e)){let o=vt(),a=Hp();oP(a,i,t,e,n,r)}return pg}function IO(t,e,n,r){return Un(t,sl(),n)?e+os(n)+r:en}function wO(t,e,n,r,i,s){let o=EM(),a=MT(t,o,n,i);return jp(2),a?e+os(n)+r+os(i)+s:en}function _u(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function EO(t){return(t&2)==2}function DO(t,e){return t&131071|e<<17}function vp(t){return t|2}function vs(t){return(t&131068)>>2}function xf(t,e){return t&-131069|e<<2}function TO(t){return(t&1)===1}function _p(t){return t|1}function bO(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ui(o),u=vs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Zo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=ui(t[a+1]);t[r+1]=_u(m,a),m!==0&&(t[m+1]=xf(t[m+1],r)),t[a+1]=DO(t[a+1],r)}else t[r+1]=_u(a,0),a!==0&&(t[a+1]=xf(t[a+1],r)),a=r;else t[r+1]=_u(u,0),a===0?a=r:t[u+1]=xf(t[u+1],r),u=r;l&&(t[r+1]=vp(t[r+1])),pE(t,h,r,!0),pE(t,h,r,!1),CO(e,h,t,r,s),o=_u(a,u),s?e.classBindings=o:e.styleBindings=o}function CO(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Zo(s,e)>=0&&(n[r+1]=_p(n[r+1]))}function pE(t,e,n,r){let i=t[n+1],s=e===null,o=r?ui(i):vs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];SO(u,e)&&(a=!0,t[o+1]=r?_p(l):vp(l)),o=r?ui(l):vs(l)}a&&(t[n+1]=r?vp(i):_p(i))}function SO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Zo(t,e)>=0:!1}var Yt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function AO(t){return t.substring(Yt.key,Yt.keyEnd)}function RO(t){return NO(t),PT(t,OT(t,0,Yt.textEnd))}function PT(t,e){let n=Yt.textEnd;return n===e?-1:(e=Yt.keyEnd=MO(t,Yt.key=e,n),OT(t,e,n))}function NO(t){Yt.key=0,Yt.keyEnd=0,Yt.value=0,Yt.valueEnd=0,Yt.textEnd=t.length}function OT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function MO(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function xO(t,e,n){let r=_e(),i=sl();if(Un(r,i,e)){let s=vt(),o=Hp();dT(s,o,r,t,e,r[je],n,!1)}return xO}function Ip(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";ug(t,n,s[o],o,r)}function kT(t,e,n){return FT(t,e,n,!1),kT}function PO(t,e){return FT(t,e,null,!0),PO}function _9(t){kO(BO,OO,t,!0)}function OO(t,e){for(let n=RO(e);n>=0;n=PT(e,n))Pp(t,AO(e),!0)}function FT(t,e,n,r){let i=_e(),s=vt(),o=jp(2);if(s.firstUpdatePass&&VT(s,t,o,r),e!==en&&Un(i,o,e)){let a=s.data[br()];UT(s,a,i,i[je],t,i[o+1]=HO(e,n),r,o)}}function kO(t,e,n,r){let i=vt(),s=jp(2);i.firstUpdatePass&&VT(i,null,s,r);let o=_e();if(n!==en&&Un(o,s,n)){let a=i.data[br()];if(jT(a,r)&&!LT(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Lf(u,n||"")),Ip(i,a,o,n,r)}else $O(i,a,o,o[je],o[s+1],o[s+1]=jO(t,e,n),r,s)}}function LT(t,e){return e>=t.expandoStartIndex}function VT(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[br()],o=LT(t,n);jT(s,r)&&e===null&&!o&&(e=!1),e=FO(i,s,e,r),bO(i,s,e,n,o,r)}}function FO(t,e,n,r){let i=SM(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Pf(null,t,e,n,r),n=Ko(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Pf(i,t,e,n,r),s===null){let u=LO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Pf(null,t,e,u[1],r),u=Ko(u,e.attrs,r),VO(t,e,r,u))}else s=UO(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function LO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(vs(r)!==0)return t[ui(r)]}function VO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ui(i)]=r}function UO(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ko(r,o,n)}return Ko(r,e.attrs,n)}function Pf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ko(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ko(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Pp(t,o,n?!0:e[++s]))}return t===void 0?null:t}function jO(t,e,n){if(n==null||n==="")return Dt;let r=[],i=Es(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function BO(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Pp(t,r,n)}function $O(t,e,n,r,i,s,o,a){i===en&&(i=Dt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<s.length?s[l+1]:void 0,b=null,N;h===p?(u+=2,l+=2,m!==y&&(b=p,N=y)):p===null||h!==null&&h<p?(u+=2,b=h):(l+=2,b=p,N=y),b!==null&&UT(t,e,n,r,b,N,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function UT(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=TO(l)?gE(u,e,n,i,vs(l),o):void 0;if(!Ku(h)){Ku(s)||EO(l)&&(s=gE(u,null,n,i,a,o));let p=iD(br(),n);Vx(r,o,p,i,s)}}function gE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===en&&(m=p?Dt:void 0);let y=p?Df(m,r):h===r?m:void 0;if(l&&!Ku(y)&&(y=Df(u,r)),Ku(y)&&(a=y,o))return a;let b=t[i+1];i=o?ui(b):vs(b)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Df(u,r))}return a}function Ku(t){return t!==void 0}function HO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=mt(Es(t)))),t}function jT(t,e){return(t.flags&(e?8:16))!==0}function qO(t,e,n,r,i,s){let o=e.consts,a=ku(o,i),u=ll(e,t,2,r,a);return hT(e,n,u,ku(o,s)),u.attrs!==null&&hp(u,u.attrs,!1),u.mergedAttrs!==null&&hp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function BT(t,e,n,r){let i=_e(),s=vt(),o=Bt+t,a=i[je],u=s.firstCreatePass?qO(o,s,i,e,n,r):s.data[o],l=zO(s,i,u,a,e,t);i[o]=l;let h=Lp(u);return ea(u,!0),tT(a,l,u),!dO(u)&&qp()&&og(s,i,l,u),fM()===0&&ai(l,i),pM(),h&&(cT(s,i,u),aT(s,u,i)),r!==null&&uT(i,u),BT}function $T(){let t=_t();hD()?IM():(t=t.parent,ea(t,!1));let e=t;yM(e)&&vM(),gM();let n=vt();return n.firstCreatePass&&(Gp(n,t),JE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&kM(e)&&Ip(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&FM(e)&&Ip(n,e,_e(),e.stylesWithoutHost,!1),$T}function gg(t,e,n,r){return BT(t,e,n,r),$T(),gg}var zO=(t,e,n,r,i,s)=>(zp(!0),WD(r,i,MM()));function I9(){return _e()}var Xr=void 0;function GO(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var WO=["en",[["a","p"],["AM","PM"],Xr],[["AM","PM"],Xr,Xr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xr,"{1} 'at' {0}",Xr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",GO],Of={};function Nt(t){let e=KO(t),n=mE(e);if(n)return n;let r=e.split("-")[0];if(n=mE(r),n)return n;if(r==="en")return WO;throw new j(701,!1)}function mE(t){return t in Of||(Of[t]=ei.ng&&ei.ng.common&&ei.ng.common.locales&&ei.ng.common.locales[t]),Of[t]}var Oe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Oe||{});function KO(t){return t.toLowerCase().replace(/_/g,"-")}var Qu="en-US";var QO=Qu;function YO(t){typeof t=="string"&&(QO=t.toLowerCase().replace(/_/g,"-"))}var ZO=(t,e,n)=>{};function mg(t,e,n,r){let i=_e(),s=vt(),o=_t();return HT(s,i,i[je],o,t,e,r),mg}function JO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Mu],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function HT(t,e,n,r,i,s,o){let a=Lp(r),l=t.firstCreatePass&&dP(t),h=e[Jt],p=lP(e),m=!0;if(r.type&3||o){let N=$t(r,e),R=o?o(N):N,k=p.length,U=o?te=>o(mn(te[r.index])):r.index,$=null;if(!o&&a&&($=JO(t,e,i,r.index)),$!==null){let te=$.__ngLastListenerFn__||$;te.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,m=!1}else{s=vE(r,e,h,s),ZO(N,i,s);let te=n.listen(R,i,s);p.push(s,te),l&&l.push(i,U,k,k+1)}}else s=vE(r,e,h,s);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let N=b.length;if(N)for(let R=0;R<N;R+=2){let k=b[R],U=b[R+1],Ce=e[k][U].subscribe(s),Z=p.length;p.push(s,Ce),l&&l.push(i,r.index,Z,-(Z+1))}}}function yE(t,e,n,r){let i=he(null);try{return dn(6,e,n),n(r)!==!1}catch(s){return yT(t,s),!1}finally{dn(7,e,n),he(i)}}function vE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Tr(t.index,e):e;dg(o,5);let a=yE(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=yE(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function w9(t=1){return RM(t)}function XO(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function E9(t){let e=wM();return Vp(e,Bt+t)}function D9(t,e=""){let n=_e(),r=vt(),i=t+Bt,s=r.firstCreatePass?ll(r,i,1,e,null):r.data[i],o=ek(r,n,s,e,t);n[i]=o,qp()&&og(r,n,o,s),ea(s,!1)}var ek=(t,e,n,r,i)=>(zp(!0),wx(e[je],r));function tk(t){return qT("",t,""),tk}function qT(t,e,n){let r=_e(),i=IO(r,t,e,n);return i!==en&&vT(r,br(),i),qT}function nk(t,e,n,r,i){let s=_e(),o=wO(s,t,e,n,r,i);return o!==en&&vT(s,br(),o),nk}function rk(t,e,n){AT(e)&&(e=e());let r=_e(),i=sl();if(Un(r,i,e)){let s=vt(),o=Hp();dT(s,o,r,t,e,r[je],n,!1)}return rk}function T9(t,e){let n=AT(t);return n&&t.set(e),n}function ik(t,e){let n=_e(),r=vt(),i=_t();return HT(r,n,n[je],i,t,e),ik}function sk(t,e,n){let r=vt();if(r.firstCreatePass){let i=wr(t);wp(n,r.data,r.blueprint,i,!0),wp(e,r.data,r.blueprint,i,!1)}}function wp(t,e,n,r,i){if(t=pt(t),Array.isArray(t))for(let s=0;s<t.length;s++)wp(t[s],e,n,r,i);else{let s=vt(),o=_e(),a=_t(),u=us(t)?t:pt(t.provide),l=KE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(us(t)||!t.multi){let y=new oi(l,i,Le),b=Ff(u,e,i?h:h+m,p);b===-1?(Zf(Uu(a,o),s,u),kf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[b]=y,o[b]=y)}else{let y=Ff(u,e,h+m,p),b=Ff(u,e,h,h+m),N=y>=0&&n[y],R=b>=0&&n[b];if(i&&!R||!i&&!N){Zf(Uu(a,o),s,u);let k=ck(i?ak:ok,n.length,i,r,l);!i&&R&&(n[b].providerFactory=k),kf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=zT(n[i?b:y],l,!i&&r);kf(s,t,y>-1?y:b,k)}!i&&r&&R&&n[b].componentProviders++}}}function kf(t,e,n,r){let i=us(e),s=ZN(e);if(i||s){let u=(s?pt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function zT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ff(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ok(t,e,n,r){return Ep(this.multi,[])}function ak(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=fs(n,n[oe],this.providerFactory.index,r);s=a.slice(0,o),Ep(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Ep(i,s);return s}function Ep(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ck(t,e,n,r,i){let s=new oi(t,n,Le);return s.multi=[],s.index=e,s.componentProviders=0,zT(s,i,r&&!n),s}function b9(t,e=[]){return n=>{n.providersResolver=(r,i)=>sk(r,i?i(t):t,e)}}var uk=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=zE(!1,n.type),i=r.length>0?gl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(z(Rt))})}}return t})();function GT(t){Ts("NgStandalone"),t.getStandaloneInjector=e=>e.get(uk).getOrCreateStandaloneInjector(t)}function WT(t,e){let n=t[e];return n===en?void 0:n}function lk(t,e,n,r,i,s){let o=e+n;return Un(t,o,i)?NT(t,o+1,s?r.call(s,i):r(i)):WT(t,o+1)}function dk(t,e,n,r,i,s,o){let a=e+n;return MT(t,a,i,s)?NT(t,a+2,o?r.call(o,i,s):r(i,s)):WT(t,a+2)}function C9(t,e){let n=vt(),r,i=t+Bt;n.firstCreatePass?(r=hk(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ni(r.type,!0)),o,a=Et(Le);try{let u=Vu(!1),l=s();return Vu(u),XO(n,_e(),i,l),l}finally{Et(a)}}function hk(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function S9(t,e,n){let r=t+Bt,i=_e(),s=Vp(i,r);return KT(i,r)?lk(i,pD(),e,s.transform,n,s):s.transform(n)}function A9(t,e,n,r){let i=t+Bt,s=_e(),o=Vp(s,i);return KT(s,i)?dk(s,pD(),e,o.transform,n,r,o):o.transform(n,r)}function KT(t,e){return t[oe].data[e].pure}var Dr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},QT=new Dr("18.2.13");var ml=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var YT=new H("");function bs(t){return!!t&&typeof t.then=="function"}function yg(t){return!!t&&typeof t.subscribe=="function"}var yl=new H(""),ZT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=O(yl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(bs(s))n.push(s);else if(yg(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),vl=new H("");function fk(){Ow(()=>{throw new j(600,!1)})}function pk(t){return t.isBoundToModule}var gk=10;function mk(t,e,n){try{let r=n();return bs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var li=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(nx),this.afterRenderManager=O(xT),this.zonelessEnabled=O(fl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new it,this.afterTick=new it,this.componentTypes=[],this.components=[],this.isStable=O(ws).hasPendingTasks.pipe(ie(n=>!n)),this._injector=O(Rt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof zu;if(!this._injector.get(ZT).done){let m=!i&&BE(n),y=!1;throw new j(405,y)}let o;i?o=n:o=this._injector.get(gs).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=pk(o)?void 0:this._injector.get(Er),u=r||o.selector,l=o.create(st.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(YT,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Tu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new j(101,!1);let n=he(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,he(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(ms,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<gk;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)yk(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>rl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Tu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(vl,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Tu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function yk(t,e,n,r){if(!n&&!rl(t))return;wT(t,e,n&&!r?0:1)}var Dp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_l=(()=>{class t{compileModuleSync(n){return new gp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=$E(n),s=GD(i.declarations).reduce((o,a)=>{let u=Ir(a);return u&&o.push(new ys(u)),o},[]);return new Dp(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var vk=(()=>{class t{constructor(){this.zone=O(ve),this.changeDetectionScheduler=O(ps),this.applicationRef=O(li)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),_k=new H("",{factory:()=>!1});function JT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(ge(F({},XT()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:cs,multi:!0,useFactory:()=>{let r=O(vk,{optional:!0});return()=>r.initialize()}},{provide:cs,multi:!0,useFactory:()=>{let r=O(Ik);return()=>{r.initialize()}}},e===!0?{provide:bT,useValue:!0}:[],{provide:CT,useValue:n??PD}]}function R9(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=JT({ngZoneFactory:()=>{let i=XT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ts("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return yn([{provide:_k,useValue:!0},{provide:fl,useValue:!1},r])}function XT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ik=(()=>{class t{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=O(ve),this.pendingTasks=O(ws)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wk=(()=>{class t{constructor(){this.appRef=O(li),this.taskService=O(ws),this.ngZone=O(ve),this.zonelessEnabled=O(fl),this.disableScheduling=O(bT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(CT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof np||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?eE:OD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ek(){return typeof $localize<"u"&&$localize.locale||Qu}var na=new H("",{providedIn:"root",factory:()=>O(na,se.Optional|se.SkipSelf)||Ek()});var Tp=new H("");function Iu(t){return!t.moduleRef}function Dk(t){let e=Iu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{Iu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ln,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Iu(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Tp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Tp);o.add(s),t.moduleRef.onDestroy(()=>{Tu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return mk(r,n,()=>{let s=e.get(ZT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(na,Qu);if(YO(o||Qu),Iu(t)){let a=e.get(li);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return Tk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Tk(t,e){let n=t.injector.get(li);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}var bu=null;function bk(t=[],e){return st.create({name:e,providers:[{provide:el,useValue:"platform"},{provide:Tp,useValue:new Set([()=>bu=null])},...t]})}function Ck(t=[]){if(bu)return bu;let e=bk(t);return bu=e,fk(),Sk(e),e}function Sk(t){t.get(eg,null)?.forEach(n=>n())}var Cs=(()=>{class t{static{this.__NG_ELEMENT_ID__=Ak}}return t})();function Ak(t){return Rk(_t(),_e(),(t&16)===16)}function Rk(t,e,n){if(nl(t)&&!n){let r=Tr(t.index,e);return new ci(r,r)}else if(t.type&175){let r=e[gn];return new ci(r,e)}return null}var bp=class{constructor(){}supports(e){return RT(e)}create(e){return new Cp(e)}},Nk=(t,e)=>e,Cp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Nk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<_E(r,i,s)?n:r,a=_E(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,b=y+m;h<=b&&b<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!RT(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,uO(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Sp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Sp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ap=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Yu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Ap,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _E(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function IE(){return new vg([new bp])}var vg=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:IE})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||IE()),deps:[[t,new Mp,new ot]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();function eb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Ck(r),s=[JT({}),{provide:ps,useExisting:wk},...n||[]],o=new Wu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Dk({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function ra(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function N9(t,e){Ts("NgSignals");let n=Mw(t);return e?.equal&&(n[Fn].equal=e.equal),n}function _g(t){let e=he(null);try{return t()}finally{he(e)}}function tb(t){let e=Ir(t);if(!e)return null;let n=new ys(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cb=null;function Ss(){return cb}function ub(t){cb??=t}var Al=class{};var Tt=new H(""),Mg=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Mk),providedIn:"platform"})}}return t})(),lb=new H(""),Mk=(()=>{class t extends Mg{constructor(){super(),this._doc=O(Tt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ss().getBaseHref(this._doc)}onPopState(n){let r=Ss().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Ss().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function xg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function nb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Hn(t){return t&&t[0]!=="?"?"?"+t:t}var Gn=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Pg),providedIn:"root"})}}return t})(),db=new H(""),Pg=(()=>{class t extends Gn{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return xg(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Hn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Hn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Hn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(z(Mg),z(db,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),hb=(()=>{class t extends Gn{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=xg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Hn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Hn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(z(Mg),z(db,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),As=(()=>{class t{constructor(n){this._subject=new gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Ok(nb(rb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Hn(r))}normalize(n){return t.stripTrailingSlash(Pk(this._basePath,rb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Hn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Hn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Hn}static{this.joinWithSlash=xg}static{this.stripTrailingSlash=nb}static{this.\u0275fac=function(r){return new(r||t)(z(Gn))}}static{this.\u0275prov=B({token:t,factory:()=>xk(),providedIn:"root"})}}return t})();function xk(){return new As(z(Gn))}function Pk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function rb(t){return t.replace(/\/index.html$/,"")}function Ok(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var fb=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(fb||{});var It=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(It||{}),Te=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Te||{}),Mt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Mt||{}),xt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kk(t){return Nt(t)[Oe.LocaleId]}function Fk(t,e,n){let r=Nt(t),i=[r[Oe.DayPeriodsFormat],r[Oe.DayPeriodsStandalone]],s=Ht(i,e);return Ht(s,n)}function Lk(t,e,n){let r=Nt(t),i=[r[Oe.DaysFormat],r[Oe.DaysStandalone]],s=Ht(i,e);return Ht(s,n)}function Vk(t,e,n){let r=Nt(t),i=[r[Oe.MonthsFormat],r[Oe.MonthsStandalone]],s=Ht(i,e);return Ht(s,n)}function Uk(t,e){let r=Nt(t)[Oe.Eras];return Ht(r,e)}function Il(t,e){let n=Nt(t);return Ht(n[Oe.DateFormat],e)}function wl(t,e){let n=Nt(t);return Ht(n[Oe.TimeFormat],e)}function El(t,e){let r=Nt(t)[Oe.DateTimeFormat];return Ht(r,e)}function qn(t,e){let n=Nt(t),r=n[Oe.NumberSymbols][e];if(typeof r>"u"){if(e===xt.CurrencyDecimal)return n[Oe.NumberSymbols][xt.Decimal];if(e===xt.CurrencyGroup)return n[Oe.NumberSymbols][xt.Group]}return r}function jk(t,e){return Nt(t)[Oe.NumberFormats][e]}function pb(t){if(!t[Oe.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Oe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bk(t){let e=Nt(t);return pb(e),(e[Oe.ExtraData][2]||[]).map(r=>typeof r=="string"?Ig(r):[Ig(r[0]),Ig(r[1])])}function $k(t,e,n){let r=Nt(t);pb(r);let i=[r[Oe.ExtraData][0],r[Oe.ExtraData][1]],s=Ht(i,e)||[];return Ht(s,n)||[]}function Ht(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Ig(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Hk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dl={},qk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,zn=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(zn||{}),ye=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(ye||{}),me=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(me||{});function zk(t,e,n,r){let i=e1(t);e=$n(n,e)||e;let o=[],a;for(;e;)if(a=qk.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let u=i.getTimezoneOffset();r&&(u=mb(r,u),i=Xk(i,r,!0));let l="";return o.forEach(h=>{let p=Zk(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Rl(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function $n(t,e){let n=kk(t);if(Dl[n]??={},Dl[n][e])return Dl[n][e];let r="";switch(e){case"shortDate":r=Il(t,Mt.Short);break;case"mediumDate":r=Il(t,Mt.Medium);break;case"longDate":r=Il(t,Mt.Long);break;case"fullDate":r=Il(t,Mt.Full);break;case"shortTime":r=wl(t,Mt.Short);break;case"mediumTime":r=wl(t,Mt.Medium);break;case"longTime":r=wl(t,Mt.Long);break;case"fullTime":r=wl(t,Mt.Full);break;case"short":let i=$n(t,"shortTime"),s=$n(t,"shortDate");r=Tl(El(t,Mt.Short),[i,s]);break;case"medium":let o=$n(t,"mediumTime"),a=$n(t,"mediumDate");r=Tl(El(t,Mt.Medium),[o,a]);break;case"long":let u=$n(t,"longTime"),l=$n(t,"longDate");r=Tl(El(t,Mt.Long),[u,l]);break;case"full":let h=$n(t,"fullTime"),p=$n(t,"fullDate");r=Tl(El(t,Mt.Full),[h,p]);break}return r&&(Dl[n][e]=r),r}function Tl(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function tn(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Gk(t,e){return tn(t,3).substring(0,e)}function Be(t,e,n=0,r=!1,i=!1){return function(s,o){let a=Wk(t,s);if((n>0||a>-n)&&(a+=n),t===ye.Hours)a===0&&n===-12&&(a=12);else if(t===ye.FractionalSeconds)return Gk(a,e);let u=qn(o,xt.MinusSign);return tn(a,e,u,r,i)}}function Wk(t,e){switch(t){case ye.FullYear:return e.getFullYear();case ye.Month:return e.getMonth();case ye.Date:return e.getDate();case ye.Hours:return e.getHours();case ye.Minutes:return e.getMinutes();case ye.Seconds:return e.getSeconds();case ye.FractionalSeconds:return e.getMilliseconds();case ye.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function be(t,e,n=It.Format,r=!1){return function(i,s){return Kk(i,s,t,e,n,r)}}function Kk(t,e,n,r,i,s){switch(n){case me.Months:return Vk(e,i,r)[t.getMonth()];case me.Days:return Lk(e,i,r)[t.getDay()];case me.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=Bk(e),h=$k(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,b]=m,N=o>=y.hours&&a>=y.minutes,R=o<b.hours||o===b.hours&&a<b.minutes;if(y.hours<b.hours){if(N&&R)return!0}else if(N||R)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return Fk(e,i,r)[o<12?0:1];case me.Eras:return Uk(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function bl(t){return function(e,n,r){let i=-1*r,s=qn(n,xt.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case zn.Short:return(i>=0?"+":"")+tn(o,2,s)+tn(Math.abs(i%60),2,s);case zn.ShortGMT:return"GMT"+(i>=0?"+":"")+tn(o,1,s);case zn.Long:return"GMT"+(i>=0?"+":"")+tn(o,2,s)+":"+tn(Math.abs(i%60),2,s);case zn.Extended:return r===0?"Z":(i>=0?"+":"")+tn(o,2,s)+":"+tn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var Qk=0,Sl=4;function Yk(t){let e=Rl(t,Qk,1).getDay();return Rl(t,0,1+(e<=Sl?Sl:Sl+7)-e)}function gb(t){let e=t.getDay(),n=e===0?-3:Sl-e;return Rl(t.getFullYear(),t.getMonth(),t.getDate()+n)}function wg(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=gb(n),o=Yk(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return tn(i,t,qn(r,xt.MinusSign))}}function Cl(t,e=!1){return function(n,r){let s=gb(n).getFullYear();return tn(s,t,qn(r,xt.MinusSign),e)}}var Eg={};function Zk(t){if(Eg[t])return Eg[t];let e;switch(t){case"G":case"GG":case"GGG":e=be(me.Eras,Te.Abbreviated);break;case"GGGG":e=be(me.Eras,Te.Wide);break;case"GGGGG":e=be(me.Eras,Te.Narrow);break;case"y":e=Be(ye.FullYear,1,0,!1,!0);break;case"yy":e=Be(ye.FullYear,2,0,!0,!0);break;case"yyy":e=Be(ye.FullYear,3,0,!1,!0);break;case"yyyy":e=Be(ye.FullYear,4,0,!1,!0);break;case"Y":e=Cl(1);break;case"YY":e=Cl(2,!0);break;case"YYY":e=Cl(3);break;case"YYYY":e=Cl(4);break;case"M":case"L":e=Be(ye.Month,1,1);break;case"MM":case"LL":e=Be(ye.Month,2,1);break;case"MMM":e=be(me.Months,Te.Abbreviated);break;case"MMMM":e=be(me.Months,Te.Wide);break;case"MMMMM":e=be(me.Months,Te.Narrow);break;case"LLL":e=be(me.Months,Te.Abbreviated,It.Standalone);break;case"LLLL":e=be(me.Months,Te.Wide,It.Standalone);break;case"LLLLL":e=be(me.Months,Te.Narrow,It.Standalone);break;case"w":e=wg(1);break;case"ww":e=wg(2);break;case"W":e=wg(1,!0);break;case"d":e=Be(ye.Date,1);break;case"dd":e=Be(ye.Date,2);break;case"c":case"cc":e=Be(ye.Day,1);break;case"ccc":e=be(me.Days,Te.Abbreviated,It.Standalone);break;case"cccc":e=be(me.Days,Te.Wide,It.Standalone);break;case"ccccc":e=be(me.Days,Te.Narrow,It.Standalone);break;case"cccccc":e=be(me.Days,Te.Short,It.Standalone);break;case"E":case"EE":case"EEE":e=be(me.Days,Te.Abbreviated);break;case"EEEE":e=be(me.Days,Te.Wide);break;case"EEEEE":e=be(me.Days,Te.Narrow);break;case"EEEEEE":e=be(me.Days,Te.Short);break;case"a":case"aa":case"aaa":e=be(me.DayPeriods,Te.Abbreviated);break;case"aaaa":e=be(me.DayPeriods,Te.Wide);break;case"aaaaa":e=be(me.DayPeriods,Te.Narrow);break;case"b":case"bb":case"bbb":e=be(me.DayPeriods,Te.Abbreviated,It.Standalone,!0);break;case"bbbb":e=be(me.DayPeriods,Te.Wide,It.Standalone,!0);break;case"bbbbb":e=be(me.DayPeriods,Te.Narrow,It.Standalone,!0);break;case"B":case"BB":case"BBB":e=be(me.DayPeriods,Te.Abbreviated,It.Format,!0);break;case"BBBB":e=be(me.DayPeriods,Te.Wide,It.Format,!0);break;case"BBBBB":e=be(me.DayPeriods,Te.Narrow,It.Format,!0);break;case"h":e=Be(ye.Hours,1,-12);break;case"hh":e=Be(ye.Hours,2,-12);break;case"H":e=Be(ye.Hours,1);break;case"HH":e=Be(ye.Hours,2);break;case"m":e=Be(ye.Minutes,1);break;case"mm":e=Be(ye.Minutes,2);break;case"s":e=Be(ye.Seconds,1);break;case"ss":e=Be(ye.Seconds,2);break;case"S":e=Be(ye.FractionalSeconds,1);break;case"SS":e=Be(ye.FractionalSeconds,2);break;case"SSS":e=Be(ye.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=bl(zn.Short);break;case"ZZZZZ":e=bl(zn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=bl(zn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=bl(zn.Long);break;default:return null}return Eg[t]=e,e}function mb(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Jk(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Xk(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=mb(e,i);return Jk(t,r*(s-i))}function e1(t){if(ib(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Rl(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(Hk))return t1(r)}let e=new Date(t);if(!ib(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function t1(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,u,l),e}function ib(t){return t instanceof Date&&!isNaN(t.valueOf())}var n1=/^(\d+)?\.((\d+)(-(\d+))?)?$/,sb=22,Nl=".",sa="0",r1=";",i1=",",Dg="#";function s1(t,e,n,r,i,s,o=!1){let a="",u=!1;if(!isFinite(t))a=qn(n,xt.Infinity);else{let l=u1(t);o&&(l=c1(l));let h=e.minInt,p=e.minFrac,m=e.maxFrac;if(s){let U=s.match(n1);if(U===null)throw new Error(`${s} is not a valid digit info`);let $=U[1],te=U[3],Ce=U[5];$!=null&&(h=Tg($)),te!=null&&(p=Tg(te)),Ce!=null?m=Tg(Ce):te!=null&&p>m&&(m=p)}l1(l,p,m);let y=l.digits,b=l.integerLen,N=l.exponent,R=[];for(u=y.every(U=>!U);b<h;b++)y.unshift(0);for(;b<0;b++)y.unshift(0);b>0?R=y.splice(b,y.length):(R=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),a=k.join(qn(n,r)),R.length&&(a+=qn(n,i)+R.join("")),N&&(a+=qn(n,xt.Exponential)+"+"+N)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function o1(t,e,n){let r=jk(e,fb.Decimal),i=a1(r,qn(e,xt.MinusSign));return s1(t,i,e,xt.Group,xt.Decimal,n)}function a1(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(r1),i=r[0],s=r[1],o=i.indexOf(Nl)!==-1?i.split(Nl):[i.substring(0,i.lastIndexOf(sa)+1),i.substring(i.lastIndexOf(sa)+1)],a=o[0],u=o[1]||"";n.posPre=a.substring(0,a.indexOf(Dg));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===sa?n.minFrac=n.maxFrac=h+1:p===Dg?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(i1);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let h=i.length-n.posPre.length-n.posSuf.length,p=s.indexOf(Dg);n.negPre=s.substring(0,p).replace(/'/g,""),n.negSuf=s.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function c1(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function u1(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Nl))>-1&&(e=e.replace(Nl,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===sa;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===sa;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>sb&&(r=r.splice(0,sb-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function l1(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(a>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,l=e+t.integerLen,h=r.reduceRight(function(p,m,y,b){return m=m+p,b[y]=m<10?m:m-10,u&&(b[y]===0&&y>=l?b.pop():u=!1),m>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function Tg(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function yb(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var bg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},X9=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new bg(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),ob(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);ob(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Le(Ds),Le(hl),Le(vg))}}static{this.\u0275dir=_s({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function ob(t,e){t.context.$implicit=e.item}var e3=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Cg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){ab("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){ab("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Le(Ds),Le(hl))}}static{this.\u0275dir=_s({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Cg=class{constructor(){this.$implicit=null,this.ngIf=null}};function ab(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${mt(e)}'.`)}function Og(t,e){return new j(2100,!1)}var Sg=class{createSubscription(e,n){return _g(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){_g(()=>e.unsubscribe())}},Ag=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},d1=new Ag,h1=new Sg,t3=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(bs(n))return d1;if(yg(n))return h1;throw Og(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(Le(Cs,16))}}static{this.\u0275pipe=Xu({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var f1="mediumDate",p1=new H(""),g1=new H(""),n3=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??f1,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return zk(n,o,s||this.locale,a)}catch(o){throw Og(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Le(na,16),Le(p1,24),Le(g1,24))}}static{this.\u0275pipe=Xu({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var r3=(()=>{class t{constructor(n){this._locale=n}transform(n,r,i){if(!m1(n))return null;i||=this._locale;try{let s=y1(n);return o1(s,i,r)}catch(s){throw Og(t,s.message)}}static{this.\u0275fac=function(r){return new(r||t)(Le(na,16))}}static{this.\u0275pipe=Xu({name:"number",type:t,pure:!0,standalone:!0})}}return t})();function m1(t){return!(t==null||t===""||t!==t)}function y1(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var v1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Jo({type:t})}static{this.\u0275inj=Yo({})}}return t})(),kg="browser",_1="server";function I1(t){return t===kg}function Fg(t){return t===_1}var vb=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>I1(O(_n))?new Rg(O(Tt),window):new Ng})}}return t})(),Rg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=w1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function w1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Ng=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ml=class{};var Ug=class extends Al{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jg=class t extends Ug{static makeCurrent(){ub(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=D1();return n==null?null:T1(n)}resetBaseElement(){oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yb(document.cookie,e)}},oa=null;function D1(){return oa=oa||document.querySelector("base"),oa?oa.getAttribute("href"):null}function T1(t){return new URL(t,document.baseURI).pathname}var b1=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Bg=new H(""),Eb=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(z(Bg),z(ve))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),xl=class{constructor(e){this._doc=e}},Lg="ng-app-id",Db=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fg(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Lg}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Lg),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Lg,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(z(Tt),z(Xp),z(tg,8),z(_n))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Vg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hg=/%COMP%/g,Tb="%COMP%",C1=`_nghost-${Tb}`,S1=`_ngcontent-${Tb}`,A1=!0,R1=new H("",{providedIn:"root",factory:()=>A1});function N1(t){return S1.replace(Hg,t)}function M1(t){return C1.replace(Hg,t)}function bb(t,e){return e.map(n=>n.replace(Hg,t))}var _b=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Fg(a),this.defaultRenderer=new aa(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===fn.ShadowDom&&(r=ge(F({},r),{encapsulation:fn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Pl?i.applyToHost(n):i instanceof ca&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case fn.Emulated:s=new Pl(u,l,r,this.appId,h,o,a,p);break;case fn.ShadowDom:return new $g(u,l,n,r,o,a,this.nonce,p);default:s=new ca(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(z(Eb),z(Db),z(Xp),z(R1),z(Tt),z(_n),z(ve),z(tg))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),aa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ib(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ib(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Vg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Vg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Vn.DashCase|Vn.Important)?e.style.setProperty(n,r,i&Vn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Vn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ss().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Ib(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $g=class extends aa{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=bb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ca=class extends aa{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?bb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pl=class extends ca{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=N1(l),this.hostAttr=M1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},x1=(()=>{class t extends xl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(z(Tt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),wb=["alt","control","meta","shift"],P1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},k1=(()=>{class t extends xl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ss().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),wb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=P1[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),wb.forEach(o=>{if(o!==i){let a=O1[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(z(Tt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function A3(t,e){return eb(F({rootComponent:t},F1(e)))}function F1(t){return{appProviders:[...B1,...t?.providers??[]],platformProviders:j1}}function L1(){jg.makeCurrent()}function V1(){return new Ln}function U1(){return BD(document),document}var j1=[{provide:_n,useValue:kg},{provide:eg,useValue:L1,multi:!0},{provide:Tt,useFactory:U1,deps:[]}];var B1=[{provide:el,useValue:"root"},{provide:Ln,useFactory:V1,deps:[]},{provide:Bg,useClass:x1,multi:!0,deps:[Tt,ve,_n]},{provide:Bg,useClass:k1,multi:!0,deps:[Tt]},_b,Db,Eb,{provide:ms,useExisting:_b},{provide:Ml,useClass:b1,deps:[]},[]];var Cb=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(z(Tt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var re="primary",Da=Symbol("RouteTitle"),Kg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Os(t){return new Kg(t)}function H1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function q1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!In(t[n],e[n]))return!1;return!0}function In(t,e){let n=t?Qg(t):void 0,r=e?Qg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Lb(t[i],e[i]))return!1;return!0}function Qg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Lb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Vb(t){return t.length>0?t[t.length-1]:null}function Ar(t){return Ef(t)?t:bs(t)?Pe(Promise.resolve(t)):G(t)}var z1={exact:jb,subset:Bb},Ub={exact:G1,subset:W1,ignored:()=>!0};function Sb(t,e,n){return z1[n.paths](t.root,e.root,n.matrixParams)&&Ub[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function G1(t,e){return In(t,e)}function jb(t,e,n){if(!hi(t.segments,e.segments)||!Fl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!jb(t.children[r],e.children[r],n))return!1;return!0}function W1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Lb(t[n],e[n]))}function Bb(t,e,n){return $b(t,e,e.segments,n)}function $b(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!hi(i,n)||e.hasChildren()||!Fl(i,n,r))}else if(t.segments.length===n.length){if(!hi(t.segments,n)||!Fl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Bb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!hi(t.segments,i)||!Fl(t.segments,i,r)||!t.children[re]?!1:$b(t.children[re],e,s,r)}}function Fl(t,e,n){return e.every((r,i)=>Ub[n](t[i].parameters,r.parameters))}var Kn=class{constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Os(this.queryParams),this._queryParamMap}toString(){return Y1.serialize(this)}},Ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ll(this)}},di=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Os(this.parameters),this._parameterMap}toString(){return qb(this)}};function K1(t,e){return hi(t,e)&&t.every((n,r)=>In(n.parameters,e[r].parameters))}function hi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Q1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var Ta=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new ks,providedIn:"root"})}}return t})(),ks=class{parse(e){let n=new Zg(e);return new Kn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ua(e.root,!0)}`,r=X1(e.queryParams),i=typeof e.fragment=="string"?`#${Z1(e.fragment)}`:"";return`${n}${r}${i}`}},Y1=new ks;function Ll(t){return t.segments.map(e=>qb(e)).join("/")}function ua(t,e){if(!t.hasChildren())return Ll(t);if(e){let n=t.children[re]?ua(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${ua(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Q1(t,(r,i)=>i===re?[ua(t.children[re],!1)]:[`${i}:${ua(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Ll(t)}/${n[0]}`:`${Ll(t)}/(${n.join("//")})`}}function Hb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ol(t){return Hb(t).replace(/%3B/gi,";")}function Z1(t){return encodeURI(t)}function Yg(t){return Hb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vl(t){return decodeURIComponent(t)}function Ab(t){return Vl(t.replace(/\+/g,"%20"))}function qb(t){return`${Yg(t.path)}${J1(t.parameters)}`}function J1(t){return Object.entries(t).map(([e,n])=>`;${Yg(e)}=${Yg(n)}`).join("")}function X1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ol(n)}=${Ol(i)}`).join("&"):`${Ol(n)}=${Ol(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var eF=/^[^\/()?;#]+/;function qg(t){let e=t.match(eF);return e?e[0]:""}var tF=/^[^\/()?;=#]+/;function nF(t){let e=t.match(tF);return e?e[0]:""}var rF=/^[^=?&#]+/;function iF(t){let e=t.match(rF);return e?e[0]:""}var sF=/^[^&#]+/;function oF(t){let e=t.match(sF);return e?e[0]:""}var Zg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new Ie(e,n)),r}parseSegment(){let e=qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new di(Vl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=nF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=qg(this.remaining);i&&(r=i,this.capture(r))}e[Vl(n)]=Vl(r)}parseQueryParam(e){let n=iF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=oF(this.remaining);o&&(r=o,this.capture(r))}let i=Ab(n),s=Ab(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[re]:new Ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function zb(t){return t.segments.length>0?new Ie([],{[re]:t}):t}function Gb(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Gb(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ie(t.segments,e);return aF(n)}function aF(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new Ie(t.segments.concat(e.segments),e.children)}return t}function fi(t){return t instanceof Kn}function cF(t,e,n=null,r=null){let i=Wb(t);return Kb(i,e,n,r)}function Wb(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new Ie(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=zb(r);return e??i}function Kb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return zg(i,i,i,n,r);let s=uF(e);if(s.toRoot())return zg(i,i,new Ie([],{}),n,r);let o=lF(s,i,t),a=o.processChildren?ha(o.segmentGroup,o.index,s.commands):Yb(o.segmentGroup,o.index,s.commands);return zg(i,o.segmentGroup,a,n,r)}function Ul(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ga(t){return typeof t=="object"&&t!=null&&t.outlets}function zg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=Qb(t,e,n);let a=zb(Gb(o));return new Kn(a,s,i)}function Qb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Qb(s,e,n)}),new Ie(t.segments,r)}var jl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ul(r[0]))throw new j(4003,!1);let i=r.find(ga);if(i&&i!==Vb(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function uF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new jl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new jl(n,e,r)}var Ms=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function lF(t,e,n){if(t.isAbsolute)return new Ms(e,!0,0);if(!n)return new Ms(e,!1,NaN);if(n.parent===null)return new Ms(n,!0,0);let r=Ul(t.commands[0])?0:1,i=n.segments.length-1+r;return dF(n,i,t.numberOfDoubleDots)}function dF(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Ms(r,!1,i-s)}function hF(t){return ga(t[0])?t[0].outlets:{[re]:t}}function Yb(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return ha(t,e,n);let r=fF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ie(t.segments.slice(0,r.pathIndex),{});return s.children[re]=new Ie(t.segments.slice(r.pathIndex),t.children),ha(s,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?Jg(t,e,n):r.match?ha(t,0,i):Jg(t,e,n)}function ha(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=hF(n),i={};if(Object.keys(r).some(s=>s!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let s=ha(t.children[re],e,n);return new Ie(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Yb(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ie(t.segments,i)}}function fF(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ga(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Nb(u,l,o))return s;r+=2}else{if(!Nb(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ga(s)){let u=pF(s.outlets);return new Ie(r,u)}if(i===0&&Ul(n[0])){let u=t.segments[e];r.push(new di(u.path,Rb(n[0]))),i++;continue}let o=ga(s)?s.outlets[re]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ul(a)?(r.push(new di(o,Rb(a))),i+=2):(r.push(new di(o,{})),i++)}return new Ie(r,{})}function pF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Jg(new Ie([],{}),0,r))}),e}function Rb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Nb(t,e,n){return t==n.path&&In(e,n.parameters)}var fa="imperative",Qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Qe||{}),qt=class{constructor(e,n){this.id=e,this.url=n}},Fs=class extends qt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wn=class extends qt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ot||{}),Bl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Bl||{}),Wn=class extends qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cr=class extends qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qe.NavigationSkipped}},ma=class extends qt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$l=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xg=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class extends qt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tm=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nm=class extends qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rm=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},im=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},om=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},am=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cm=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ya=class{},Ls=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function gF(t,e){return t.providers&&!t._injector&&(t._injector=gl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function nn(t){return t.outlet||re}function mF(t,e){let n=t.filter(r=>nn(r)===e);return n.push(...t.filter(r=>nn(r)!==e)),n}function ba(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var um=class{get injector(){return ba(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ca(this.rootInjector),this.attachRef=null}},Ca=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new um(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(z(Rt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ql=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=lm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=lm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=dm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dm(e,this._root).map(n=>n.value)}};function lm(t,e){if(t===e.value)return e;for(let n of e.children){let r=lm(t,n);if(r)return r}return null}function dm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=dm(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ns(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var zl=class extends ql{constructor(e,n){super(e),this.snapshot=n,Im(this,e)}toString(){return this.snapshot.toString()}};function Zb(t){let e=yF(t),n=new Xe([new di("",{})]),r=new Xe({}),i=new Xe({}),s=new Xe({}),o=new Xe(""),a=new Sr(n,r,s,o,i,re,t,e.root);return a.snapshot=e.root,new zl(new Pt(a,[]),e)}function yF(t){let e={},n={},r={},i="",s=new xs([],e,r,i,n,re,t,null,{});return new Wl("",new Pt(s,[]))}var Sr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[Da]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Os(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Os(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&Xb(i)&&(r.resolve[Da]=i.title),r}var xs=class{get title(){return this.data?.[Da]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Os(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Os(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Wl=class extends ql{constructor(e,n){super(n),this.url=e,Im(this,n)}toString(){return Jb(this._root)}};function Im(t,e){e.value._routerState=t,e.children.forEach(n=>Im(t,n))}function Jb(t){let e=t.children.length>0?` { ${t.children.map(Jb).join(", ")} } `:"";return`${t.value}${e}`}function Gg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,In(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),In(e.params,n.params)||t.paramsSubject.next(n.params),q1(e.url,n.url)||t.urlSubject.next(n.url),In(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function hm(t,e){let n=In(t.params,e.params)&&K1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||hm(t.parent,e.parent))}function Xb(t){return typeof t.title=="string"||t.title===null}var vF=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.parentContexts=O(Ca),this.location=O(Ds),this.changeDetector=O(Cs),this.inputBinder=O(Zl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new fm(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=_s({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xo]})}}return t})(),fm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Sr?this.route:e===Ca?this.childContexts:this.parent.get(e,n)}},Zl=new H(""),Mb=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Lo([r.queryParams,r.params,r.data]).pipe(ft(([s,o,a],u)=>(a=F(F(F({},s),o),a),u===0?G(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=tb(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function _F(t,e,n){let r=va(t,e._root,n?n._root:void 0);return new zl(r,e)}function va(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=IF(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>va(t,a)),o}}let r=wF(e.value),i=e.children.map(s=>va(t,s));return new Pt(r,i)}}function IF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return va(t,r,i);return va(t,r)})}function wF(t){return new Sr(new Xe(t.url),new Xe(t.params),new Xe(t.queryParams),new Xe(t.fragment),new Xe(t.data),t.outlet,t.component,t)}var _a=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},eC="ngNavigationCancelingError";function Kl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=fi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tC(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[eC]=!0,n.cancellationCode=e,n}function EF(t){return nC(t)&&fi(t.url)}function nC(t){return!!t&&t[eC]}var DF=(t,e,n,r)=>ie(i=>(new pm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),pm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ns(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ns(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ns(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ns(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new om(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Gg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ql=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ps=class{constructor(e,n){this.component=e,this.route=n}};function TF(t,e,n){let r=t._root,i=e?e._root:null;return la(r,i,n,[r.value])}function bF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Us(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!bE(t)?t:e.get(t):r}function la(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ns(e);return t.children.forEach(o=>{CF(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>pa(a,n.getContext(o),i)),i}function CF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=SF(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ql(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?la(t,e,a?a.children:null,r,i):la(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ps(a.outlet.component,o))}else o&&pa(e,a,i),i.canActivateChecks.push(new Ql(r)),s.component?la(t,null,a?a.children:null,r,i):la(t,null,n,r,i);return i}function SF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!hi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(t.url,e.url)||!In(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hm(t,e)||!In(t.queryParams,e.queryParams);case"paramsChange":default:return!hm(t,e)}}function pa(t,e,n){let r=Ns(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?pa(o,e.children.getContext(s),n):pa(o,null,n):pa(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ps(e.outlet.component,i)):n.canDeactivateChecks.push(new Ps(null,i)):n.canDeactivateChecks.push(new Ps(null,i))}function Sa(t){return typeof t=="function"}function AF(t){return typeof t=="boolean"}function RF(t){return t&&Sa(t.canLoad)}function NF(t){return t&&Sa(t.canActivate)}function MF(t){return t&&Sa(t.canActivateChild)}function xF(t){return t&&Sa(t.canDeactivate)}function PF(t){return t&&Sa(t.canMatch)}function rC(t){return t instanceof kn||t?.name==="EmptyError"}var kl=Symbol("INITIAL_VALUE");function Vs(){return ft(t=>Lo(t.map(e=>e.pipe(un(1),hf(kl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===kl)return kl;if(n===!1||OF(n))return n}return!0}),Vt(e=>e!==kl),un(1)))}function OF(t){return fi(t)||t instanceof _a}function kF(t,e){return Ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(ge(F({},n),{guardsResult:!0})):FF(o,r,i,t).pipe(Ue(a=>a&&AF(a)?LF(r,s,t,e):G(a)),ie(a=>ge(F({},n),{guardsResult:a})))})}function FF(t,e,n,r){return Pe(t).pipe(Ue(i=>$F(i.component,i.route,n,e,r)),ln(i=>i!==!0,!0))}function LF(t,e,n,r){return Pe(e).pipe(Jr(i=>Qi(UF(i.route.parent,r),VF(i.route,r),BF(t,i.path,n),jF(t,i.route,n))),ln(i=>i!==!0,!0))}function VF(t,e){return t!==null&&e&&e(new am(t)),G(!0)}function UF(t,e){return t!==null&&e&&e(new sm(t)),G(!0)}function jF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>gu(()=>{let o=ba(e)??n,a=Us(s,o),u=NF(a)?a.canActivate(e,t):vn(o,()=>a(e,t));return Ar(u).pipe(ln())}));return G(i).pipe(Vs())}function BF(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>bF(o)).filter(o=>o!==null).map(o=>gu(()=>{let a=o.guards.map(u=>{let l=ba(o.node)??n,h=Us(u,l),p=MF(h)?h.canActivateChild(r,t):vn(l,()=>h(r,t));return Ar(p).pipe(ln())});return G(a).pipe(Vs())}));return G(s).pipe(Vs())}function $F(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=ba(e)??i,l=Us(a,u),h=xF(l)?l.canDeactivate(t,e,n,r):vn(u,()=>l(t,e,n,r));return Ar(h).pipe(ln())});return G(o).pipe(Vs())}function HF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=Us(o,t),u=RF(a)?a.canLoad(e,n):vn(t,()=>a(e,n));return Ar(u)});return G(s).pipe(Vs(),iC(r))}function iC(t){return tf(Ge(e=>{if(typeof e!="boolean")throw Kl(t,e)}),ie(e=>e===!0))}function qF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=Us(o,t),u=PF(a)?a.canMatch(e,n):vn(t,()=>a(e,n));return Ar(u)});return G(s).pipe(Vs(),iC(r))}var Ia=class{constructor(e){this.segmentGroup=e||null}},wa=class extends Error{constructor(e){super(),this.urlTree=e}};function Rs(t){return Yi(new Ia(t))}function zF(t){return Yi(new j(4e3,!1))}function GF(t){return Yi(tC(!1,Ot.GuardRejected))}var gm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[re])return zF(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:N}=i,R=vn(s,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Kn)throw new wa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new wa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Kn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},mm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WF(t,e,n,r,i){let s=sC(t,e,n);return s.matched?(r=gF(e,r),qF(r,e,n,i).pipe(ie(o=>o===!0?s:F({},mm)))):G(s)}function sC(t,e,n){if(e.path==="**")return KF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},mm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||H1)(n,t,e);if(!i)return F({},mm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function KF(t){return{matched:!0,parameters:t.length>0?Vb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function xb(t,e,n,r){return n.length>0&&ZF(t,n,r)?{segmentGroup:new Ie(e,YF(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&JF(t,n,r)?{segmentGroup:new Ie(t.segments,QF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function QF(t,e,n,r){let i={};for(let s of n)if(Jl(t,e,s)&&!r[nn(s)]){let o=new Ie([],{});i[nn(s)]=o}return F(F({},r),i)}function YF(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&nn(r)!==re){let i=new Ie([],{});n[nn(r)]=i}return n}function ZF(t,e,n){return n.some(r=>Jl(t,e,r)&&nn(r)!==re)}function JF(t,e,n){return n.some(r=>Jl(t,e,r))}function Jl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function XF(t,e,n){return e.length===0&&!t.children[n]}var ym=class{};function eL(t,e,n,r,i,s,o="emptyOnly"){return new vm(t,e,n,r,i,o,s).recognize()}var tL=31,vm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new gm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=xb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new Pt(r,n),s=new Wl("",i),o=cF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new xs([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,n).pipe(ie(r=>({children:r,rootSnapshot:n})),hr(r=>{if(r instanceof wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ia?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ie(o=>o instanceof Pt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Pe(s).pipe(Jr(o=>{let a=r.children[o],u=mF(n,o);return this.processSegmentGroup(e,u,a,o,i)}),df((o,a)=>(o.push(...a),o)),gr(null),lf(),Ue(o=>{if(o===null)return Rs(r);let a=oC(o);return nL(a),G(a)}))}processSegment(e,n,r,i,s,o,a){return Pe(n).pipe(Jr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(hr(l=>{if(l instanceof Ia)return G(null);throw l}))),ln(u=>!!u),hr(u=>{if(rC(u))return XF(r,i,s)?G(new ym):Rs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return nn(r)!==o&&(o===re||!Jl(i,s,r))?Rs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Rs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=sC(n,i,s);if(!u)return Rs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tL&&(this.allowRedirects=!1));let y=new xs(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Pb(i),nn(i),i.component??i._loadedComponent??null,i,Ob(i)),b=Gl(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Ue(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=WF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ft(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ft(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new xs(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Pb(r),nn(r),r.component??r._loadedComponent??null,r,Ob(r)),N=Gl(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=xb(n,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,b).pipe(ie($=>new Pt(b,$)));if(l.length===0&&k.length===0)return G(new Pt(b,[]));let U=nn(r)===s;return this.processSegment(h,l,R,k,U?re:s,!0,b).pipe(ie($=>new Pt(b,$ instanceof Pt?[$]:[])))}))):Rs(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):HF(e,n,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,n).pipe(Ge(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):GF(n))):G({routes:[],injector:e})}};function nL(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function rL(t){let e=t.value.routeConfig;return e&&e.path===""}function oC(t){let e=[],n=new Set;for(let r of t){if(!rL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=oC(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function Pb(t){return t.data||{}}function Ob(t){return t.resolve||{}}function iL(t,e,n,r,i,s){return Ue(o=>eL(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>ge(F({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function sL(t,e){return Ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of aC(u))o.add(l);let a=0;return Pe(o).pipe(Jr(u=>s.has(u)?oL(u,r,t,e):(u.data=Gl(u,u.parent,t).resolve,G(void 0))),Ge(()=>a++),Zi(1),Ue(u=>a===o.size?G(n):At))})}function aC(t){let e=t.children.map(n=>aC(n)).flat();return[t,...e]}function oL(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Xb(i)&&(s[Da]=i.title),aL(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=Gl(t,t.parent,n).resolve,null)))}function aL(t,e,n,r){let i=Qg(t);if(i.length===0)return G({});let s={};return Pe(i).pipe(Ue(o=>cL(t[o],e,n,r).pipe(ln(),Ge(a=>{if(a instanceof _a)throw Kl(new ks,a);s[o]=a}))),Zi(1),uf(s),hr(o=>rC(o)?At:Yi(o)))}function cL(t,e,n,r){let i=ba(e)??r,s=Us(t,i),o=s.resolve?s.resolve(e,n):vn(i,()=>s(e,n));return Ar(o)}function Wg(t){return ft(e=>{let n=t(e);return n?Pe(n).pipe(ie(()=>e)):G(e)})}var cC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===re);return r}getResolvedTitleForRoute(n){return n.data[Da]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(uL),providedIn:"root"})}}return t})(),uL=(()=>{class t extends cC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(z(Cb))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Aa=new H("",{providedIn:"root",factory:()=>({})}),lL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=VE({type:t,selectors:[["ng-component"]],standalone:!0,features:[GT],decls:1,vars:0,template:function(r,i){r&1&&gg(0,"router-outlet")},dependencies:[vF],encapsulation:2})}}return t})();function wm(t){let e=t.children&&t.children.map(wm),n=e?ge(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=lL),n}var Ea=new H(""),Em=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(_l)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Ar(n.loadComponent()).pipe(ie(uC),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Vo(()=>{this.componentLoaders.delete(n)})),i=new Xi(r,()=>new it).pipe(Ji());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=dL(r,this.compiler,n,this.onLoadEndListener).pipe(Vo(()=>{this.childrenLoaders.delete(r)})),o=new Xi(s,()=>new it).pipe(Ji());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function dL(t,e,n,r){return Ar(t.loadChildren()).pipe(ie(uC),Ue(i=>i instanceof Wo||Array.isArray(i)?G(i):Pe(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ea,[],{optional:!0,self:!0}).flat()),{routes:o.map(wm),injector:s}}))}function hL(t){return t&&typeof t=="object"&&"default"in t}function uC(t){return hL(t)?t.default:t}var Dm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(fL),providedIn:"root"})}}return t})(),fL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lC=new H(""),dC=new H("");function pL(t,e,n){let r=t.get(dC),i=t.get(Tt);return t.get(ve).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),gL(t))),{onViewTransitionCreated:u}=r;return u&&vn(t,()=>u({transition:a,from:e,to:n})),o})}function gL(t){return new Promise(e=>{fg({read:()=>setTimeout(e)},{injector:t})})}var mL=new H(""),Tm=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=O(Em),this.environmentInjector=O(Rt),this.urlSerializer=O(Ta),this.rootContexts=O(Ca),this.location=O(As),this.inputBindingEnabled=O(Zl,{optional:!0})!==null,this.titleStrategy=O(cC),this.options=O(Aa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Dm),this.createViewTransition=O(lC,{optional:!0}),this.navigationErrorHandler=O(mL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let n=i=>this.events.next(new rm(i)),r=i=>this.events.next(new im(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ge(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Xe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vt(s=>s.id!==0),ie(s=>ge(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ft(s=>{let o=!1,a=!1;return G(s).pipe(ft(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ot.SupersededByNewNavigation),At;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ge(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Cr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Bl.IgnoredSameUrlNavigation)),u.resolve(!1),At}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(ft(p=>{let m=this.transitions?.getValue();return this.events.next(new Fs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?At:Promise.resolve(p)}),iL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ge(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new $l(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:N}=u,R=new Fs(p,this.urlSerializer.serialize(m),y,b);this.events.next(R);let k=Zb(this.rootComponentType).snapshot;return this.currentTransition=s=ge(F({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:ge(F({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,G(s)}else{let p="";return this.events.next(new Cr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Bl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),At}}),Ge(u=>{let l=new Xg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ie(u=>(this.currentTransition=s=ge(F({},u),{guards:TF(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),kF(this.environmentInjector,u=>this.events.next(u)),Ge(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Kl(this.urlSerializer,u.guardsResult);let l=new em(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Vt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ot.GuardRejected),!1)),Wg(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(Ge(l=>{let h=new tm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ft(l=>{let h=!1;return G(l).pipe(sL(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ot.NoDataFromResolver)}}))}),Ge(l=>{let h=new nm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Wg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ge(m=>{h.component=m}),ie(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Lo(l(u.targetSnapshot.root)).pipe(gr(null),un(1))}),Wg(()=>this.afterPreactivation()),ft(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Pe(h).pipe(ie(()=>s)):G(s)}),ie(u=>{let l=_F(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ge(F({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ge(()=>{this.events.next(new ya)}),DF(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),un(1),Ge({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),ff(this.transitionAbortSubject.pipe(Ge(u=>{throw u}))),Vo(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),hr(u=>{if(a=!0,nC(u))this.events.next(new Wn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),EF(u)?this.events.next(new Ls(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new ma(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=vn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof _a){let{message:p,cancellationCode:m}=Kl(this.urlSerializer,h);this.events.next(new Wn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Ls(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return At}))}))}cancelNavigationTransition(n,r,i){let s=new Wn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function yL(t){return t!==fa}var vL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(_L),providedIn:"root"})}}return t})(),_m=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},_L=(()=>{class t extends _m{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Kp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),hC=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(IL),providedIn:"root"})}}return t})(),IL=(()=>{class t extends hC{constructor(){super(...arguments),this.location=O(As),this.urlSerializer=O(Ta),this.options=O(Aa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Dm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Kn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Fs)this.stateMemento=this.createStateMemento();else if(n instanceof Cr)this.rawUrlTree=r.initialUrl;else if(n instanceof $l){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ya?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Wn&&(n.code===Ot.GuardRejected||n.code===Ot.NoDataFromResolver)?this.restoreHistory(r):n instanceof ma?this.restoreHistory(r,!0):n instanceof wn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Kn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Kp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),da=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(da||{});function fC(t,e){t.events.pipe(Vt(n=>n instanceof wn||n instanceof Wn||n instanceof ma||n instanceof Cr),ie(n=>n instanceof wn||n instanceof Cr?da.COMPLETE:(n instanceof Wn?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?da.REDIRECTING:da.FAILED),Vt(n=>n!==da.REDIRECTING),un(1)).subscribe(()=>{e()})}function wL(t){throw t}var EL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(ml),this.stateManager=O(hC),this.options=O(Aa,{optional:!0})||{},this.pendingTasks=O(ws),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Tm),this.urlSerializer=O(Ta),this.location=O(As),this.urlHandlingStrategy=O(Dm),this._events=new it,this.errorHandler=this.options.errorHandler||wL,this.navigated=!1,this.routeReuseStrategy=O(vL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(Ea,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Zl,{optional:!0}),this.eventsSubscription=new xe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Wn&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wn)this.navigated=!0;else if(r instanceof Ls){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yL(i.source)},o);this.scheduleNavigation(a,fa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}bL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(wm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Wb(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return Kb(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=fi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,fa,null,r)}navigate(n,r={skipLocationChange:!1}){return TL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},EL):r===!1?i=F({},DL):i=r,fi(n))return Sb(this.currentUrlTree,n,i);let s=this.parseUrl(n);return Sb(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return fC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function TL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function bL(t){return!(t instanceof ya)&&!(t instanceof Ls)}var Q3=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new it,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof wn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:qD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return this.routerLinkInput===null?null:fi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(Le(Qn),Le(Sr),Qp("tabindex"),Le(pl),Le(ta),Le(Gn))}}static{this.\u0275dir=_s({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&mg("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&pg("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ra],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ra],replaceUrl:[2,"replaceUrl","replaceUrl",ra],routerLink:"routerLink"},standalone:!0,features:[hg,Xo]})}}return t})();var Yl=class{};var CL=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Vt(n=>n instanceof wn),Jr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=gl(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Pe(i).pipe(Ki())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=G(null);let s=i.pipe(Ue(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Pe([s,o]).pipe(Ki())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(z(Qn),z(_l),z(Rt),z(Yl),z(Em))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pC=new H(""),SL=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Fs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof wn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Cr&&n.code===Bl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Hl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){rT()}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function Y3(t,...e){return yn([{provide:Ea,multi:!0,useValue:t},[],{provide:Sr,useFactory:gC,deps:[Qn]},{provide:vl,multi:!0,useFactory:mC},e.map(n=>n.\u0275providers)])}function gC(t){return t.routerState.root}function Ra(t,e){return{\u0275kind:t,\u0275providers:e}}function mC(){let t=O(st);return e=>{let n=t.get(li);if(e!==n.components[0])return;let r=t.get(Qn),i=t.get(yC);t.get(bm)===1&&r.initialNavigation(),t.get(vC,null,se.Optional)?.setUpPreloading(),t.get(pC,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yC=new H("",{factory:()=>new it}),bm=new H("",{providedIn:"root",factory:()=>1});function AL(){return Ra(2,[{provide:bm,useValue:0},{provide:yl,multi:!0,deps:[st],useFactory:e=>{let n=e.get(lb,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Qn),s=e.get(yC);fC(i,()=>{r(!0)}),e.get(Tm).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function RL(){return Ra(3,[{provide:yl,multi:!0,useFactory:()=>{let e=O(Qn);return()=>{e.setUpLocationChangeListener()}}},{provide:bm,useValue:2}])}var vC=new H("");function NL(t){return Ra(0,[{provide:vC,useExisting:CL},{provide:Yl,useExisting:t}])}function ML(){return Ra(8,[Mb,{provide:Zl,useExisting:Mb}])}function xL(t){let e=[{provide:lC,useValue:pL},{provide:dC,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ra(9,e)}var kb=new H("ROUTER_FORROOT_GUARD"),PL=[As,{provide:Ta,useClass:ks},Qn,Ca,{provide:Sr,useFactory:gC,deps:[Qn]},Em,[]],Z3=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[PL,[],{provide:Ea,multi:!0,useValue:n},{provide:kb,useFactory:LL,deps:[[Qn,new ot,new Mp]]},{provide:Aa,useValue:r||{}},r?.useHash?kL():FL(),OL(),r?.preloadingStrategy?NL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?VL(r):[],r?.bindToComponentInputs?ML().\u0275providers:[],r?.enableViewTransitions?xL().\u0275providers:[],UL()]}}static forChild(n){return{ngModule:t,providers:[{provide:Ea,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(z(kb,8))}}static{this.\u0275mod=Jo({type:t})}static{this.\u0275inj=Yo({})}}return t})();function OL(){return{provide:pC,useFactory:()=>{let t=O(vb),e=O(ve),n=O(Aa),r=O(Tm),i=O(Ta);return n.scrollOffset&&t.setOffset(n.scrollOffset),new SL(i,r,t,e,n)}}}function kL(){return{provide:Gn,useClass:hb}}function FL(){return{provide:Gn,useClass:Pg}}function LL(t){return"guarded"}function VL(t){return[t.initialNavigation==="disabled"?RL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?AL().\u0275providers:[]]}var Fb=new H("");function UL(){return[{provide:Fb,useFactory:mC},{provide:vl,multi:!0,useExisting:Fb}]}var IC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Sm;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Sm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BL=function(t){let e=IC(t);return wC.encodeByteArray(e,!0)},Na=function(t){return BL(t).replace(/\./g,"")},Rm=function(t){try{return wC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $L(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HL=()=>$L().__FIREBASE_DEFAULTS__,qL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Rm(t[1]);return e&&JSON.parse(e)},ed=()=>{try{return HL()||qL()||zL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nm=t=>{var e,n;return(n=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EC=t=>{let e=Nm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mm=()=>{var t;return(t=ed())===null||t===void 0?void 0:t.config},xm=t=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${t}`]};var Xl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function DC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Na(JSON.stringify(n)),Na(JSON.stringify(o)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function GL(){var t;let e=(t=ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AC(){let t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RC(){return!GL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pm(){try{return typeof indexedDB=="object"}catch{return!1}}function NC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var WL="FirebaseError",kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yn.prototype.create)}},Yn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?KL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kt(i,a,r)}};function KL(t,e){return t.replace(QL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var QL=/\{\$([^}]+)}/g;function MC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(_C(s)&&_C(o)){if(!pi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function _C(t){return t!==null&&typeof t=="object"}function Ma(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function js(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Bs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xC(t,e){let n=new Am(t,e);return n.subscribe.bind(n)}var Am=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cm),i.error===void 0&&(i.error=Cm),i.complete===void 0&&(i.complete=Cm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function YL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cm(){}var e6=4*60*60*1e3;function ke(t){return t&&t._delegate?t._delegate:t}var zt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gi="[DEFAULT]";var Om=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Xl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JL(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZL(t){return t===gi?void 0:t}function JL(t){return t.instantiationMode==="EAGER"}var td=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Om(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var XL=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),eV={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},tV=ce.INFO,nV={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},rV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=nV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rr=class{constructor(e){this.name=e,this._logLevel=tV,this._logHandler=rV,this._userLogHandler=null,XL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var iV=(t,e)=>e.some(n=>t instanceof n),PC,OC;function sV(){return PC||(PC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oV(){return OC||(OC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kC=new WeakMap,Fm=new WeakMap,FC=new WeakMap,km=new WeakMap,Vm=new WeakMap;function aV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(En(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kC.set(n,t)}).catch(()=>{}),Vm.set(e,t),e}function cV(t){if(Fm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fm.set(t,e)}var Lm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LC(t){Lm=t(Lm)}function uV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(nd(this),e,...n);return FC.set(r,e.sort?e.sort():[e]),En(r)}:oV().includes(t)?function(...e){return t.apply(nd(this),e),En(kC.get(this))}:function(...e){return En(t.apply(nd(this),e))}}function lV(t){return typeof t=="function"?uV(t):(t instanceof IDBTransaction&&cV(t),iV(t,sV())?new Proxy(t,Lm):t)}function En(t){if(t instanceof IDBRequest)return aV(t);if(km.has(t))return km.get(t);let e=lV(t);return e!==t&&(km.set(t,e),Vm.set(e,t)),e}var nd=t=>Vm.get(t);function UC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=En(o);return r&&o.addEventListener("upgradeneeded",u=>{r(En(o.result),u.oldVersion,u.newVersion,En(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var dV=["get","getKey","getAll","getAllKeys","count"],hV=["put","add","delete","clear"],Um=new Map;function VC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Um.get(e))return Um.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=hV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dV.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Um.set(e,s),s}LC(t=>ge(F({},t),{get:(e,n,r)=>VC(e,n)||t.get(e,n,r),has:(e,n)=>!!VC(e,n)||t.has(e,n)}));var Bm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function fV(t){let e=t.getComponent();return e?.type==="VERSION"}var $m="@firebase/app",jC="0.10.13";var Zn=new Rr("@firebase/app"),pV="@firebase/app-compat",gV="@firebase/analytics-compat",mV="@firebase/analytics",yV="@firebase/app-check-compat",vV="@firebase/app-check",_V="@firebase/auth",IV="@firebase/auth-compat",wV="@firebase/database",EV="@firebase/data-connect",DV="@firebase/database-compat",TV="@firebase/functions",bV="@firebase/functions-compat",CV="@firebase/installations",SV="@firebase/installations-compat",AV="@firebase/messaging",RV="@firebase/messaging-compat",NV="@firebase/performance",MV="@firebase/performance-compat",xV="@firebase/remote-config",PV="@firebase/remote-config-compat",OV="@firebase/storage",kV="@firebase/storage-compat",FV="@firebase/firestore",LV="@firebase/vertexai-preview",VV="@firebase/firestore-compat",UV="firebase",jV="10.14.1";var Hm="[DEFAULT]",BV={[$m]:"fire-core",[pV]:"fire-core-compat",[mV]:"fire-analytics",[gV]:"fire-analytics-compat",[vV]:"fire-app-check",[yV]:"fire-app-check-compat",[_V]:"fire-auth",[IV]:"fire-auth-compat",[wV]:"fire-rtdb",[EV]:"fire-data-connect",[DV]:"fire-rtdb-compat",[TV]:"fire-fn",[bV]:"fire-fn-compat",[CV]:"fire-iid",[SV]:"fire-iid-compat",[AV]:"fire-fcm",[RV]:"fire-fcm-compat",[NV]:"fire-perf",[MV]:"fire-perf-compat",[xV]:"fire-rc",[PV]:"fire-rc-compat",[OV]:"fire-gcs",[kV]:"fire-gcs-compat",[FV]:"fire-fst",[VV]:"fire-fst-compat",[LV]:"fire-vertex","fire-js":"fire-js",[UV]:"fire-js-all"};var xa=new Map,$V=new Map,qm=new Map;function BC(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){let e=t.name;if(qm.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;qm.set(e,t);for(let n of xa.values())BC(n,t);for(let n of $V.values())BC(n,t);return!0}function Oa(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t.settings!==void 0}var HV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Yn("app","Firebase",HV);var zm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var xr=jV;function Km(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=Mm()),!n)throw Nr.create("no-options");let s=xa.get(i);if(s){if(pi(n,s.options)&&pi(r,s.config))return s;throw Nr.create("duplicate-app",{appName:i})}let o=new td(i);for(let u of qm.values())o.addComponent(u);let a=new zm(n,r,o);return xa.set(i,a),a}function mi(t=Hm){let e=xa.get(t);if(!e&&t===Hm&&Mm())return Km();if(!e)throw Nr.create("no-app",{appName:t});return e}function ka(){return Array.from(xa.values())}function $e(t,e,n){var r;let i=(r=BV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(a.join(" "));return}Mr(new zt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qV="firebase-heartbeat-database",zV=1,Pa="firebase-heartbeat-store",jm=null;function zC(){return jm||(jm=UC(qV,zV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),jm}function GV(t){return _(this,null,function*(){try{let n=(yield zC()).transaction(Pa),r=yield n.objectStore(Pa).get(GC(t));return yield n.done,r}catch(e){if(e instanceof kt)Zn.warn(e.message);else{let n=Nr.create("idb-get",{originalErrorMessage:e?.message});Zn.warn(n.message)}}})}function $C(t,e){return _(this,null,function*(){try{let r=(yield zC()).transaction(Pa,"readwrite");yield r.objectStore(Pa).put(e,GC(t)),yield r.done}catch(n){if(n instanceof kt)Zn.warn(n.message);else{let r=Nr.create("idb-set",{originalErrorMessage:n?.message});Zn.warn(r.message)}}})}function GC(t){return`${t.name}!${t.options.appId}`}var WV=1024,KV=30*24*60*60*1e3,Gm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Wm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=HC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=KV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=HC(),{heartbeatsToSend:r,unsentEntries:i}=QV(this._heartbeatsCache.heartbeats),s=Na(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Zn.warn(n),""}})}};function HC(){return new Date().toISOString().substring(0,10)}function QV(t,e=WV){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),qC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Wm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Pm()?NC().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield GV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return $C(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return $C(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function qC(t){return Na(JSON.stringify({version:2,heartbeats:t})).length}function YV(t){Mr(new zt("platform-logger",e=>new Bm(e),"PRIVATE")),Mr(new zt("heartbeat",e=>new Gm(e),"PRIVATE")),$e($m,jC,t),$e($m,jC,"esm2017"),$e("fire-js","")}YV("");var ZV="firebase",JV="10.14.1";$e(ZV,JV,"app");var vi=new Dr("ANGULARFIRE2_VERSION");function id(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Fa=(t,e)=>{let n=e?[e]:ka(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},sd=class{constructor(){return Fa(eU)}},eU="app-check";function $s(){}var WC=class{zone;delegate;constructor(t,e=wf){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let r=this.zone,i=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(i,e,n)}},tU=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$s,{},$s,$s)),e.pipe(Ge({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hs=class rd{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new WC(Zone.current)),this.insideAngular=n.run(()=>new WC(Zone.current,cf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||rd)(z(ve))};static \u0275prov=B({token:rd,factory:rd.\u0275fac,providedIn:"root"})};function od(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function nU(t){return od().ngZone.runOutsideAngular(()=>t())}function yi(t){return od().ngZone.run(()=>t())}function rU(t){return iU(od())(t)}function iU(t){return function(n){return n=n.lift(new tU(t.ngZone)),n.pipe(pr(t.outsideAngular),fr(t.insideAngular))}}var sU=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),yi(()=>t.apply(void 0,r))},Ae=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$s,{},$s,$s))),r[s]=sU(r[s],n));let i=nU(()=>t.apply(this,r));if(!e)if(i instanceof X){let s=od();return i.pipe(pr(s.outsideAngular),fr(s.insideAngular))}else return yi(()=>i);return i instanceof X?i.pipe(rU):i instanceof Promise?yi(()=>new Promise((s,o)=>i.then(a=>yi(()=>s(a)),a=>yi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:yi(()=>i)};var _i=class{constructor(t){return t}},La=class{constructor(){return ka()}};function oU(t){return t&&t.length===1?t[0]:new _i(mi())}var Qm=new H("angularfire2._apps"),aU={provide:_i,useFactory:oU,deps:[[new ot,Qm]]},cU={provide:La,deps:[[new ot,Qm]]};function uU(t){return(e,n)=>{let r=n.get(_n);$e("angularfire",vi.full,"core"),$e("angularfire",vi.full,"app"),$e("angular",QT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new _i(i)}}function $6(t,...e){return yn([aU,cU,{provide:Qm,useFactory:uU(t),multi:!0,deps:[ve,st,Hs,...e]}])}var z6=Ae(Km,!0);function lS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var dS=lS,hS=new Yn("auth","Firebase",lS());var hd=new Rr("@firebase/auth");function lU(t,...e){hd.logLevel<=ce.WARN&&hd.warn(`Auth (${xr}): ${t}`,...e)}function cd(t,...e){hd.logLevel<=ce.ERROR&&hd.error(`Auth (${xr}): ${t}`,...e)}function Tn(t,...e){throw vy(t,...e)}function Ii(t,...e){return vy(t,...e)}function fS(t,e,n){let r=Object.assign(Object.assign({},dS()),{[e]:n});return new Yn("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return fS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hS.create(t,...e)}function W(t,e,...n){if(!t)throw vy(e,...n)}function Jn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw cd(e),new Error(e)}function Or(t,e){t||Jn(e)}function Xm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dU(){return KC()==="http:"||KC()==="https:"}function KC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function hU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dU()||CC()||"connection"in navigator)?navigator.onLine:!0}function fU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var wi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Or(n>e,"Short delay should be less than long delay!"),this.isMobile=TC()||SC()}get(){return hU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function _y(t,e){Or(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var fd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var pU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gU=new wi(3e4,6e4);function kr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function tr(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return pS(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ma(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return bC()||(y.referrerPolicy="no-referrer"),fd.fetch()(gS(t,t.config.apiHost,n,p),y)}))})}function pS(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},pU),e);try{let i=new ey(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ad(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ad(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ad(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fS(t,h,l);Tn(t,h)}}catch(i){if(i instanceof kt)throw i;Tn(t,"network-request-failed",{message:String(i)})}})}function qa(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield tr(t,e,n,r,i);return"mfaPendingCredential"in l&&Tn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function gS(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?_y(t.config,i):`${t.config.apiScheme}://${i}`}function mU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ey=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ii(this.auth,"network-request-failed")),gU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ad(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ii(t,e,r);return i.customData._tokenResponse=n,i}function QC(t){return t!==void 0&&t.enterprise!==void 0}var ty=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function yU(t,e){return _(this,null,function*(){return tr(t,"GET","/v2/recaptchaConfig",kr(t,e))})}function vU(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:delete",e)})}function mS(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:lookup",e)})}function Va(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Iy(t,e=!1){return _(this,null,function*(){let n=ke(t),r=yield n.getIdToken(e),i=wy(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Va(Ym(i.auth_time)),issuedAtTime:Va(Ym(i.iat)),expirationTime:Va(Ym(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ym(t){return Number(t)*1e3}function wy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Rm(n);return i?JSON.parse(i):(cd("Failed to decode base64 JWT payload"),null)}catch(i){return cd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function YC(t){let e=wy(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qs(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof kt&&_U(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function _U({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ny=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ja=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pd(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield qs(t,mS(n,{idToken:r}));W(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yS(s.providerUserInfo):[],a=IU(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ja(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Ey(t){return _(this,null,function*(){let e=ke(t);yield pd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function IU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yS(t){return t.map(e=>{var{providerId:n}=e,r=of(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function wU(t,e){return _(this,null,function*(){let n=yield pS(t,{},()=>_(this,null,function*(){let r=Ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=gS(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function EU(t,e){return _(this,null,function*(){return tr(t,"POST","/v2/accounts:revokeToken",kr(t,e))})}var Ua=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=YC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield wU(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Jn("not implemented")}};function Pr(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var zs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=of(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ny(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ja(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield qs(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Iy(this,e)}reload(){return Ey(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield pd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(rn(this.auth.app))return Promise.reject(er(this.auth));let e=yield this.getIdToken();return yield qs(this,vU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:te,isAnonymous:Ce,providerData:Z,stsTokenManager:D}=n;W($&&D,e,"internal-error");let v=Ua.fromJSON(this.name,D);W(typeof $=="string",e,"internal-error"),Pr(p,e.name),Pr(m,e.name),W(typeof te=="boolean",e,"internal-error"),W(typeof Ce=="boolean",e,"internal-error"),Pr(y,e.name),Pr(b,e.name),Pr(N,e.name),Pr(R,e.name),Pr(k,e.name),Pr(U,e.name);let I=new t({uid:$,auth:e,email:m,emailVerified:te,displayName:p,isAnonymous:Ce,photoURL:b,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:k,lastLoginAt:U});return Z&&Array.isArray(Z)&&(I.providerData=Z.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Ua;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?yS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ua;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ja(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var ZC=new Map;function Xn(t){Or(t instanceof Function,"Expected a class definition");let e=ZC.get(t);return e?(Or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ZC.set(t,e),e)}var DU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ry=DU;function ud(t,e,n){return`firebase:${t}:${e}:${n}`}var gd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ud(this.userKey,i.apiKey,s),this.fullPersistenceKey=ud("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?zs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Xn(ry),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Xn(ry),o=ud(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=zs._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function JC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DS(e))return"Blackberry";if(TS(e))return"Webos";if(_S(e))return"Safari";if((e.includes("chrome/")||IS(e))&&!e.includes("edge/"))return"Chrome";if(ES(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function vS(t=Ye()){return/firefox\//i.test(t)}function _S(t=Ye()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IS(t=Ye()){return/crios\//i.test(t)}function wS(t=Ye()){return/iemobile/i.test(t)}function ES(t=Ye()){return/android/i.test(t)}function DS(t=Ye()){return/blackberry/i.test(t)}function TS(t=Ye()){return/webos/i.test(t)}function Dy(t=Ye()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TU(t=Ye()){var e;return Dy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bU(){return AC()&&document.documentMode===10}function bS(t=Ye()){return Dy(t)||ES(t)||TS(t)||DS(t)||/windows phone/i.test(t)||wS(t)}function CS(t,e=[]){let n;switch(t){case"Browser":n=JC(Ye());break;case"Worker":n=`${JC(Ye())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}var iy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function CU(n){return _(this,arguments,function*(t,e={}){return tr(t,"GET","/v2/passwordPolicy",kr(t,e))})}var SU=6,sy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var oy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new md(this),this.idTokenSubscription=new md(this),this.beforeStateQueue=new iy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield gd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield mS(this,{idToken:e}),r=yield zs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(rn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield pd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fU()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(rn(this.app))return Promise.reject(er(this));let n=e?ke(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return rn(this.app)?Promise.reject(er(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return rn(this.app)?Promise.reject(er(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield CU(this),n=new sy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield EU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Xn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield gd.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&lU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Di(t){return ke(t)}var md=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xC(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Dd={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AU(t){Dd=t}function SS(t){return Dd.loadJS(t)}function RU(){return Dd.recaptchaEnterpriseScript}function NU(){return Dd.gapiScript}function AS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var MU="recaptcha-enterprise",xU="NO_RECAPTCHA",ay=class{constructor(e){this.type=MU,this.auth=Di(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){yU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new ty(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;QC(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(xU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&QC(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=RU();u.length!==0&&(u+=a),SS(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function XC(t,e,n,r=!1){return _(this,null,function*(){let i=new ay(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function cy(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield XC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield XC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Ty(t,e){let n=Oa(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(pi(s,e??{}))return i;Tn(i,"already-initialized")}return n.initialize({options:e})}function PU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function by(t,e,n){let r=Di(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=RS(e),{host:o,port:a}=OU(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||kU()}function RS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OU(t){let e=RS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:eS(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:eS(o)}}}function eS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function kU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ba=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}};function FU(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:update",e)})}function LU(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:signUp",e)})}function VU(t,e){return _(this,null,function*(){return qa(t,"POST","/v1/accounts:signInWithPassword",kr(t,e))})}function UU(t,e){return _(this,null,function*(){return qa(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,e))})}function jU(t,e){return _(this,null,function*(){return qa(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,e))})}var $a=class t extends Ba{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cy(e,n,"signInWithPassword",VU);case"emailLink":return UU(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cy(e,r,"signUpPassword",LU);case"emailLink":return jU(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Zm(t,e){return _(this,null,function*(){return qa(t,"POST","/v1/accounts:signInWithIdp",kr(t,e))})}function BU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $U(t){let e=js(Bs(t)).link,n=e?js(Bs(e)).deep_link_id:null,r=js(Bs(t)).deep_link_id;return(r?js(Bs(r)).link:null)||r||n||e||t}var yd=class t{constructor(e){var n,r,i,s,o,a;let u=js(Bs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=BU((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=$U(e);try{return new t(n)}catch{return null}}};var NS=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return $a._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=yd.parseLink(r);return W(i,"argument-error"),$a._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),vd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var uy=class extends vd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function HU(t,e){return _(this,null,function*(){return qa(t,"POST","/v1/accounts:signUp",kr(t,e))})}var Gs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield zs._fromIdTokenResponse(e,r,i),o=tS(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=tS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function tS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ly=class t extends kt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function MS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ly._fromErrorAndOperation(t,s,e,r):s})}function qU(t,e,n=!1){return _(this,null,function*(){let r=yield qs(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Gs._forOperation(t,"link",r)})}function zU(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(rn(r.app))return Promise.reject(er(r));let i="reauthenticate";try{let s=yield qs(t,MS(r,i,e,t),n);W(s.idToken,r,"internal-error");let o=wy(s.idToken);W(o,r,"internal-error");let{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),Gs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Tn(r,"user-mismatch"),s}})}function xS(t,e,n=!1){return _(this,null,function*(){if(rn(t.app))return Promise.reject(er(t));let r="signIn",i=yield MS(t,r,e),s=yield Gs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Cy(t,e){return _(this,null,function*(){return xS(Di(t),e)})}function PS(t){return _(this,null,function*(){let e=Di(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Sy(t,e,n){return _(this,null,function*(){if(rn(t.app))return Promise.reject(er(t));let r=Di(t),o=yield cy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HU).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&PS(t),u}),a=yield Gs._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Ay(t,e,n){return rn(t.app)?Promise.reject(er(t)):Cy(ke(t),NS.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&PS(t),r}))}function Ry(t,e){return GU(ke(t),null,e)}function GU(t,e,n){return _(this,null,function*(){let{auth:r}=t,s={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);let o=yield qs(t,FU(r,s));yield t._updateTokensIfNecessary(o,!0)})}function za(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function Ny(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function Td(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function My(t){return ke(t).signOut()}var _d="__sak";var Id=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var WU=1e3,KU=10,QU=(()=>{class t extends Id{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);bU()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,KU):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},WU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield lr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield lr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield lr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),OS=QU;var YU=(()=>{class t extends Id{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),xy=YU;function ZU(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var JU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield ZU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function kS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var dy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=kS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Dn(){return window}function XU(t){Dn().location.href=t}function FS(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}function ej(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function tj(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nj(){return FS()?self:null}var LS="firebaseLocalStorageDb",rj=1,wd="firebaseLocalStorage",VS="fbase_key",Ei=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function bd(t,e){return t.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function ij(){let t=indexedDB.deleteDatabase(LS);return new Ei(t).toPromise()}function hy(){let t=indexedDB.open(LS,rj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(wd,{keyPath:VS})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(wd)?e(r):(r.close(),yield ij(),e(yield hy()))}))})}function nS(t,e,n){return _(this,null,function*(){let r=bd(t,!0).put({[VS]:e,value:n});return new Ei(r).toPromise()})}function sj(t,e){return _(this,null,function*(){let n=bd(t,!1).get(e),r=yield new Ei(n).toPromise();return r===void 0?null:r.value})}function rS(t,e){let n=bd(t,!0).delete(e);return new Ei(n).toPromise()}var oj=800,aj=3,cj=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield hy(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>aj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return FS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=JU._getInstance(nj()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield ej(),!this.activeServiceWorker)return;this.sender=new dy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||tj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield hy();return yield nS(n,_d,"1"),yield rS(n,_d),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>nS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>sj(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>rS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=bd(s,!1).getAll();return new Ei(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),US=cj;var e8=AS("rcb"),t8=new wi(3e4,6e4);function uj(t,e){return e?Xn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ha=class extends Ba{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function lj(t){return xS(t.auth,new Ha(t),t.bypassAuthState)}function dj(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),zU(n,new Ha(t),t.bypassAuthState)}function hj(t){return _(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),qU(n,new Ha(t),t.bypassAuthState)})}var fy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lj;case"linkViaPopup":case"linkViaRedirect":return hj;case"reauthViaPopup":case"reauthViaRedirect":return dj;default:Tn(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var n8=new wi(2e3,1e4);var fj="pendingRedirect",ld=new Map,py=class t extends fy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=ld.get(this.auth._key());if(!e){try{let r=(yield pj(this.resolver,this.auth))?yield lr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return lr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,lr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function pj(t,e){return _(this,null,function*(){let n=yj(e),r=mj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function gj(t,e){ld.set(t._key(),e)}function mj(t){return Xn(t._redirectPersistence)}function yj(t){return ud(fj,t.config.apiKey,t.name)}function vj(t,e,n=!1){return _(this,null,function*(){if(rn(t.app))return Promise.reject(er(t));let r=Di(t),i=uj(r,e),o=yield new py(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var _j=10*60*1e3,gy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ij(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ii(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_j&&this.cachedEventUids.clear(),this.cachedEventUids.has(iS(e))}saveEventToCache(e){this.cachedEventUids.add(iS(e)),this.lastProcessedEventTime=Date.now()}};function iS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Ij(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jS(t);default:return!1}}function wj(n){return _(this,arguments,function*(t,e={}){return tr(t,"GET","/v1/projects",e)})}var Ej=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dj=/^https?/;function Tj(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield wj(t);for(let n of e)try{if(bj(n))return}catch{}Tn(t,"unauthorized-domain")})}function bj(t){let e=Xm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Dj.test(n))return!1;if(Ej.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Cj=new wi(3e4,6e4);function sS(){let t=Dn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Sj(t){return new Promise((e,n)=>{var r,i,s;function o(){sS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sS(),n(Ii(t,"network-request-failed"))},timeout:Cj.get()})}if(!((i=(r=Dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Dn().gapi)===null||s===void 0)&&s.load)o();else{let a=AS("iframefcb");return Dn()[a]=()=>{gapi.load?o():n(Ii(t,"network-request-failed"))},SS(`${NU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw dd=null,e})}var dd=null;function Aj(t){return dd=dd||Sj(t),dd}var Rj=new wi(5e3,15e3),Nj="__/auth/iframe",Mj="emulator/auth/iframe",xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oj(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?_y(e,Mj):`https://${t.config.authDomain}/${Nj}`,r={apiKey:e.apiKey,appName:t.name,v:xr},i=Pj.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ma(r).slice(1)}`}function kj(t){return _(this,null,function*(){let e=yield Aj(t),n=Dn().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:Oj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xj,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Ii(t,"network-request-failed"),a=Dn().setTimeout(()=>{s(o)},Rj.get());function u(){Dn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var Fj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lj=500,Vj=600,Uj="_blank",jj="http://localhost",Ed=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Bj(t,e,n,r=Lj,i=Vj){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Fj),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ye().toLowerCase();n&&(a=IS(l)?Uj:n),vS(l)&&(e=e||jj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(TU(l)&&a!=="_self")return $j(e||"",a),new Ed(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new Ed(p)}function $j(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Hj="__/auth/handler",qj="emulator/auth/handler",zj=encodeURIComponent("fac");function oS(t,e,n,r,i,s){return _(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(e instanceof vd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof uy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${zj}=${encodeURIComponent(u)}`:"";return`${Gj(t)}?${Ma(a).slice(1)}${l}`})}function Gj({config:t}){return t.emulator?_y(t,qj):`https://${t.authDomain}/${Hj}`}var Jm="webStorageSupport",my=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xy,this._completeRedirectFn=vj,this._overrideRedirectResult=gj}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Or((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield oS(e,n,r,Xm(),i);return Bj(e,o,kS())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield oS(e,n,r,Xm(),i);return XU(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Or(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield kj(e),r=new gy(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jm,{type:Jm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Jm];o!==void 0&&n(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Tj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bS()||_S()||Dy()}},BS=my;var aS="@firebase/auth",cS="1.7.9";var yy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Wj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kj(t){Mr(new zt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CS(t)},l=new oy(r,i,s,u);return PU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mr(new zt("auth-internal",e=>{let n=Di(e.getProvider("auth").getImmediate());return(r=>new yy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(aS,cS,Wj(t)),$e(aS,cS,"esm2017")}var Qj=5*60,Yj=xm("authIdTokenMaxAge")||Qj,uS=null,Zj=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yj)return;let i=n?.token;uS!==i&&(uS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Py(t=mi()){let e=Oa(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Ty(t,{popupRedirectResolver:BS,persistence:[US,OS,xy]}),r=xm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Zj(s.toString());Ny(n,o,()=>o(n.currentUser)),za(n,a=>o(a))}}let i=Nm("auth");return i&&by(n,`http://${i}`),n}function Jj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Ii("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Jj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kj("Browser");function HS(t){return new X(function(e){var n=Td(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}function qS(t){return new X(function(e){var n=za(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var zS="auth",Ga=class{constructor(t){return t}},Oy=class{constructor(){return Fa(zS)}};var ky=new H("angularfire2.auth-instances");function j2(t,e){let n=id(zS,t,e);return n&&new Ga(n)}function B2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ga(r)}}var $2={provide:Oy,deps:[[new ot,ky]]},H2={provide:Ga,useFactory:j2,deps:[[new ot,ky],_i]};function H8(t,...e){return $e("angularfire",vi.full,"auth"),yn([H2,$2,{provide:ky,useFactory:B2(t),multi:!0,deps:[ve,st,Hs,La,[new ot,sd],...e]}])}var G8=Ae(HS,!0),GS=Ae(qS,!0);var Fy=Ae(Sy,!0);var Q8=Ae(Py,!0);var Ly=Ae(Ay,!0);var WS=Ae(My,!0);var Vy=Ae(Ry,!0);var KS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QS={};var Fr,Uy;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(E,T,S){for(var w=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)w[xn-2]=arguments[xn];return v.prototype[T].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)E[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)E[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],T=D.g[2];var S=D.g[3],w=v+(S^I&(T^S))+E[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+E[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+E[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+E[3]+3250441966&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+E[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+E[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+E[7]+4249261313&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+E[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+E[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+E[11]+2304563134&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+E[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+E[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+E[15]+1236535329&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(T^S&(I^T))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+E[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+E[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+E[0]+3921069994&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+E[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+E[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+E[4]+3889429448&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+E[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+E[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+E[8]+1163531501&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+E[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+E[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+E[12]+2368359562&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(I^T^S)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+E[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+E[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+E[14]+4259657740&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+E[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+E[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+E[10]+3200236656&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+E[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+E[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+E[6]+76029189&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+E[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+E[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+E[2]+3299628645&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(T^(I|~S))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+E[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+E[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+E[5]+4237533241&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+E[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+E[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+E[1]+2240044497&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+E[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+E[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+E[13]+1309151649&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+E[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+E[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,E=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=I;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(E[T++]=D.charCodeAt(S++),T==this.blockSize){i(this,E),T=0;break}}else for(;S<v;)if(E[T++]=D[S++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)D[I++]=this.g[v]>>>E&255;return D};function s(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function o(D,v){this.h=v;for(var I=[],E=!0,T=D.length-1;0<=T;T--){var S=D[T]|0;E&&S==v||(I[T]=S,E=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?s(D,function(v){return new o([v|0],0>v?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],I=1,E=0;D>=I;E++)v[E]=D/I|0,I*=4294967296;return new o(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,T=0;T<D.length;T+=8){var S=Math.min(8,D.length-T),w=parseInt(D.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),E=E.j(S).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);D+=(0<=E?E:4294967296+E)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(b(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,E="";;){var T=te(I,v).g;I=k(I,T.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=T,b(I))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function b(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=k(this,D),N(D)?-1:b(D)?0:1};function R(D){for(var v=D.g.length,I=[],E=0;E<v;E++)I[E]=~D.g[E];return new o(I,~D.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0,T=0;T<=v;T++){var S=E+(this.i(T)&65535)+(D.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);E=w>>>16,S&=65535,w&=65535,I[T]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(R(v))}t.j=function(D){if(b(this)||b(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<D.g.length;T++){var S=this.i(E)>>>16,w=this.i(E)&65535,xn=D.i(T)>>>16,mo=D.i(T)&65535;I[2*E+2*T]+=w*mo,U(I,2*E+2*T),I[2*E+2*T+1]+=S*mo,U(I,2*E+2*T+1),I[2*E+2*T+1]+=w*xn,U(I,2*E+2*T+1),I[2*E+2*T+2]+=S*xn,U(I,2*E+2*T+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function U(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function $(D,v){this.g=D,this.h=v}function te(D,v){if(b(v))throw Error("division by zero");if(b(D))return new $(p,p);if(N(D))return v=te(R(D),v),new $(R(v.g),R(v.h));if(N(v))return v=te(D,R(v)),new $(R(v.g),v.h);if(30<D.g.length){if(N(D)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;0>=E.l(D);)I=Ce(I),E=Ce(E);var T=Z(I,1),S=Z(E,1);for(E=Z(E,2),I=Z(I,2);!b(E);){var w=S.add(E);0>=w.l(D)&&(T=T.add(I),S=w),E=Z(E,1),I=Z(I,1)}return v=k(D,T.j(v)),new $(T,v)}for(T=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(I),w=S.j(v);N(w)||0<w.l(D);)I-=E,S=l(I),w=S.j(v);b(S)&&(S=m),T=T.add(S),D=k(D,w)}return new $(T,D)}t.A=function(D){return te(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&D.i(E);return new o(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|D.i(E);return new o(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^D.i(E);return new o(I,this.h^D.h)};function Ce(D){for(var v=D.g.length+1,I=[],E=0;E<v;E++)I[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(I,D.h)}function Z(D,v){var I=v>>5;v%=32;for(var E=D.g.length-I,T=[],S=0;S<E;S++)T[S]=0<v?D.i(S+I)>>>v|D.i(S+I+1)<<32-v:D.i(S+I);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Uy=QS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Fr=QS.Integer=o}).apply(typeof KS<"u"?KS:typeof self<"u"?self:typeof window<"u"?window:{});var Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var jy,z2,Ws,By,Wa,Sd,$y,Hy,qy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cd=="object"&&Cd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var P=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)P[Ee-2]=arguments[Ee];return d.prototype[C].apply(g,P)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let P=0;P<A;P++)c[C+P]=g[P]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var Ce=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=bh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class xn{constructor(){this.h=this.g=null}add(d,f){let g=mo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var mo=new k(()=>new Z0,c=>c.reset());class Z0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let yo,vo=!1,bh=new xn,Q_=()=>{let c=a.Promise.resolve(void 0);yo=()=>{c.then(J0)}};var J0=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=mo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}vo=!1};function or(){this.s=this.s,this.C=this.C}or.prototype.s=!1,or.prototype.ma=function(){this.s||(this.s=!0,this.N())},or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var X0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function _o(c,d){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ce){e:{try{te(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:eR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&_o.aa.h.call(this)}}b(_o,et);var eR={2:"touch",3:"pen",4:"mouse"};_o.prototype.h=function(){_o.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Io="closure_listenable_"+(1e6*Math.random()|0),tR=0;function nR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++tR,this.da=this.fa=!1}function Ec(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Dc(c){this.src=c,this.g={},this.h=0}Dc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Sh(c,d,g,C);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new nR(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Ch(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Ec(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Sh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Ah="closure_lm_"+(1e6*Math.random()|0),Rh={};function Y_(c,d,f,g,C){if(g&&g.once)return J_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Y_(c,d[A],f,g,C);return null}return f=Ph(f),c&&c[Io]?c.K(d,f,l(g)?!!g.capture:!!g,C):Z_(c,d,f,!1,g,C)}function Z_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var P=l(C)?!!C.capture:!!C,Ee=Mh(c);if(Ee||(c[Ah]=Ee=new Dc(c)),f=Ee.add(d,f,g,P,A),f.proxy)return f;if(g=rR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)X0||(C=P),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(eI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function rR(){function c(f){return d.call(c.src,c.listener,f)}let d=iR;return c}function J_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)J_(c,d[A],f,g,C);return null}return f=Ph(f),c&&c[Io]?c.L(d,f,l(g)?!!g.capture:!!g,C):Z_(c,d,f,!0,g,C)}function X_(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)X_(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Ph(f),c&&c[Io]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Sh(A,f,g,C),-1<f&&(Ec(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Mh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Sh(d,f,g,C)),(f=-1<c?d[c]:null)&&Nh(f))}function Nh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Io])Ch(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(eI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Mh(d))?(Ch(f,c),f.h==0&&(f.src=null,d[Ah]=null)):Ec(c)}}}function eI(c){return c in Rh?Rh[c]:Rh[c]="on"+c}function iR(c,d){if(c.da)c=!0;else{d=new _o(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Nh(c),c=f.call(g,d)}return c}function Mh(c){return c=c[Ah],c instanceof Dc?c:null}var xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ph(c){return typeof c=="function"?c:(c[xh]||(c[xh]=function(d){return c.handleEvent(d)}),c[xh])}function tt(){or.call(this),this.i=new Dc(this),this.M=this,this.F=null}b(tt,or),tt.prototype[Io]=!0,tt.prototype.removeEventListener=function(c,d,f,g){X_(this,c,d,f,g)};function dt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new et(d,c);else if(d instanceof et)d.target=d.target||c;else{var C=d;d=new et(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];C=Tc(P,g,!0,d)&&C}if(P=d.g=c,C=Tc(P,g,!0,d)&&C,C=Tc(P,g,!1,d)&&C,f)for(A=0;A<f.length;A++)P=d.g=f[A],C=Tc(P,g,!1,d)&&C}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Ec(f[g]);delete c.g[d],c.h--}}this.F=null},tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Tc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var Ee=P.listener,Je=P.ha||P.src;P.fa&&Ch(c.i,P),C=Ee.call(Je,g)!==!1&&C}}return C&&!g.defaultPrevented}function tI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function nI(c){c.g=tI(()=>{c.g=null,c.i&&(c.i=!1,nI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class sR extends or{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(c){or.call(this),this.h=c,this.g={}}b(wo,or);var rI=[];function iI(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&Nh(d)},c),c.g={}}wo.prototype.N=function(){wo.aa.N.call(this),iI(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oh=a.JSON.stringify,oR=a.JSON.parse,aR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function kh(){}kh.prototype.h=null;function sI(c){return c.h||(c.h=c.i())}function oI(){}var Eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fh(){et.call(this,"d")}b(Fh,et);function Lh(){et.call(this,"c")}b(Lh,et);var qr={},aI=null;function bc(){return aI=aI||new tt}qr.La="serverreachability";function cI(c){et.call(this,qr.La,c)}b(cI,et);function Do(c){let d=bc();dt(d,new cI(d))}qr.STAT_EVENT="statevent";function uI(c,d){et.call(this,qr.STAT_EVENT,c),this.stat=d}b(uI,et);function ht(c){let d=bc();dt(d,new uI(d,c))}qr.Ma="timingevent";function lI(c,d){et.call(this,qr.Ma,c),this.size=d}b(lI,et);function To(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function bo(){this.g=!0}bo.prototype.xa=function(){this.g=!1};function cR(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var P="",Ee=A.split("&"),Je=0;Je<Ee.length;Je++){var fe=Ee[Je].split("=");if(1<fe.length){var nt=fe[0];fe=fe[1];var rt=nt.split("_");P=2<=rt.length&&rt[1]=="type"?P+(nt+"="+fe+"&"):P+(nt+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+P})}function uR(c,d,f,g,C,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+P})}function Fi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+dR(c,f)+(g?" "+g:"")})}function lR(c,d){c.info(function(){return"TIMEOUT: "+d})}bo.prototype.info=function(){};function dR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<C.length;P++)C[P]=""}}}}return Oh(f)}catch{return d}}var Cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vh;function Sc(){}b(Sc,kh),Sc.prototype.g=function(){return new XMLHttpRequest},Sc.prototype.i=function(){return{}},Vh=new Sc;function ar(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hI}function hI(){this.i=null,this.g="",this.h=!1}var fI={},Uh={};function jh(c,d,f){c.L=1,c.v=Mc(Pn(d)),c.m=f,c.P=!0,pI(c,null)}function pI(c,d){c.F=Date.now(),Ac(c),c.A=Pn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),AI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new hI,c.g=GI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new sR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(rI[0]=C.toString()),C=rI);for(var A=0;A<C.length;A++){var P=Y_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Do(),cR(c.i,c.u,c.A,c.l,c.R,c.m)}ar.prototype.ca=function(c){c=c.target;let d=this.M;d&&On(c)==3?d.j():this.Y(c)},ar.prototype.Y=function(c){try{if(c==this.g)e:{let rt=On(this.g);var d=this.g.Ba();let Ui=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||kI(this.g)))){this.J||rt!=4||d==7||(d==8||0>=Ui?Do(3):Do(2)),Bh(this);var f=this.g.Z();this.X=f;t:if(gI(this)){var g=kI(this.g);c="";var C=g.length,A=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),Co(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,uR(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Je=this.g;if((Ee=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ee)){var fe=Ee;break t}}fe=null}if(f=fe)Fi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$h(this,f);else{this.o=!1,this.s=3,ht(12),zr(this),Co(this);break e}}if(this.P){f=!0;let Wt;for(;!this.J&&this.C<P.length;)if(Wt=hR(this,P),Wt==Uh){rt==4&&(this.s=4,ht(14),f=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==fI){this.s=4,ht(15),Fi(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else Fi(this.i,this.l,Wt,null),$h(this,Wt);if(gI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||P.length!=0||this.h.h||(this.s=1,ht(16),f=!1),this.o=this.o&&f,!f)Fi(this.i,this.l,P,"[Invalid Chunked Response]"),zr(this),Co(this);else if(0<P.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Kh(nt),nt.M=!0,ht(11))}}else Fi(this.i,this.l,P,null),$h(this,P);rt==4&&zr(this),this.o&&!this.J&&(rt==4?$I(this.j,this):(this.o=!1,Ac(this)))}else RR(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),zr(this),Co(this)}}}catch{}finally{}};function gI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function hR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Uh:(f=Number(d.substring(f,g)),isNaN(f)?fI:(g+=1,g+f>d.length?Uh:(d=d.slice(g,g+f),c.C=g+f,d)))}ar.prototype.cancel=function(){this.J=!0,zr(this)};function Ac(c){c.S=Date.now()+c.I,mI(c,c.I)}function mI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=To(m(c.ba,c),d)}function Bh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ar.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(lR(this.i,this.A),this.L!=2&&(Do(),ht(17)),zr(this),this.s=2,Co(this)):mI(this,this.S-c)};function Co(c){c.j.G==0||c.J||$I(c.j,c)}function zr(c){Bh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,iI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function $h(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Hh(f.h,c))){if(!c.K&&Hh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Fc(f),Oc(f);else break e;Wh(f),ht(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=To(m(f.Za,f),6e3));if(1>=_I(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Wr(f,11)}else if((c.K||f.g==c)&&Fc(f),!U(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let fe=C[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let nt=fe[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));let rt=fe[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));let Ui=fe[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(g=1.5*Ui,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Wt=c.g;if(Wt){let Vc=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vc){var A=g.h;A.g||Vc.indexOf("spdy")==-1&&Vc.indexOf("quic")==-1&&Vc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(qh(A,A.h),A.h=null))}if(g.D){let Qh=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Qh&&(g.ya=Qh,Se(g.I,g.D,Qh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=zI(g,g.J?g.ia:null,g.W),P.K){II(g.h,P);var Ee=P,Je=g.L;Je&&(Ee.I=Je),Ee.B&&(Bh(Ee),Ac(Ee)),g.g=P}else jI(g);0<f.i.length&&kc(f)}else fe[0]!="stop"&&fe[0]!="close"||Wr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Wr(f,7):Gh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Do(4)}catch{}}var fR=class{constructor(c,d){this.g=c,this.map=d}};function yI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _I(c){return c.h?1:c.g?c.g.size:0}function Hh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function qh(c,d){c.g?c.g.add(d):c.h=d}function II(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}yI.prototype.cancel=function(){if(this.i=wI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function wI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function pR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function gR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function EI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=gR(c),g=pR(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var DI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Gr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Gr){this.h=c.h,Rc(this,c.j),this.o=c.o,this.g=c.g,Nc(this,c.s),this.l=c.l;var d=c.i,f=new Ro;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),TI(this,f),this.m=c.m}else c&&(d=String(c).match(DI))?(this.h=!1,Rc(this,d[1]||"",!0),this.o=So(d[2]||""),this.g=So(d[3]||"",!0),Nc(this,d[4]),this.l=So(d[5]||"",!0),TI(this,d[6]||"",!0),this.m=So(d[7]||"")):(this.h=!1,this.i=new Ro(null,this.h))}Gr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ao(d,bI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ao(d,bI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ao(f,f.charAt(0)=="/"?_R:vR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ao(f,wR)),c.join("")};function Pn(c){return new Gr(c)}function Rc(c,d,f){c.j=f?So(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Nc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function TI(c,d,f){d instanceof Ro?(c.i=d,ER(c.i,c.h)):(f||(d=Ao(d,IR)),c.i=new Ro(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function Mc(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function So(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ao(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,yR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bI=/[#\/\?@]/g,vR=/[#\?:]/g,_R=/[#\?]/g,IR=/[#\?@]/g,wR=/#/g;function Ro(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function cr(c){c.g||(c.g=new Map,c.h=0,c.i&&mR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ro.prototype,t.add=function(c,d){cr(this),this.i=null,c=Li(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function CI(c,d){cr(c),d=Li(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function SI(c,d){return cr(c),d=Li(c,d),c.g.has(d)}t.forEach=function(c,d){cr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){cr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){cr(this);let d=[];if(typeof c=="string")SI(this,c)&&(d=d.concat(this.g.get(Li(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return cr(this),this.i=null,c=Li(this,c),SI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function AI(c,d,f){CI(c,d),0<f.length&&(c.i=null,c.g.set(Li(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var C=A;P[g]!==""&&(C+="="+encodeURIComponent(String(P[g]))),c.push(C)}}return this.i=c.join("&")};function Li(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function ER(c,d){d&&!c.j&&(cr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(CI(this,g),AI(this,C,f))},c)),c.j=d}function DR(c,d){let f=new bo;if(a.Image){let g=new Image;g.onload=y(ur,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(ur,f,"TestLoadImage: error",!1,d,g),g.onabort=y(ur,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(ur,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function TR(c,d){let f=new bo,g=new AbortController,C=setTimeout(()=>{g.abort(),ur(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?ur(f,"TestPingServer: ok",!0,d):ur(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),ur(f,"TestPingServer: error",!1,d)})}function ur(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function bR(){this.g=new aR}function CR(c,d,f){let g=f||"";try{EI(c,function(C,A){let P=C;l(C)&&(P=Oh(C)),d.push(g+A+"="+encodeURIComponent(P))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function No(c){this.l=c.Ub||null,this.j=c.eb||!1}b(No,kh),No.prototype.g=function(){return new xc(this.l,this.j)},No.prototype.i=function(c){return function(){return c}}({});function xc(c,d){tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(xc,tt),t=xc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,xo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function RI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Mo(this):xo(this),this.readyState==3&&RI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Mo(this))},t.Qa=function(c){this.g&&(this.response=c,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function xo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function NI(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function zh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=NI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function Me(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Me,tt);var SR=/^https?$/i,AR=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vh.g(),this.v=this.o?sI(this.o):sI(Vh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){MI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(AR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{OI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){MI(this,A)}};function MI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,xI(c),Pc(c)}function xI(c){c.A||(c.A=!0,dt(c,"complete"),dt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,dt(this,"complete"),dt(this,"abort"),Pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pc(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?PI(this):this.bb())},t.bb=function(){PI(this)};function PI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||On(c)!=4||c.Z()!=2)){if(c.u&&On(c)==4)tI(c.Ea,0,c);else if(dt(c,"readystatechange"),On(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var C=String(c.D).match(DI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!SR.test(C?C.toLowerCase():"")}f=g}if(f)dt(c,"complete"),dt(c,"success");else{c.m=6;try{var A=2<On(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",xI(c)}}finally{Pc(c)}}}}function Pc(c,d){if(c.g){OI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||dt(c,"ready");try{f.onreadystatechange=g}catch{}}}function OI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function On(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),oR(d)}};function kI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function RR(c){let d={};c=(c.g&&2<=On(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(U(c[g]))continue;var f=T(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function FI(c){this.Aa=0,this.i=[],this.j=new bo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,c),this.cb=Po("retryDelaySeedMs",1e4,c),this.Wa=Po("forwardChannelMaxRetries",2,c),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yI(c&&c.concurrentRequestLimit),this.Da=new bR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=FI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ht(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=zI(this,null,this.W),kc(this)};function Gh(c){if(LI(c),c.G==3){var d=c.U++,f=Pn(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),Oo(c,f),d=new ar(c,c.j,d),d.L=2,d.v=Mc(Pn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=GI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ac(d)}qI(c)}function Oc(c){c.g&&(Kh(c),c.g.cancel(),c.g=null)}function LI(c){Oc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Fc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function kc(c){if(!vI(c.h)&&!c.s){c.s=!0;var d=c.Ga;yo||Q_(),vo||(yo(),vo=!0),bh.add(d,c),c.B=0}}function NR(c,d){return _I(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=To(m(c.Ga,c,d),HI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new ar(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=UI(this,C,d),f=Pn(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Oo(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(NI(A)))+"&"+d:this.m&&zh(f,this.m,A)),qh(this.h,C),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),C.T=!0,jh(C,f,null)):jh(C,f,d),this.G=2}}else this.G==3&&(c?VI(this,c):this.i.length==0||vI(this.h)||VI(this))};function VI(c,d){var f;d?f=d.l:f=c.U++;let g=Pn(c.I);Se(g,"SID",c.K),Se(g,"RID",f),Se(g,"AID",c.T),Oo(c,g),c.m&&c.o&&zh(g,c.m,c.o),f=new ar(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=UI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),qh(c.h,f),jh(f,g,d)}function Oo(c,d){c.H&&Z(c.H,function(f,g){Se(d,g,f)}),c.l&&EI({},function(f,g){Se(d,g,f)})}function UI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=C[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Ee=!0;for(let Je=0;Je<f;Je++){let fe=C[Je].g,nt=C[Je].map;if(fe-=A,0>fe)A=Math.max(0,C[Je].g-100),Ee=!1;else try{CR(nt,P,"req"+fe+"_")}catch{g&&g(nt)}}if(Ee){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function jI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;yo||Q_(),vo||(yo(),vo=!0),bh.add(d,c),c.v=0}}function Wh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=To(m(c.Fa,c),HI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,BI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=To(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Oc(this),BI(this))};function Kh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function BI(c){c.g=new ar(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Pn(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Oo(c,d),c.m&&c.o&&zh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Mc(Pn(d)),f.m=null,f.P=!0,pI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Oc(this),Wh(this),ht(19))};function Fc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $I(c,d){var f=null;if(c.g==d){Fc(c),Kh(c),c.g=null;var g=2}else if(Hh(c.h,d))f=d.D,II(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=bc(),dt(g,new lI(g,f)),kc(c)}else jI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&NR(c,d)||g==2&&Wh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Wr(c,5);break;case 4:Wr(c,10);break;case 3:Wr(c,6);break;default:Wr(c,2)}}}function HI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Wr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Gr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rc(g,"https"),Mc(g),C?DR(g.toString(),f):TR(g.toString(),f)}else ht(2);c.G=0,c.l&&c.l.sa(d),qI(c),LI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function qI(c){if(c.G=0,c.ka=[],c.l){let d=wI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function zI(c,d,f){var g=f instanceof Gr?Pn(f):new Gr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Nc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Gr(null);g&&Rc(A,g),d&&(A.g=d),C&&Nc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Se(g,f,d),Se(g,"VER",c.la),Oo(c,g),g}function GI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new No({eb:f})):new Me(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function WI(){}t=WI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(c,d){return new Ct(c,d)};function Ct(c,d){tt.call(this),this.g=new FI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!U(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Vi(this)}b(Ct,tt),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Gh(this.g)},Ct.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Oh(c),c=f);d.i.push(new fR(d.Ya++,c)),d.G==3&&kc(d)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Gh(this.g),delete this.g,Ct.aa.N.call(this)};function KI(c){Fh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(KI,Fh);function QI(){Lh.call(this),this.status=1}b(QI,Lh);function Vi(c){this.g=c}b(Vi,WI),Vi.prototype.ua=function(){dt(this.g,"a")},Vi.prototype.ta=function(c){dt(this.g,new KI(c))},Vi.prototype.sa=function(c){dt(this.g,new QI)},Vi.prototype.ra=function(){dt(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,qy=nr.createWebChannelTransport=function(){return new Lc},Hy=nr.getStatEventTarget=function(){return bc()},$y=nr.Event=qr,Sd=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cc.NO_ERROR=0,Cc.TIMEOUT=8,Cc.HTTP_ERROR=6,Wa=nr.ErrorCode=Cc,dI.COMPLETE="complete",By=nr.EventType=dI,oI.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Ws=nr.WebChannel=oI,z2=nr.FetchXmlHttpFactory=No,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,jy=nr.XhrIo=Me}).apply(typeof Cd<"u"?Cd:typeof self<"u"?self:typeof window<"u"?window:{});var YS="@firebase/firestore";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var fo="10.14.0";var Si=new Rr("@firebase/firestore");function Ka(){return Si.logLevel}function V(t,...e){if(Si.logLevel<=ce.DEBUG){let n=e.map(C_);Si.debug(`Firestore (${fo}): ${t}`,...n)}}function rr(t,...e){if(Si.logLevel<=ce.ERROR){let n=e.map(C_);Si.error(`Firestore (${fo}): ${t}`,...n)}}function eo(t,...e){if(Si.logLevel<=ce.WARN){let n=e.map(C_);Si.warn(`Firestore (${fo}): ${t}`,...n)}}function C_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function we(t,e){t||K()}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var xd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Qy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}},Yy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Zy=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new xd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Ze(e)}},Jy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Xy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Jy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ev=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new ev(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function G2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Pd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=G2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function to(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Od=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ne=class t extends Od{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},W2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class t extends Od{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return W2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};var nv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};nv.UNKNOWN_ID=-1;function K2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Ai(i,q.empty(),e)}function Q2(t){return new Ai(t.readTime,t.key,-1)}var Ai=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),q.empty(),-1)}static max(){return new t(ee.max(),q.empty(),-1)}};function Y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var Z2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mc(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==Z2)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function J2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(t){return t.name==="IndexedDbTransactionError"}var MA=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function dh(t){return t==null}function ec(t){return t===0&&1/t==-1/0}function X2(t){return typeof t=="number"&&Number.isInteger(t)&&!ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var eB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],u5=[...eB,"documentOverlays"],tB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nB=tB,rB=[...nB,"indexConfiguration","indexState","indexEntries"];var l5=[...rB,"globals"];function ZS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Fe=class t{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}},Zs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ct=class t{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kd(this.data.getIterator())}getIteratorFrom(e){return new kd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},kd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gt=class t{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ct(Lt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Fd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var iB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(t){if(we(!!t),typeof t=="string"){let e=0,n=iB.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}function S_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function A_(t){let e=t.mapValue.fields.__previous_value__;return S_(e)?A_(e):e}function tc(t){let e=ir(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var iv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ld=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S_(t)?4:OA(t)?9007199254740991:PA(t)?10:11:K()}function Nn(t,e){if(t===e)return!0;let n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tc(t).isEqual(tc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ir(i.timestampValue),a=ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vr(i.bytesValue).isEqual(Vr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Re(i.geoPointValue.latitude)===Re(s.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Re(i.integerValue)===Re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Re(i.doubleValue),a=Re(s.doubleValue);return o===a?ec(o)===ec(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return to(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ZS(o)!==ZS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Nn(o[u],a[u])))return!1;return!0}(t,e);default:return K()}}function nc(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function no(t,e){if(t===e)return 0;let n=Ri(t),r=Ri(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Re(s.integerValue||s.doubleValue),u=Re(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return JS(t.timestampValue,e.timestampValue);case 4:return JS(tc(t),tc(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Vr(s),u=Vr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=pe(a[l],u[l]);if(h!==0)return h}return pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(Re(s.latitude),Re(o.latitude));return a!==0?a:pe(Re(s.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=pe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:XS(y,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ad.mapValue&&o===Ad.mapValue)return 0;if(s===Ad.mapValue)return 1;if(o===Ad.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=pe(u[p],h[p]);if(m!==0)return m;let y=no(a[u[p]],l[h[p]]);if(y!==0)return y}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function JS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=ir(t),r=ir(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function XS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=no(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function ro(t){return sv(t)}function sv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=sv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${sv(n.fields[o])}`;return i+"}"}(t.mapValue):K()}function eA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ov(t){return!!t&&"integerValue"in t}function R_(t){return!!t&&"arrayValue"in t}function tA(t){return!!t&&"nullValue"in t}function nA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nd(t){return!!t&&"mapValue"in t}function PA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Oi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ya(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ft=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ya(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Ya(this.value))}};function kA(t){let e=[];return Oi(t.fields,(n,r)=>{let i=new Lt([n]);if(Nd(r)){let s=kA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}var on=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var io=class{constructor(e,n){this.position=e,this.inclusive=n}};function rA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=no(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function iA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}var Ni=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function sB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Vd=class{},ze=class t extends Vd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cv(e,n,r):n==="array-contains"?new dv(e,r):n==="in"?new hv(e,r):n==="not-in"?new fv(e,r):n==="array-contains-any"?new pv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uv(e,r):new lv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(no(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},an=class t extends Vd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return FA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function FA(t){return t.op==="and"}function LA(t){return oB(t)&&FA(t)}function oB(t){for(let e of t.filters)if(e instanceof an)return!1;return!0}function av(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(LA(t))return t.filters.map(e=>av(e)).join(",");{let e=t.filters.map(n=>av(n)).join(",");return`${t.op}(${e})`}}function VA(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Nn(r.value,i.value)}(t,e):t instanceof an?function(r,i){return i instanceof an&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&VA(o,i.filters[a]),!0):!1}(t,e):void K()}function UA(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(UA).join(" ,")+"}"}(t):"Filter"}var cv=class extends ze{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},uv=class extends ze{constructor(e,n){super(e,"in",n),this.keys=jA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},lv=class extends ze{constructor(e,n){super(e,"not-in",n),this.keys=jA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function jA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var dv=class extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return R_(n)&&nc(n.arrayValue,this.value)}},hv=class extends ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}},fv=class extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!nc(this.value.arrayValue,n)}},pv=class extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!R_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nc(this.value.arrayValue,r))}};var gv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function sA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gv(t,e,n,r,i,s,o)}function N_(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ro(r)).join(",")),e.ue=n}return e.ue}function M_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iA(t.startAt,e.startAt)&&iA(t.endAt,e.endAt)}function mv(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ur=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aB(t,e,n,r,i,s,o,a){return new Ur(t,e,n,r,i,s,o,a)}function hh(t){return new Ur(t)}function oA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BA(t){return t.collectionGroup!==null}function Za(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ct(Lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ni(s,r))}),n.has(Lt.keyField().canonicalString())||e.ce.push(new Ni(Lt.keyField(),r))}return e.ce}function Sn(t){let e=Y(t);return e.le||(e.le=cB(e,Za(t))),e.le}function cB(t,e){if(t.limitType==="F")return sA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ni(i.field,s)});let n=t.endAt?new io(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new io(t.startAt.position,t.startAt.inclusive):null;return sA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yv(t,e){let n=t.filters.concat([e]);return new Ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vv(t,e,n){return new Ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fh(t,e){return M_(Sn(t),Sn(e))&&t.limitType===e.limitType}function $A(t){return`${N_(Sn(t))}|lt:${t.limitType}`}function Ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UA(i)).join(", ")}]`),dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ro(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ro(i)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function ph(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Za(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=rA(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Za(r),i)||r.endAt&&!function(o,a,u){let l=rA(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Za(r),i))}(t,e)}function uB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HA(t){return(e,n)=>{let r=!1;for(let i of Za(t)){let s=lB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lB(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?no(u,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var jr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return xA(this.inner)}size(){return this.innerSize}};var dB=new Fe(q.comparator);function sr(){return dB}var qA=new Fe(q.comparator);function Qa(...t){let e=qA;for(let n of t)e=e.insert(n.key,n);return e}function zA(t){let e=qA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ti(){return Ja()}function GA(){return Ja()}function Ja(){return new jr(t=>t.toString(),(t,e)=>t.isEqual(e))}var hB=new Fe(q.comparator),fB=new ct(q.comparator);function ue(...t){let e=fB;for(let n of t)e=e.add(n);return e}var pB=new ct(pe);function gB(){return pB}function x_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function WA(t){return{integerValue:""+t}}function mB(t,e){return X2(e)?WA(e):x_(t,e)}var so=class{constructor(){this._=void 0}};function yB(t,e,n){return t instanceof oo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&S_(s)&&(s=A_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Mi?QA(t,e):t instanceof xi?YA(t,e):function(i,s){let o=KA(i,s),a=aA(o)+aA(i.Pe);return ov(o)&&ov(i.Pe)?WA(a):x_(i.serializer,a)}(t,e)}function vB(t,e,n){return t instanceof Mi?QA(t,e):t instanceof xi?YA(t,e):n}function KA(t,e){return t instanceof ao?function(r){return ov(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var oo=class extends so{},Mi=class extends so{constructor(e){super(),this.elements=e}};function QA(t,e){let n=ZA(e);for(let r of t.elements)n.some(i=>Nn(i,r))||n.push(r);return{arrayValue:{values:n}}}var xi=class extends so{constructor(e){super(),this.elements=e}};function YA(t,e){let n=ZA(e);for(let r of t.elements)n=n.filter(i=>!Nn(i,r));return{arrayValue:{values:n}}}var ao=class extends so{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function aA(t){return Re(t.integerValue||t.doubleValue)}function ZA(t){return R_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _B(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Mi&&i instanceof Mi||r instanceof xi&&i instanceof xi?to(r.elements,i.elements,Nn):r instanceof ao&&i instanceof ao?Nn(r.Pe,i.Pe):r instanceof oo&&i instanceof oo}(t.transform,e.transform)}var _v=class{constructor(e,n){this.version=e,this.transformResults=n}},An=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var co=class{};function JA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rc(t.key,An.none()):new Pi(t.key,t.data,An.none());{let n=t.data,r=Ft.empty(),i=new ct(Lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mn(t.key,r,new Gt(i.toArray()),An.none())}}function IB(t,e,n){t instanceof Pi?function(i,s,o){let a=i.value.clone(),u=uA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mn?function(i,s,o){if(!Md(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=uA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(XA(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xa(t,e,n,r){return t instanceof Pi?function(s,o,a,u){if(!Md(s.precondition,o))return a;let l=s.value.clone(),h=lA(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mn?function(s,o,a,u){if(!Md(s.precondition,o))return a;let l=lA(s.fieldTransforms,u,o),h=o.data;return h.setAll(XA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Md(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=KA(r.transform,i||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,s))}return n||null}function cA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&to(r,i,(s,o)=>_B(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Pi=class extends co{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mn=class extends co{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function XA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function uA(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,vB(o,a,n[i]))}return r}function lA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,yB(s,o,e))}return r}var rc=class extends co{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Iv=class extends co{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&IB(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=GA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=JA(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(n,r)=>cA(n,r))&&to(this.baseMutations,e.baseMutations,(n,r)=>cA(n,r))}},Ev=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return hB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Dv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var He,de;function EB(t){switch(t){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function e0(t){if(t===void 0)return rr("GRPC error has no .code"),M.UNKNOWN;switch(t){case He.OK:return M.OK;case He.CANCELLED:return M.CANCELLED;case He.UNKNOWN:return M.UNKNOWN;case He.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case He.INTERNAL:return M.INTERNAL;case He.UNAVAILABLE:return M.UNAVAILABLE;case He.UNAUTHENTICATED:return M.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case He.NOT_FOUND:return M.NOT_FOUND;case He.ALREADY_EXISTS:return M.ALREADY_EXISTS;case He.PERMISSION_DENIED:return M.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case He.ABORTED:return M.ABORTED;case He.OUT_OF_RANGE:return M.OUT_OF_RANGE;case He.UNIMPLEMENTED:return M.UNIMPLEMENTED;case He.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(de=He||(He={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var dA=null;function DB(){return new TextEncoder}var TB=new Fr([4294967295,4294967295],0);function hA(t){let e=DB().encode(t),n=new Uy;return n.update(e),new Uint8Array(n.digest())}function fA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fr([n,r],0),new Fr([i,s],0)]}var bv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bi(`Invalid padding: ${n}`);if(r<0)throw new bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fr.fromNumber(r)));return i.compare(TB)===1&&(i=new Fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=hA(e),[r,i]=fA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=hA(e),[r,i]=fA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ud=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Fe(pe),sr(),ue())}},ic=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var Js=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},jd=class{constructor(e,n){this.targetId=e,this.me=n}},Bd=class{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},$d=class{constructor(){this.fe=0,this.ge=gA(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new ic(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=gA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Cv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=sr(),this.qe=pA(),this.Qe=new Fe(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(mv(s))if(r===0){let o=new q(s.path);this.Ue(n,o,on.newNoDocument(o,ee.min()))}else we(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}dA?.et(function(h,p,m,y,b){var N,R,k,U,$,te;let Ce={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Ce.bloomFilter={applied:b===0,hashCount:(N=Z?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(U=(k=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&U!==void 0?U:0,padding:(te=($=Z?.bits)===null||$===void 0?void 0:$.padding)!==null&&te!==void 0?te:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Ce}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Vr(r).toUint8Array()}catch(u){if(u instanceof Fd)return eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new bv(o,i,s)}catch(u){return eo(u instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&mv(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,on.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ud(e,n,this.Qe,this.ke,r);return this.ke=sr(),this.qe=pA(),this.Qe=new Fe(pe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $d,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $d),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function pA(){return new Fe(q.comparator)}function gA(){return new Fe(q.comparator)}var bB={asc:"ASCENDING",desc:"DESCENDING"},CB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SB={and:"AND",or:"OR"},Sv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Av(t,e){return t.useProto3Json||dh(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AB(t,e){return Hd(t,e.toTimestamp())}function Rn(t){return we(!!t),ee.fromTimestamp(function(n){let r=ir(n);return new Ke(r.seconds,r.nanos)}(t))}function P_(t,e){return Rv(t,e).canonicalString()}function Rv(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function n0(t){let e=Ne.fromString(t);return we(a0(e)),e}function Nv(t,e){return P_(t.databaseId,e.path)}function zy(t,e){let n=n0(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(i0(n))}function r0(t,e){return P_(t.databaseId,e)}function RB(t){let e=n0(t);return e.length===4?Ne.emptyPath():i0(e)}function Mv(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i0(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mA(t,e,n){return{name:Nv(t,e),fields:n.value.mapValue.fields}}function NB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:e0(l.code);return new L(h,l.message||"")}(o);n=new Bd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=zy(t,r.document.name),s=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ee.min(),a=new Ft({mapValue:{fields:r.document.fields}}),u=on.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Js(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=zy(t,r.document),s=r.readTime?Rn(r.readTime):ee.min(),o=on.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Js([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=zy(t,r.document),s=r.removedTargetIds||[];n=new Js([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Tv(i,s),a=r.targetId;n=new jd(a,o)}}return n}function MB(t,e){let n;if(e instanceof Pi)n={update:mA(t,e.key,e.value)};else if(e instanceof rc)n={delete:Nv(t,e.key)};else if(e instanceof Mn)n={update:mA(t,e.key,e.data),updateMask:jB(e.fieldMask)};else{if(!(e instanceof Iv))return K();n={verify:Nv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof oo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ao)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(t,e.precondition)),n}function xB(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Rn(i.updateTime):Rn(s);return o.isEqual(ee.min())&&(o=Rn(s)),new _v(o,i.transformResults||[])}(n,e))):[]}function PB(t,e){return{documents:[r0(t,e.path)]}}function OB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=r0(t,i);let s=function(l){if(l.length!==0)return o0(an.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Qs(m.field),direction:LB(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Av(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function kB(t){let e=RB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=s0(p);return m instanceof an&&LA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(b){return new Ni(Ys(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,dh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new io(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new io(y,m)}(n.endAt)),aB(e,i,o,s,a,"F",u,l)}function FB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function s0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ys(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ys(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ys(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ys(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(Ys(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>s0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function LB(t){return bB[t]}function VB(t){return CB[t]}function UB(t){return SB[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return Lt.fromServerFormat(t.fieldPath)}function o0(t){return t instanceof ze?function(n){if(n.op==="=="){if(nA(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NAN"}};if(tA(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nA(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NAN"}};if(tA(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(n.field),op:VB(n.op),value:n.value}}}(t):t instanceof an?function(n){let r=n.getFilters().map(i=>o0(i));return r.length===1?r[0]:{compositeFilter:{op:UB(n.op),filters:r}}}(t):K()}function jB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function a0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var sc=class t{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xv=class{constructor(e){this.ct=e}};function BB(t){let e=kB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vv(e,e.limit,"L"):e}var qd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ec(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ir(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Vr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?OA(e)?this.dt(n,Number.MAX_SAFE_INTEGER):PA(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Re(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};qd.vt=new qd;var Pv=class{constructor(){this.un=new Ov}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ai.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Ov=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ct(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ct(Ne.comparator)).toArray()}};var h5=new Uint8Array(0);var bn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(41943040,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var oc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var kv=class{constructor(){this.changes=new jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Fv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Lv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xa(r.mutation,i,Gt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=Ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Qa();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=sr(),o=Ja(),a=function(){return Ja()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Mn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Xa(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):o.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Fv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ja(),i=new Fe((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Gt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=GA();h.forEach(m=>{if(!s.has(m)){let y=JA(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Ti()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:zA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Qa();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Ur(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,on.newInvalidDocument(h)))});let a=Qa();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Xa(h.mutation,l,Gt.empty(),Ke.now()),ph(n,l)&&(a=a.insert(u,l))}),a})}};var Vv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:BB(i.bundledQuery),readTime:Rn(i.readTime)}}(n)),x.resolve()}};var Uv=class{constructor(){this.overlays=new Fe(q.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ti();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Ti(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Ti(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ti(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dv(n,r));let s=this.Ir.get(n);s===void 0&&(s=ue(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var jv=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var ac=class{constructor(){this.Tr=new ct(qe.Er),this.dr=new ct(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new q(new Ne([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new q(new Ne([])),r=new qe(n,e),i=new qe(n,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||q.comparator(e.key,n.key)}};var Bv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(qe.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new wv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(pe);return n.forEach(i=>{let s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new qe(new q(s),0),a=new ct(pe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $v=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():on.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=sr(),o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Y2(Q2(h),r)<=0||(i.has(h.key)||ph(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hv(this)}getSize(e){return x.resolve(this.size)}},Hv=class extends kv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var qv=class{constructor(e){this.persistence=e,this.Nr=new jr(n=>N_(n),M_),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ac,this.targetCount=0,this.kr=oc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new oc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var zv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new MA(0),this.Kr=!1,this.Kr=!0,this.$r=new jv,this.referenceDelegate=e(this),this.Ur=new qv(this),this.indexManager=new Pv,this.remoteDocumentCache=function(i){return new $v(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xv(n),this.Gr=new Vv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Bv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Gv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Gv=class extends rv{constructor(e){super(),this.currentSequenceNumber=e}},Wv=class t{constructor(e){this.persistence=e,this.Jr=new ac,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Kv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ue(),i=ue();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Qv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RC()?8:J2(Ye())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ka()<=ce.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Ka()<=ce.DEBUG&&V("QueryEngine","Query:",Ks(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ka()<=ce.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):x.resolve())}Yi(e,n){if(oA(n))return x.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vv(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,vv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return oA(n)||i.isEqual(ee.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Ka()<=ce.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ks(n)),this.rs(e,o,n,K2(i,-1)).next(a=>a))})}ts(e,n){let r=new ct(HA(e));return n.forEach((i,s)=>{ph(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ka()<=ce.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ai.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Zv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Fe(pe),this._s=new jr(s=>N_(s),M_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function $B(t,e,n,r){return new Zv(t,e,n,r)}function c0(t,e){return _(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ue();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function HB(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(N=>{let R=l.docVersions.get(b);we(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function u0(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qB(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(lt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=sr(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(zB(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function zB(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=sr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function GB(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WB(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new sc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Jv(t,e,n){return _(this,null,function*(){let r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!yc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function yA(t,e,n){let r=Y(t),i=ee.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Y(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:ue())).next(a=>(KB(r,uB(e),a),{documents:a,Ts:s})))}function KB(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var zd=class{constructor(){this.activeTargetIds=gB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xv=class{constructor(){this.so=new zd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var e_=class{_o(e){}shutdown(){}};var Gd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rd=null;function Gy(){return Rd===null?Rd=function(){return 268435456+Math.round(2147483648*Math.random())}():Rd++,"0x"+Rd.toString(16)}var QB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var t_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var at="WebChannelConnection",n_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Gy(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw eo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=QB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Gy();return new Promise((o,a)=>{let u=new jy;u.setWithCredentials(!0),u.listenOnce(By.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Wa.NO_ERROR:let h=u.getResponseJson();V(at,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Wa.TIMEOUT:V(at,`RPC '${e}' ${s} timed out`),a(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Wa.HTTP_ERROR:let p=u.getStatus();if(V(at,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(y.status);a(new L(b,y.message))}else a(new L(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new L(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{V(at,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(at,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Gy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qy(),a=Hy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(at,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,b=new t_({Io:R=>{y?V(at,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(at,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(at,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,k,U)=>{R.listen(k,$=>{try{U($)}catch(te){setTimeout(()=>{throw te},0)}})};return N(p,Ws.EventType.OPEN,()=>{y||(V(at,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),N(p,Ws.EventType.CLOSE,()=>{y||(y=!0,V(at,`RPC '${e}' stream ${i} transport closed`),b.So())}),N(p,Ws.EventType.ERROR,R=>{y||(y=!0,eo(at,`RPC '${e}' stream ${i} transport errored:`,R),b.So(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ws.EventType.MESSAGE,R=>{var k;if(!y){let U=R.data[0];we(!!U);let $=U,te=$.error||((k=$[0])===null||k===void 0?void 0:k.error);if(te){V(at,`RPC '${e}' stream ${i} received error:`,te);let Ce=te.status,Z=function(I){let E=He[I];if(E!==void 0)return e0(E)}(Ce),D=te.message;Z===void 0&&(Z=M.INTERNAL,D="Unknown error status: "+Ce+" with message "+te.message),y=!0,b.So(new L(Z,D)),p.close()}else V(at,`RPC '${e}' stream ${i} received:`,U),b.bo(U)}}),N(a,$y.STAT_EVENT,R=>{R.stat===Sd.PROXY?V(at,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Sd.NOPROXY&&V(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function Wy(){return typeof document<"u"?document:null}function gh(t){return new Sv(t,!0)}var Wd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Kd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},r_=class extends Kd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=NB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Rn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Mv(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=mv(u)?{documents:PB(s,u)}:{query:OB(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=t0(s,o.resumeToken);let l=Av(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Hd(s,o.snapshotVersion.toTimestamp());let l=Av(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=FB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Mv(this.serializer),n.removeTarget=e,this.a_(n)}},i_=class extends Kd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=xB(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Mv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>MB(this.serializer,r))};this.a_(n)}};var s_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Rv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Rv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},o_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rr(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var a_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){ki(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=Y(u);l.L_.add(4),yield vc(l),l.q_.set("Unknown"),l.L_.delete(4),yield mh(l)})}(this))}))}),this.q_=new o_(r,i)}};function mh(t){return _(this,null,function*(){if(ki(t))for(let e of t.B_)yield e(!0)})}function vc(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function l0(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),L_(n)?F_(n):po(n).r_()&&k_(n,e))}function O_(t,e){let n=Y(t),r=po(n);n.N_.delete(e),r.r_()&&d0(n,e),n.N_.size===0&&(r.r_()?r.o_():ki(n)&&n.q_.set("Unknown"))}function k_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).A_(e)}function d0(t,e){t.Q_.xe(e),po(t).R_(e)}function F_(t){t.Q_=new Cv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),po(t).start(),t.q_.v_()}function L_(t){return ki(t)&&!po(t).n_()&&t.N_.size>0}function ki(t){return Y(t).L_.size===0}function h0(t){t.Q_=void 0}function YB(t){return _(this,null,function*(){t.q_.set("Online")})}function ZB(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{k_(t,e)})})}function JB(t,e){return _(this,null,function*(){h0(t),L_(t)?(t.q_.M_(e),F_(t)):t.q_.set("Unknown")})}function XB(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof Bd&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qd(t,r)}else if(e instanceof Js?t.Q_.Ke(e):e instanceof jd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield u0(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),d0(s,u);let p=new sc(h.target,u,l,h.sequenceNumber);k_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Qd(t,r)}})}function Qd(t,e,n){return _(this,null,function*(){if(!yc(e))throw e;t.L_.add(1),yield vc(t),t.q_.set("Offline"),n||(n=()=>u0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield mh(t)}))})}function f0(t,e){return e().catch(n=>Qd(t,n,e))}function yh(t){return _(this,null,function*(){let e=Y(t),n=Br(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;e$(e);)try{let i=yield GB(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,t$(e,i)}catch(i){yield Qd(e,i)}p0(e)&&g0(e)})}function e$(t){return ki(t)&&t.O_.length<10}function t$(t,e){t.O_.push(e);let n=Br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function p0(t){return ki(t)&&!Br(t).n_()&&t.O_.length>0}function g0(t){Br(t).start()}function n$(t){return _(this,null,function*(){Br(t).p_()})}function r$(t){return _(this,null,function*(){let e=Br(t);for(let n of t.O_)e.m_(n.mutations)})}function i$(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=Ev.from(r,e,n);yield f0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yh(t)})}function s$(t,e){return _(this,null,function*(){e&&Br(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return EB(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Br(r).s_(),yield f0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield yh(r)}})}(t,e)),p0(t)&&g0(t)})}function vA(t,e){return _(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=ki(n);n.L_.add(3),yield vc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield mh(n)})}function o$(t,e){return _(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield mh(n)):e||(n.L_.add(2),yield vc(n),n.q_.set("Unknown"))})}function po(t){return t.K_||(t.K_=function(n,r,i){let s=Y(n);return s.w_(),new r_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:YB.bind(null,t),Ro:ZB.bind(null,t),mo:JB.bind(null,t),d_:XB.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),L_(t)?F_(t):t.q_.set("Unknown")):(yield t.K_.stop(),h0(t))}))),t.K_}function Br(t){return t.U_||(t.U_=function(n,r,i){let s=Y(n);return s.w_(),new i_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:n$.bind(null,t),mo:s$.bind(null,t),f_:r$.bind(null,t),g_:i$.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield yh(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var c_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function V_(t,e){if(rr("AsyncQueue",`${e}: ${t}`),yc(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Yd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Qa(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Zd=class{constructor(){this.W_=new Fe(q.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},uo=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Yd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var u_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},l_=class{constructor(){this.queries=_A(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),s=i.queries;i.queries=_A(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function _A(){return new jr(t=>$A(t),fh)}function U_(t,e){return _(this,null,function*(){let n=Y(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new u_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=V_(o,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&B_(n)})}function j_(t,e){return _(this,null,function*(){let n=Y(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function a$(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&B_(n)}function c$(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function B_(t){t.Y_.forEach(e=>{e.next()})}var d_,IA;(IA=d_||(d_={})).ea="default",IA.Cache="cache";var cc=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==d_.Cache}};var Jd=class{constructor(e){this.key=e}},Xd=class{constructor(e){this.key=e}},h_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=HA(e),this.Ra=new Yd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Zd,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=ph(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?b!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,b){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return N(y)-N(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new uo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Xd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Jd(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return uo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},f_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},p_=class{constructor(e){this.key=e,this.va=!1}},g_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jr(a=>$A(a),fh),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(q.comparator),this.Na=new Map,this.La=new ac,this.Ba={},this.ka=new Map,this.qa=oc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function u$(t,e,n=!0){return _(this,null,function*(){let r=w0(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield m0(r,e,n,!0),i})}function l$(t,e){return _(this,null,function*(){let n=w0(t);yield m0(n,e,!0,!1)})}function m0(t,e,n,r){return _(this,null,function*(){let i=yield WB(t.localStore,Sn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield d$(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&l0(t.remoteStore,i),a})}function d$(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,y)=>function(N,R,k,U){return _(this,null,function*(){let $=R.view.ma(k);$.ns&&($=yield yA(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,$)));let te=U&&U.targetChanges.get(R.targetId),Ce=U&&U.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges($,N.isPrimaryClient,te,Ce);return EA(N,R.targetId,Z.wa),Z.snapshot})}(t,p,m,y);let s=yield yA(t.localStore,e,!0),o=new h_(e,s.Ts),a=o.ma(s.documents),u=ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);EA(t,n,l.wa);let h=new f_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function h$(t,e,n){return _(this,null,function*(){let r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!fh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Jv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&O_(r.remoteStore,i.targetId),m_(r,i.targetId)}).catch(mc))):(m_(r,i.targetId),yield Jv(r.localStore,i.targetId,!0))})}function f$(t,e){return _(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),O_(n.remoteStore,r.targetId))})}function p$(t,e,n){return _(this,null,function*(){let r=w$(t);try{let i=yield function(o,a){let u=Y(o),l=Ke.now(),h=a.reduce((y,b)=>y.add(b.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=sr(),N=ue();return u.cs.getEntries(y,h).next(R=>{b=R,b.forEach((k,U)=>{U.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(R=>{p=R;let k=[];for(let U of a){let $=wB(U,p.get(U.key).overlayedDocument);$!=null&&k.push(new Mn(U.key,$,kA($.value.mapValue),An.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:zA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Fe(pe)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield _c(r,i.changes),yield yh(r.remoteStore)}catch(i){let s=V_(i,"Failed to persist write");n.reject(s)}})}function y0(t,e){return _(this,null,function*(){let n=Y(t);try{let r=yield qB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),yield _c(n,r,e)}catch(r){yield mc(r)}})}function wA(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Y(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&B_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g$(t,e,n){return _(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Fe(q.comparator);o=o.insert(s,on.newNoDocument(s,ee.min()));let a=ue().add(s),u=new Ud(ee.min(),new Map,new Fe(pe),o,a);yield y0(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),$_(r)}else yield Jv(r.localStore,e,!1).then(()=>m_(r,e,n)).catch(mc)})}function m$(t,e){return _(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield HB(n.localStore,e);_0(n,r,null),v0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield _c(n,i)}catch(i){yield mc(i)}})}function y$(t,e,n){return _(this,null,function*(){let r=Y(t);try{let i=yield function(o,a){let u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);_0(r,e,n),v0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield _c(r,i)}catch(i){yield mc(i)}})}function v0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function _0(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function m_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||I0(t,r)})}function I0(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(O_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$_(t))}function EA(t,e,n){for(let r of n)r instanceof Jd?(t.La.addReference(r.key,e),v$(t,r)):r instanceof Xd?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||I0(t,r.key)):K()}function v$(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),$_(t))}function $_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new q(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new p_(n)),t.Oa=t.Oa.insert(n,r),l0(t.remoteStore,new sc(Sn(hh(n.path)),r,"TargetPurposeLimboResolution",MA.oe))}}function _c(t,e,n){return _(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Kv.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!yc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function _$(t,e){return _(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield c0(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _c(n,r.hs)}})}function I$(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function w0(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g$.bind(null,e),e.Ca.d_=a$.bind(null,e.eventManager),e.Ca.$a=c$.bind(null,e.eventManager),e}function w$(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y$.bind(null,e),e}var DA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=gh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return $B(this.persistence,new Yv,n.initialUser,this.serializer)}Ga(n){return new zv(Wv.Zr,this.serializer)}Wa(n){return new Xv}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var E$=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_$.bind(null,this.syncEngine),yield o$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new l_}()}createDatastore(n){let r=gh(n.databaseInfo.databaseId),i=function(o){return new n_(o)}(n.databaseInfo);return function(o,a,u,l){return new s_(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new a_(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>wA(this.syncEngine,r,0),function(){return Gd.D()?new Gd:new e_}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new g_(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=Y(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield vc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var uc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var y_=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=V_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ky(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield c0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function TA(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield D$(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>vA(e.remoteStore,i)),t._onlineComponents=e})}function D$(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ky(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),yield Ky(t,new DA)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Ky(t,new DA);return t._offlineComponents})}function E0(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield TA(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield TA(t,new E$))),t._onlineComponents})}function T$(t){return E0(t).then(e=>e.syncEngine)}function eh(t){return _(this,null,function*(){let e=yield E0(t),n=e.eventManager;return n.onListen=u$.bind(null,e.syncEngine),n.onUnlisten=h$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=l$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f$.bind(null,e.syncEngine),n})}function b$(t,e,n={}){let r=new sn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new uc({next:m=>{h.Za(),o.enqueueAndForget(()=>j_(s,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new cc(hh(a.path),h,{includeMetadataChanges:!0,_a:!0});return U_(s,p)}(yield eh(t),t.asyncQueue,e,n,r)})),r.promise}function C$(t,e,n={}){let r=new sn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new uc({next:m=>{h.Za(),o.enqueueAndForget(()=>j_(s,p)),m.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new cc(a,h,{includeMetadataChanges:!0,_a:!0});return U_(s,p)}(yield eh(t),t.asyncQueue,e,n,r)})),r.promise}function D0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var bA=new Map;function T0(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CA(t){if(!q.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SA(t){if(q.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=vh(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var th=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new th({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new th(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qy;switch(r.type){case"firstParty":return new Xy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=bA.get(n);r&&(V("ComponentProvider","Removing Datastore"),bA.delete(n),r.terminate())}(this),Promise.resolve()}};function b0(t,e,n,r={}){var i;let s=(t=bt(t,lo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ze.MOCK_USER;else{a=DC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ze(l)}t._authCredentials=new Yy(new xd(a,u))}}var $r=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Lr=class t extends $r{constructor(e,n,r){super(e,n,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function C0(t,e,...n){if(t=ke(t),T0("collection","path",e),t instanceof lo){let r=Ne.fromString(e,...n);return SA(r),new Lr(t,null,r)}{if(!(t instanceof ut||t instanceof Lr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return SA(r),new Lr(t.firestore,null,r)}}function H_(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Pd.newId()),T0("doc","path",e),t instanceof lo){let r=Ne.fromString(e,...n);return CA(r),new ut(t,null,new q(r))}{if(!(t instanceof ut||t instanceof Lr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return CA(r),new ut(t.firestore,t instanceof Lr?t.converter:null,new q(r))}}var nh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wd(this,"async_queue_retry"),this.Vu=()=>{let r=Wy();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Wy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Wy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=c_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function AA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var cn=class extends lo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nh(e),this._firestoreClient=void 0,yield e}})}};function S0(t,e){let n=typeof t=="object"?t:mi(),r=typeof t=="string"?t:e||"(default)",i=Oa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=EC("firestore");s&&b0(i,...s)}return i}function _h(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A$(t),t._firestoreClient}function A$(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new iv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,D0(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new y_(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var lc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(lt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ho=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dc=class{constructor(e){this._methodName=e}};var hc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var fc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var R$=/^__.*__$/,v_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pi(e,this.data,n,this.fieldTransforms)}},rh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function A0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var __=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(A0(this.Cu)&&R$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},I_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gh(e)}Qu(e,n,r,i=!1){return new __({Cu:e,methodName:n,qu:r,path:Lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ih(t){let e=t._freezeSettings(),n=gh(t._databaseId);return new I_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function R0(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);q_("Data must be an object, but it was:",o,r);let a=N0(r,o),u,l;if(s.merge)u=new Gt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=w_(e,p,n);if(!o.contains(m))throw new L(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x0(h,m)||h.push(m)}u=new Gt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new v_(new Ft(a),u,l)}var ih=class t extends dc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function N$(t,e,n,r){let i=t.Qu(1,e,n);q_("Data must be an object, but it was:",i,r);let s=[],o=Ft.empty();Oi(r,(u,l)=>{let h=z_(e,u,n);l=ke(l);let p=i.Nu(h);if(l instanceof ih)s.push(h);else{let m=Ic(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Gt(s);return new rh(o,a,i.fieldTransforms)}function M$(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[w_(e,r,n)],u=[i];if(s.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(w_(e,s[m])),u.push(s[m+1]);let l=[],h=Ft.empty();for(let m=a.length-1;m>=0;--m)if(!x0(l,a[m])){let y=a[m],b=u[m];b=ke(b);let N=o.Nu(y);if(b instanceof ih)l.push(y);else{let R=Ic(b,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Gt(l);return new rh(h,p,o.fieldTransforms)}function x$(t,e,n,r=!1){return Ic(n,t.Qu(r?4:3,e))}function Ic(t,e){if(M0(t=ke(t)))return q_("Unsupported field value:",e,t),N0(t,e);if(t instanceof dc)return function(r,i){if(!A0(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Ic(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ke.fromDate(r);return{timestampValue:Hd(i.serializer,s)}}if(r instanceof Ke){let s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(i.serializer,s)}}if(r instanceof hc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lc)return{bytesValue:t0(i.serializer,r._byteString)};if(r instanceof ut){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:P_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return x_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vh(r)}`)}(t,e)}function N0(t,e){let n={};return xA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(t,(r,i)=>{let s=Ic(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function M0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof hc||t instanceof lc||t instanceof ut||t instanceof dc||t instanceof fc)}function q_(t,e,n){if(!M0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=vh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function w_(t,e,n){if((e=ke(e))instanceof ho)return e._internalPath;if(typeof e=="string")return z_(t,e);throw sh("Field path arguments must be of type string or ",t,!1,void 0,n)}var P$=new RegExp("[~\\*/\\[\\]]");function z_(t,e,n){if(e.search(P$)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ho(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function x0(t,e){return t.some(n=>n.isEqual(e))}var oh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new E_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},E_=class extends oh{data(){return super.data()}};function wh(t,e){return typeof e=="string"?z_(t,e):e instanceof ho?e._internalPath:e._delegate._internalPath}function P0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pc=class{},ah=class extends pc{};function O0(t,e,...n){let r=[];e instanceof pc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof D_).length,a=s.filter(u=>u instanceof ch).length;if(o>1||o>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ch=class t extends ah{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return L0(e._query,n),new $r(e.firestore,e.converter,yv(e._query,n))}_parse(e){let n=Ih(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){NA(p,h);let y=[];for(let b of p)y.push(RA(u,s,b));m={arrayValue:{values:y}}}else m=RA(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||NA(p,h),m=x$(a,o,p,h==="in"||h==="not-in");return ze.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function k0(t,e,n){let r=e,i=wh("where",t);return ch._create(i,r,n)}var D_=class t extends pc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)L0(o,u),o=yv(o,u)}(e._query,n),new $r(e.firestore,e.converter,yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var T_=class t extends ah{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ni(s,o)}(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ur(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function F0(t,e="asc"){let n=e,r=wh("orderBy",t);return T_._create(r,n)}function RA(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BA(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ne.fromString(n));if(!q.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eA(t,new q(r))}if(n instanceof ut)return eA(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(n)}.`)}function NA(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L0(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var b_=class{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Oi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Re(o.doubleValue));return new fc(s)}convertGeoPoint(e){return new hc(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=A_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){let n=ir(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);we(a0(r));let i=new Ld(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function V0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ci=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uh=class extends oh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(wh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Xs=class extends uh{data(e={}){return super.data(e)}},lh=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ci(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xs(this._firestore,this._userDataWriter,r.key,r,new Ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Xs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Xs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:O$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function O$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function U0(t){t=bt(t,ut);let e=bt(t.firestore,cn);return b$(_h(e),t._key).then(n=>G0(e,t,n))}var gc=class extends b_{constructor(e){super(),this.firestore=e}convertBytes(e){return new lc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}};function j0(t){t=bt(t,$r);let e=bt(t.firestore,cn),n=_h(e),r=new gc(e);return P0(t._query),C$(n,t._query).then(i=>new lh(e,r,t,i))}function B0(t,e,n){t=bt(t,ut);let r=bt(t.firestore,cn),i=V0(t.converter,e,n);return Eh(r,[R0(Ih(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,An.none())])}function $0(t,e,n,...r){t=bt(t,ut);let i=bt(t.firestore,cn),s=Ih(i),o;return o=typeof(e=ke(e))=="string"||e instanceof ho?M$(s,"updateDoc",t._key,e,n,r):N$(s,"updateDoc",t._key,e),Eh(i,[o.toMutation(t._key,An.exists(!0))])}function H0(t){return Eh(bt(t.firestore,cn),[new rc(t._key,An.none())])}function q0(t,e){let n=bt(t.firestore,cn),r=H_(t),i=V0(t.converter,e);return Eh(n,[R0(Ih(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function z0(t,...e){var n,r,i;t=ke(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(AA(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof ut)l=bt(t.firestore,cn),h=hh(t._key.path),u={next:p=>{e[o]&&e[o](G0(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=bt(t,$r);l=bt(p.firestore,cn),h=p._query;let m=new gc(l);u={next:y=>{e[o]&&e[o](new lh(l,m,p,y))},error:e[o+1],complete:e[o+2]},P0(t._query)}return function(m,y,b,N){let R=new uc(N),k=new cc(y,R,b);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return U_(yield eh(m),k)})),()=>{R.Za(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return j_(yield eh(m),k)}))}}(_h(l),h,a,u)}function Eh(t,e){return function(r,i){let s=new sn;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return p$(yield T$(r),i,s)})),s.promise}(_h(t),e)}function G0(t,e,n){let r=n.docs.get(e._key),i=new gc(t);return new uh(t,i,e._key,r,new Ci(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){fo=i})(xr),Mr(new zt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new cn(new Zy(r.getProvider("auth-internal")),new tv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$e(YS,"4.7.3",e),$e(YS,"4.7.3","esm2017")})();var wc=class{constructor(t){return t}},W0="firestore",F$=class{constructor(){return Fa(W0)}};var G_=new H("angularfire2.firestore-instances");function L$(t,e){let n=id(W0,t,e);return n&&new wc(n)}function V$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new wc(r)}}var U$={provide:F$,deps:[[new ot,G_]]},j$={provide:wc,useFactory:L$,deps:[[new ot,G_],_i]};function CK(t,...e){return $e("angularfire",vi.full,"fst"),yn([j$,U$,{provide:G_,useFactory:V$(t),multi:!0,deps:[ve,st,Hs,La,[new ot,Oy],[new ot,sd],...e]}])}var RK=Ae(q0,!0);var Dh=Ae(C0,!0);var K0=Ae(H0,!0);var Hr=Ae(H_,!0);var Q0=Ae(U0,!0);var Th=Ae(j0,!0);var NK=Ae(S0,!0);var MK=Ae(z0,!0);var xK=Ae(F0,!0);var W_=Ae(O0,!0);var go=Ae(B0,!0);var PK=Ae($0,!0);var K_=Ae(k0,!0);function $$(t){if(t&&typeof t=="object"){let e=F({},t);return e.createdAt&&e.createdAt instanceof Ke&&(e.createdAt=e.createdAt.toDate()),e}return t}var Y0=class t{constructor(e,n){this.auth=e;this.firestore=n;this.user$=GS(this.auth)}user$;login(e,n){return _(this,null,function*(){try{let r=yield this.findUserByUsername(e);if(!r)throw new Error("Gebruiker niet gevonden");if(r.needsAuthAccount){console.log("Creating Firebase Auth account for user:",e);let i=yield Fy(this.auth,r.email||"",n);console.log("Firebase Auth user created:",i.user.uid);let s=Hr(this.firestore,"users",e);yield go(s,ge(F({},r),{uid:i.user.uid,needsAuthAccount:!1}),{merge:!0}),console.log("User Firebase Auth account created and document updated")}else yield Ly(this.auth,r.email||"",n);return r.needsPasswordChange?(console.log("User needs to change password"),{needsPasswordChange:!0}):{needsPasswordChange:!1}}catch(r){throw r}})}logout(){return _(this,null,function*(){try{yield WS(this.auth)}catch(e){throw e}})}createUser(e){return _(this,null,function*(){try{if(console.log("Creating user:",e.username),yield this.findUserByUsername(e.username))throw new Error("Gebruikersnaam bestaat al");let r=Date.now(),i=Math.random().toString(36).substr(2,9),s=e.email||`${e.username}_${r}_${i}@example.com`;console.log("Using unique email:",s);let o=yield Fy(this.auth,s,e.password);console.log("Firebase Auth user created:",o.user.uid);let a=Hr(this.firestore,"users",e.username),u={username:e.username,email:s,displayName:e.displayName||e.username,role:e.role,createdAt:new Date,uid:o.user.uid};console.log("Creating Firestore document:",u),yield go(a,u),console.log("User created successfully")}catch(n){throw console.error("Error creating user:",n),n}})}createUserAsAdmin(e){return _(this,null,function*(){try{if(console.log("Creating user as admin:",e.username),yield this.findUserByUsername(e.username))throw new Error("Gebruikersnaam bestaat al");let r=Date.now(),i=Math.random().toString(36).substr(2,9),s=e.email||`${e.username}_${r}_${i}@example.com`;console.log("Using unique email:",s);let o=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a=Hr(this.firestore,"users",e.username),u={username:e.username,email:s,displayName:e.displayName||e.username,role:e.role,createdAt:new Date,uid:o,needsAuthAccount:!0,needsPasswordChange:!0};console.log("Creating Firestore document:",u),yield go(a,u),console.log("User created successfully as admin - Firestore document only")}catch(n){throw console.error("Error creating user as admin:",n),n}})}findUserByUsername(e){return _(this,null,function*(){let n=Dh(this.firestore,"users"),r=W_(n,K_("username","==",e)),i=yield Th(r);if(!i.empty){let s=i.docs[0];return ge(F({},s.data()),{uid:s.id})}return null})}getUserData(e){let n=Hr(this.firestore,"users",e);return new X(r=>{Q0(n).then(i=>{i.exists()?r.next(F({uid:e},i.data())):r.next(null),r.complete()}).catch(i=>{r.error(i)})})}getUserDataByUsername(e){return new X(n=>{this.findUserByUsername(e).then(r=>{n.next(r),n.complete()}).catch(r=>{n.error(r)})})}getCurrentUserData(){return this.user$.pipe(ft(e=>e?this.getUserDataByEmail(e.email||""):new X(n=>{n.next(null),n.complete()})))}getUserDataByEmail(e){let n=Dh(this.firestore,"users"),r=W_(n,K_("email","==",e));return new X(i=>{Th(r).then(s=>{if(s.empty)i.next(null);else{let o=s.docs[0];i.next(ge(F({},o.data()),{uid:o.id}))}i.complete()}).catch(s=>{i.error(s)})})}isAdmin(){return this.getCurrentUserData().pipe(ie(e=>e?.role==="admin"||!1))}isLoggedIn(){return this.user$.pipe(ie(e=>!!e))}deleteUser(e){return _(this,null,function*(){try{if(console.log("Deleting user:",e),!(yield this.findUserByUsername(e)))throw new Error("Gebruiker niet gevonden");let r=Hr(this.firestore,"users",e);yield K0(r),console.log("Firestore document deleted"),console.log("User deleted successfully")}catch(n){throw console.error("Error deleting user:",n),n}})}changePassword(e,n){return _(this,null,function*(){try{console.log("Changing password for current user");let r=this.auth.currentUser;if(!r)throw new Error("Geen gebruiker ingelogd");yield Ly(this.auth,r.email||"",e),yield Vy(r,n),console.log("Password updated in Firebase Auth");let i=yield this.getCurrentUserData().toPromise();if(i){let s=Hr(this.firestore,"users",i.username);yield go(s,{needsPasswordChange:!1},{merge:!0}),console.log("User document updated - password change flag removed")}console.log("Password changed successfully")}catch(r){throw console.error("Error changing password:",r),r}})}changePasswordFirstTime(e){return _(this,null,function*(){try{console.log("Changing password for first time");let n=this.auth.currentUser;if(!n)throw new Error("Geen gebruiker ingelogd");yield Vy(n,e),console.log("Password updated in Firebase Auth");let r=yield this.getUserDataByEmail(n.email||"").toPromise();if(r){let i=Hr(this.firestore,"users",r.username);yield go(i,{needsPasswordChange:!1},{merge:!0}),console.log("User document updated - password change flag removed")}else throw console.error("User data not found for email:",n.email),new Error("Gebruikersgegevens niet gevonden");console.log("Password changed successfully")}catch(n){throw console.error("Error changing password:",n),n}})}getAllUsers(){let e=Dh(this.firestore,"users");return new X(n=>{Th(e).then(r=>{let i=[];r.forEach(s=>{let o=$$(s.data());i.push(ge(F({},o),{username:s.id,uid:o.uid}))}),n.next(i),n.complete()}).catch(r=>{n.error(r)})})}static \u0275fac=function(n){return new(n||t)(z(Ga),z(wc))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{F as a,ge as b,H$ as c,_ as d,X as e,it as f,Pe as g,ie as h,uN as i,un as j,j as k,DE as l,B as m,Yo as n,H as o,z as p,O as q,VE as r,Jo as s,_s as t,Xo as u,l9 as v,d9 as w,h9 as x,f9 as y,Kp as z,gt as A,ta as B,p9 as C,Le as D,pl as E,v9 as F,rO as G,pO as H,pg as I,xO as J,kT as K,PO as L,_9 as M,BT as N,$T as O,gg as P,I9 as Q,mg as R,w9 as S,E9 as T,D9 as U,tk as V,qT as W,nk as X,rk as Y,T9 as Z,ik as _,b9 as $,GT as aa,C9 as ba,S9 as ca,A9 as da,bs as ea,R9 as fa,Cs as ga,ra as ha,N9 as ia,_g as ja,Ss as ka,X9 as la,e3 as ma,t3 as na,n3 as oa,r3 as pa,v1 as qa,A3 as ra,vF as sa,Qn as ta,Q3 as ua,Y3 as va,Z3 as wa,$6 as xa,z6 as ya,Ga as za,H8 as Aa,G8 as Ba,Q8 as Ca,wc as Da,CK as Ea,RK as Fa,Dh as Ga,K0 as Ha,Hr as Ia,Th as Ja,NK as Ka,MK as La,xK as Ma,W_ as Na,PK as Oa,K_ as Pa,Y0 as Qa};
